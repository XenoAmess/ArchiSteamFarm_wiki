# Конфигурация

Эта статься посвящена конфигурированию ASF. Здесь содержится полная документация по содержимому папки `config`, прозволяющая настроить ASF под ваши нужды.

- **[Введение](#Введение)**
- **[Сетевой генератор конфигураций](#Сетевой-генератор-конфигураций)**
- **[Ручная настройка](#Ручная-настройка)**
- **[Файл глобальной конфигурации](#Файл-глобальной-конфигурации)**
- **[Конфигурация бота](#Конфигурация-бота)**
- **[Файловая структура](#Файловая-структура)**
- **[Типы параметров в JSON](#Типы-параметров-в-json)**
- **[Совместимость типов](#Совместимость-типов)**
- **[Совместимость конфигураций](#Совместимость-конфигураций)**
- **[Автоматическая перезагрузка](#Автоматическая-перезагрузка)**

* * *

## Введение

Конфигурация ASF разделена на две основные части - глобальная конфигурация (для всего процесса), и конфигурация каждого бота. У каждого бота есть собственный файл конфигурации бота с именем `BotName.json` (где `BotName` это имя, которое вы дали боту), а для конфигурации процесса ASF используется один файл с именем `ASF.json`.

Бот - это один аккаунт Steam используемый ASF. Для нормальной работы ASF требует чтобы был определён хотя бы **один** бот. Жёсткого ограничения на количество ботов нет, поэтому вы можете использовать столько ботов (аккаунтов Steam) сколько захотите.

ASF использует формат **[JSON](https://ru.wikipedia.org/wiki/JSON)** для сохранения настроек в файлах конфигурации. Это дружественный к пользователю, читаемый и довольно универсальный формат, в котором вы можете конфигурировать программу. Но не волнуйтесь, вам не обязательно знать JSON чтобы настроить ASF. Я упомянул это просто на случай если вы захотите массово создавать конфигурации ASF каким-нибудь скриптом.

Конфигурирование может быть проделано вручную - путём создания соответствующих файлов конфигруации в формате JSON, или с использованием нашего **[сетевого генератора конфигураций](https://justarchi.github.io/ArchiSteamFarm)**, что будет намного легче и удобнее. Если вы не продвинутый пользователь, я рекомендую вам использовать генератор конфигураций, описание которого приведено ниже.

**[Вернуться к началу](#Конфигурация)**

* * *

## Сетевой генератор конфигураций

Цель сетевого генератора конфигураций - предоставить вам удобный интерфейс для создания конфигурационных файлов ASF. Сетевой генератор конфигураций работает на 100% на стороне клиента, это значит что никакие данные, которые вы в нём вводите, никуда не пересылаются, и обрабатываются только на вашей машине. Это обеспечивает безопасность и надёжность, поскольку он может работать даже **[оффлайн](https://github.com/JustArchi/ArchiSteamFarm/tree/master/docs)** если вы скачаете все файлы и запустите `index.html` в своём любимом браузере.

Сетевой генератор конфигураций проверен в Chrome и Firefox, но он должен работать во всех популярных браузерах с включенным javascript.

Пользоваться им очень просто - выбираете, хотите ли вы создать файл конфигурации `ASF` или `Бот` выбрав соответствующую закладку, проверяете что выбранная в генераторе версия соответствует вашей версии ASF, вводите все необходимые поля и нажимаете кнопку "Скачать". Скачанный файл кладёте в папку `config` вашего ASF, при необходимости перезаписывая существующий. Повторяете всю процедуру в случае будущих модификаций, и используете остаток этой статьи для объяснения всех доступных параметров конфигурации.

**[Вернуться к началу](#Конфигурация)**

* * *

## Ручная настройка

Я настоятельно рекомендую использовать сетевой генератор конфигураций, но если по какой-то причине вы не хотите - вы можете создавать конфигурационные файлы сами. Ознакомьтесь с файлом `example.json` в качестве примера правильной структуры, вы можете скопировать этот файл и использовать как базу для вашего нового бота. Поскольку вы не пользуетесь программой, убедитесь что ваш файл **[валидный с точки зрения JSON](https://jsonlint.com)**, поскольку ASF не сможет его загрузить если его не удаётся разобрать. Чтобы узнать правильную структуру JSON для всех полей, ознакомьтесь с разделом "**[Типы параметров в JSON](#Типы-параметров-в-json)**" и приведенной ниже документацией.

**[Вернуться к началу](#Конфигурация)**

* * *

## Файл глобальной конфигурации

Файл глобальной конфигурации называется `ASF.json` и имеет следующую структуру:

```json
{
    "AutoRestart": true,
    "Blacklist": [],
    "CommandPrefix": "!",
    "ConfirmationsLimiterDelay": 10,
    "ConnectionTimeout": 60,
    "CurrentCulture": null,
    "Debug": false,
    "FarmingDelay": 15,
    "GiftsLimiterDelay": 1,
    "Headless": false,
    "IdleFarmingPeriod": 8,
    "InventoryLimiterDelay": 3,
    "IPC": false,
    "IPCPassword": null,
    "IPCPrefixes": [
        "http://127.0.0.1:1242/"
    ],
    "LoginLimiterDelay": 10,
    "MaxFarmingTime": 10,
    "MaxTradeHoldDuration": 15,
    "OptimizationMode": 0,
    "Statistics": true,
    "SteamMessagePrefix": "/me ",
    "SteamOwnerID": 0,
    "SteamProtocols": 5,
    "UpdateChannel": 1,
    "UpdatePeriod": 24,
    "WebLimiterDelay": 200,
    "WebProxy": null,
    "WebProxyPassword": null,
    "WebProxyUsername": null
}
```

**Совет:** Если вы не собираетесь менять этих настроек, вы можете просто оставить всё по-умолчанию, а значит вы можете закрыть `ASF.json` и перейти к конфигурированию бота.

* * *

Все параметры описаны ниже:

`AutoRestart` - параметр типа `bool` со значением по-умолчанию `true`. Этот параметр определяет, разрешено ли ASF перезапускаться при необходимости. Существуют события, которые могут потребовать перезапуска ASF, такие как обновление (раз в `UpdatePeriod` или по команде `update`), редактирование файла `ASF.json`, команда `restart` и тому подобное. Перезапуск обычно включает в себя две части - создание нового процесса и завершение текущего. Для большинства пользователей подойдёт оставить этому параметро значение по-умолчанию `true`, однако если вы запускаете ASF через собственный скрипт и/или `dotnet`, возможно вы захотите иметь полный контроль над запуском процесса, и избежать ситуации когда новый (перезапущеный) процесс ASF работает где-то в фоне, а не в основном процессе скрипта, который завершится вместе со старым процессом ASF. Особенно важно то, что новый процесс не будет прямым потомком вашего скрипта, из-за чего вы не сможете например использовать его стандартный поток вывода.

В этом случае вам поможет этот параметр, вы можете установить его в `false`. Однако помните, что в этом случае **вы** несёте ответственность за перезапуск процесса. Это особенно важно поскольку в этом случае ASF просто выйдет вместо создания нового процесса (например, после обновления), поэтому если вы не добавили свою логику для этого случая он просто перестанет работать пока вы его не запустите снова. ASF всегда выходит с правильным кодом выхода, указывающим на удачу (ноль) или неудачу (не ноль), поэтому вы можете добавить правильную логику в своём скрипте чтобы избежать перезапуска ASF в случае отказа, или как минимум создавать резервную копию `log.txt` для дальнейшего анализа. Также помните, что команда `restart` выполнит перезапуск ASF независимо от значения этого параметра, поскольку этот параметр задаёт поведение по-умолчанию, а команда `restart` производит принудительный перезапуск процесса. Если у вас нет причин отключать эту функцию, рекомендуется оставить её включенной.

* * *

`Blacklist` - `ImmutableHashSet<uint>` type with default value of being empty. Как подсказывает название, этот глобальный параметр определяет какие appID (игры) будут полностью игнорироваться в автоматическом режиме фарма ASF. К сожалению Steam любит отмечать значки летней/зимней распрожажи как "доступные для выпадения карточек", из-за чего ASF пытается их фармить как будто это настоящая игра. Если бы не было черного списка, ASF просто "зависал" бы пытаясь фармить эти игры, которые на самом деле не игры, и бесконечно бы ждал пока из них выпадут карточки, чего никогда не произойдёт. Черный список ASF позволяет отметить эти значки как недоступные для фарма, что позволяет просто тихо игнорировать их при определении следующей игры для фарма, и избегать таких ловушек.

По умолчанию ASF включает в себя два черных списка - `GlobalBlacklist`, который жёстко записан в ASF при программировании, и обычный `Blacklist`, который здесь описан. `GlobalBlacklist` обновляется вместе с ASF и обычно включает в себя все "плохие" appID на момент релиза, поэтому если вы пользуетесь последней версией вам не нужно беспокоиться о поддержании своего `Blacklist`, описанного здесь. Основная цель этого параметра - позволить вам заносить в черный список новые, не известные на момент релиза ASF appID, которые не следует фармить. Записанный в код `GlobalBlacklist` обновляется как можно быстрее, поэтому нет необходимости обновлять `Blacklist` если вы пользуетесь последней версие ASF, но без этого параметра вы были бы вынуждены обновлять ASF чтобы поддерживать его "работоспособным" когда Valve выпускает новый значок распродажи - а я не хочу заставлять вас пользоваться последней версие ASF, и поэтому этот параметр позволяет вам "исправить" ASF самостоятельно, если по какой-то причине вы не хотите или не можете обновить `GlobalBlacklist` вместе с новым релизом, но хотите чтобы ASF продолжил работать. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

Если вы ищете черный список, персональный для каждого бота, посмотрите на **[команды](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** `ib`, `ibadd` and `ibrm`.

* * *

`CommandPrefix` - параметр типа `string` со значением по-умолчанию `!`. Этот параметр задаёт **чувствительный к регистру** префикс используемый для **[команд](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** ASF. Другими словами, это то, с чего должна начинаться каждая команда ASF чтобы ASF вас послушался. Этому параметру можно присвоить значение `null` или пустую строку, чтобы заставить ASF не использовать префикс, в этом случае команды вводятся просто своими идентификаторами. Однако, это может привести к снижению производительности ASF, поскольку ASF оптимизирован пропускать команды, если они не начинаются с `CommandPrefix` - если вы намеренно решите не пользоваться им, ASF будет вынужден читать все сообщения и отвечать на них, даже если это не команды. Поэтому рекомендуется использовать какой-нибудь `CommandPrefix`, как например `/`, если вам не нравится значение по-умолчанию `!`. Для единообразия, `CommandPrefix` влияет на весь процесс ASF. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`ConfirmationsLimiterDelay` - параметр типа `byte` со значением по-умолчанию `10`. Сеть Steam в общем случае включает в себя различные ограничения на частоту одинаковых запросов, поэтому нам приходится добавлять дополнительные задержки, чтобы не сработали эти ограничения, поскольку такое срабатывание сделает сервисы Steam временно недоступными. ASF обеспечивает, чтобы как минимум `ConfirmationsLimiterDelay` секунд прошло между двумя последовательными запросами на подтверждение двухфакторной аутентификации (далее 2ФА) - они используются для **[2ФА ASF](https://github.com/JustArchi/ArchiSteamFarm/wiki/Two-factor-authentication-ru-RU)** во время, например, команды `2faok`, а также при необходимости различных действия связанных с обменами. Значение по-умолчанию было установлено исходя из результатов наших тестов, и его не стоит снижать если вы не хотите возникновения проблем. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`ConnectionTimeout` - параметр типа `byte` со значением по-умолчанию `60`. Этот параметр определяет таймауты для различных сетевых действий, производимых ASF, в секундах. В частности, `ConnectionTimeout` определяет таймаут в секундах для HTTP и IPC запросов, `ConnectionTimeout / 10` определяет максимальное число пропущенных тактов сторожевого таймера, а `ConnectionTimeout / 30` определяет время в минутах, которое мы выделяем на начальный запрос подключения к сети Steam. Значение по умолчанию `60` должно подходить большинству пользователей, однако, если у вас очень медленное сетевое подключение или ПК, возможно вы захотите увеличить это значение (например до `90`). Имейте в виду, что большие значения не починят волшебным образом медленные или недоступные сервера Steam, поэтому нет смысла бесконечно ждать чего-то, что никогда не случится, и проще попробовать заново позже. Установка этому параметру слишком большого значения приведёт к излишним задержка обнаружения проблем с сетью, а также приведёт к общему падению производительности. Установка этому параметру слишком маленького значения также уменьшит общую стабильность и производительность, поскольку ASF будет прерывать нормальные запросы, которые ещё обрабатываются. Поэтому устанавливать этому параметру значение меньше значения по-умолчанию в целом не даёт преимуществ, поскольку сервера Steam время от времени работают медленно, и поэтому требуют больше времени для обработки запросов ASF. Значение по-умолчанию - это попытка уравновесить предположение о стабильности сетевого подключения и сомнения в способности сети Steam обработать запрос за отведенное время. Если вы хотите обнаруживать проблемы с сетью как можно раньше и позволить ASF переподключаться/реагировать как можно быстрее, значение по умолчанию вам подойдёт (можно сделать его немножко ниже, чтобы ASF стал менее терпеливым). Если же вы замечаете, что у ASF часто происходят проблемы с сетью, такие как ошибки обменов, потери тактов сторожевого таймера, или разрывы связи со Steam, возможно имеет смысл увеличить это значение если вы уверены что это связано с самим Steam, а **не** с вашей сетью, поскольку увеличение таймаутов делает ASF более "терпеливым" и не пытаться сразу же переподключаться. Возможно также имеет смысл увеличить это значение если у вас довольно медленный интернет, который требует больше времени для передачи данных. Вкратце, значение по-умолчанию подходит для большинства случаев, но вы можете захотеть увеличить его при необходимости. Но значительно увеличивать относительно значения по-умолчанию также не имеет много смысла, поскольку большие таймауты не починят волшебным образом недоступные сервера Steam. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`CurrentCulture` - параметр типа `string` со значением по-умолчанию `null`. По-умолчанию ASF пытается использовать язык вашей операционной системы, и использовать переведенные на этот язык строки, если они доступны. Это возможно благодаря нашему сообществу, которое старается **[локализовать](https://github.com/JustArchi/ArchiSteamFarm/wiki/Localization-ru-RU)** ASF на большинство популярных языков. Если по какой-то причине вы не хотите использовать язык вашей ОС, вы можете использовать этот параметр чтобы выбрать любой существующий язык, который бы вы хотели использовать. Полный список языков вы можете найти в **[MSDN](https://msdn.microsoft.com/en-us/library/cc233982.aspx)** в колонке `Language tag`. Рады сообщить, что ASF воспринимает как точные указания на языки, как например `en-GB`, так и нейтральные, такие как `en`. Указание языка может также влиять на другие региональные настройки, такие как формат валюты, даты и тому подобное. Обратите внимание, что вам могут понадобиться дополнительные шрифты/языковые пакеты для правильного отображения символов некоторых языков, если вы выбрали язык отличный от языка вашей системы. Обычно вам может понадобиться этот параметр если вы хотите пользоваться ASF на английском языке вместо своего родного.

* * *

`Debug` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, должен ли ASF работать в режиме отладки. В режиме отладки, ASF использует специальную папку `debug` рядом с папкой `config`, в которой сохраняются все обмены между ASF и серверами Steam. Отладочная информация может помочь обнаруживать сложные проблемы, связанные с сетью и общей работой ASF. В дополнение к этому, некоторые подпрограммы будут выводить гораздо больше информации, так например `WebBrowser` будет указывать конкретную причину, почему запросы завершаются неудачно - такая информация записывается в обычный журнал ASF. **Вам не следует использовать ASF в режиме отладки, если вас об этом не попросил разработчик**. Работа в отладочном режиме **уменьшает производительность**, **отрицательно влияет на стабильность** и **выводит гораздо больше информации в разных местах**, поэтому этот режим должен использоваться **исключительно** намеренно, кратковременно, для отладки конкретной проблемы, воспроизведения проблемы или получения дополнительной информации и сбое обмена, и тому подобное, но **не** для нормальной работы программы. Вы увидите **огромное количество** новых ошибок, проблем, и исключений - подумайте, обладаете ли вы достаточными знаниями об ASF, Steam и его глюках прежде чем вы решите анализировать эти данные самостоятельно, поскольку часть этих сообщений может не соответствовать истине.

**ПРЕДУПРЕЖДЕНИЕ:** активация этого режима включает журналирование **потенциально конфиденциальной** информации, такой как логины и пароли, используемые для входа в Steam (из-за журналирования сетевых запросов). Эти данные записываются как в папку `debug`, так и в обычный `log.txt` (который в этом режиме будет гораздо более подробным). Вам не следует выкладывать отладочную информацию, сгенерированную ASF, в публичных местах, разработчики ASF всегда будут просить передать её на e-mail, или выложить в другое безопасное место. We're not storing, neither making use of those sensitive details, they're written as part of debug routines since their presence might be relevant to the issue that is affecting you. We'd prefer if you didn't alter ASF logging in any way, but if you're worried, you're free to redact those sensitive details appropriately.

> Redacting involves replacing sensitive details, for example with stars. You should refrain from removing sensitive lines entirely, as their pure existance might be relevant and should be preserved.

* * *

`FarmingDelay` - параметр типа `byte` со значением по-умолчанию `15`. Для работы ASF требуется периодически проверять каждые `FarmingDelay` минут, не выпали ли уже все карточки из текущей игры. Слишком маленькое значение в этом параметру приведёт к избыточному количеству запросов к steam, а слишком большое может привести к тому что ASF будет "фармить игру на `FarmingDelay` дольше чем требуется. Значение по-умолчанию должно прекрасно подойти большинству пользователей, однако если у вас много ботов вы можете захотеть увеличить это значение до чего-то вроде `30` минут чтобы ограничить количество запросов к сети Steam. К счастью, ASF использует механизм обработки событий и проверяет страницу значков в Steam каждый раз когда появляется уведомление о новых предметов, поэтому в общем случае **нам вообще не нужно проверять это через фиксированные промежутки времени**, но поскольку мы не полностью доверяем сети Steam - мы всё же проверяем страницу со значками, чтобы убедиться за за последние `FarmingDelay` минут не выпало карточек (на случай если Steam не пришлёт уведомление о новый предметах, или что-то подобное). Если предположить что сесть Steam работает правильно, уменьшение этого значения **никак не повлияет на эффективность фарма**, но **существенно увеличит нагрузку на сеть** - поэтому рекомендуется только увеличивать его (при необходимости) относительно значения по-умолчанию в `15` минут. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`GiftsLimiterDelay` - параметр типа `byte` со значением по-умолчанию `1`. Сеть Steam в общем случае включает в себя различные ограничения на частоту одинаковых запросов, поэтому нам приходится добавлять дополнительные задержки, чтобы не сработали эти ограничения, поскольку такое срабатывание сделает сервисы Steam временно недоступными. ASF обеспечивает чтобы между последовательными запросами на обработку(активацию) подарков/ключей/лицензий прошло как минимум `GiftsLimiterDelay` секунд. В дополнение к этому этот параметр также будет использоваться как глобальное ограничение на получение списка игр, как например по **[команде](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** `owns`. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`Headless` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, должен ли ASF работать в безынтерфейсном режиме. В безынтерфейсном режиме предполагается что ASF запущен на сервере или в другой не-интерактивной среде, и поэтому запросы на чтение данных из консоли (таких как коды аутентификации, коды SteamGuard, пароли и тому подобное) не будут выдаваться. Это аналогично переводу консоли ASF в режим "только для чтения". Безынтерфейсный режим полезен в основном для пользователей, запускающих ASF на серверах, поскольку вместо запроса на, например, код аутентификации, ASF будет просто прерывать операцию и останавливать "проблемный" аккаунт. Если вы не пользуетесь ASF на сервере, и не убедились что ASF сможет работать без ввода дополнительных данных, вам стоит оставить этот параметр выключенным. В безынтерфейсном режиме не будет работать никакое взаимодействие с пользователем, и бот просто не запустится если для его работы нужен **любой** ввод значений. Это полезно на серверах, чтобы ASF просто прекращал попытки входа в аккаунт если для этого нужны дополнительные данные, а не ждал (бесконечно) пока пользователь их введёт. Также, если этот параметр включен, вы сможете пользоваться **[командой](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** `input`, которая служит заменой стандартного ввода с консоли. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `false`.

Если вы используете ASF на сервере, возможно вы захотите использовать этот параметр совместно с **[аргументом командной строки](https://github.com/JustArchi/ArchiSteamFarm/wiki/Command-line-arguments-ru-RU)** `--process-required`.

* * *

`IdleFarmingPeriod` - параметр типа `byte` со значением по-умолчанию `8`. Когда ASF нечего фармить, он будет проверять каждые `IdleFarmingPeriod` часов, не появилось ли на аккаунте новых игр для фарма. Эта функция не нужна когда мы говорим о добавлении новых игр на аккаунт, поскольку алгоритм ASF достаточно умен чтобы автоматически проверять в этом случае страницу со значками. `IdleFarmingPeriod` в основном для тех случаев, когда в старую игру, которае есть у нас на аккаунте, добавили коллекционные карточки. В этом случае нет никакого события, поэтому ASF приходится периодически проверять страницу со значками чтобы предусмотреть такой вариант. Значение `0` выключает эту функцию. Смотрите также: `ShutdownOnFarmingFinished`.

* * *

`InventoryLimiterDelay` - параметр типа `byte` со значением по-умолчанию `3`. Сеть Steam в общем случае включает в себя различные ограничения на частоту одинаковых запросов, поэтому нам приходится добавлять дополнительные задержки, чтобы не сработали эти ограничения, поскольку такое срабатывание сделает сервисы Steam временно недоступными. ASF обеспечивает чтобы между двумя последовательными запросами к инвентарю (они используются только чтобы получить список предметов в вашем инвентаре) прошло как минимум `InventoryLimiterDelay` секунд. Значение по-умолчанию `3` основано на испытаниях проведенных со 100 ботами, и должно быть достаточным для большинства (если не всех) пользователей. Однако вы можете захотеть уменьшить это значение, или даже сделать его равным `0` если у вас очень небольшое количество ботов, в этом случае ASF будет игнорировать задержку и опрашивать инвентари гораздо быстрее. Но помните, слишком низкое значение **приведёт** к временному бано по IP, и тогда вы вообще не сможете получить доступ к инвентарю. Вам может также понадобиться увеличить это значение если у вас много ботов который производят много запросов к инвентарю, хотя возможно в этом случае вам стоит вместо этого уменьшить количество запросов. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`IPC` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, должен ли **[IPC](https://github.com/JustArchi/ArchiSteamFarm/wiki/IPC-ru-RU)** сервер ASF запускаться при запуске программы. IPC обеспечивает межпроцессное взаимодействие запуская локальный HTTP сервер по указанному в `IPCPrefixes` адресу. Если вы не собираетесь использовать IPC сервер ASF, нет смысла включать этот параметр.

* * *

`IPCPassword` - параметр типа `string` со значением по-умолчанию `null`. Этот параметр задаёт обязательный пароль для любого запроса через IPC и служит дополнительной мерой безопасности. Когда этому параметру присвоено не пустое значение, все IPC запросы будут требовать дополнительный параметр `password` со значением заданным тут. Значение по-умолчанию `null` снимает необходимость в пароле, позволяя ASF обрабатывать все запросы. В дополнение к этому, включение этого параметра также включает встроенный в IPC механизм предотвращения перебора, который будет временно банить любой `IP` -адрес посылающий слишком много неавторизованных запросов за короткий интервал времени. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`IPCPrefixes` - `ImmutableHashSet<string>` type with default value of `http://127.0.0.1:1242/` item. Этот параметр задаёт префиксы, которые будет использовать `HttpListener` используемый в интерфейсе **[IPC](https://github.com/JustArchi/ArchiSteamFarm/wiki/IPC-ru-RU)**. Другими словами, этот параметр указывает, по каким адресам IPC интерфейс ASF должен ждать входящих запросов. Для получения общей информации о префиксах `HttpListener`, пожалуйста ознакомьтесь с **[MSDN](https://docs.microsoft.com/en-us/dotnet/api/system.net.httplistener?view=netstandard-2.0#Remarks)**.

> A URI prefix string is composed of a scheme (http or https), a host, an optional port, and an optional path. An example of a complete prefix string is `http://www.contoso.com:8080/customerData/`. Prefixes must end in a forward slash (`/`). The HttpListener object with the prefix that most closely matches a requested URI responds to the request. Multiple HttpListener objects cannot add the same prefix; a Win32Exception exception is thrown if a HttpListener adds a prefix that is already in use.
> 
> When a port is specified, the host element can be replaced with `*` to indicate that the HttpListener accepts requests sent to the port if the requested URI does not match any other prefix. For example, to receive all requests sent to port 8080 when the requested URI is not handled by any HttpListener, the prefix is `http://*:8080/`. Similarly, to specify that the HttpListener accepts all requests sent to a port, replace the host element with the `+` character, `https://+:8080`. The `*` and `+` characters can be present in prefixes that include paths.
> 
> Starting with .NET 4.5.3 and Windows 10, wildcard subdomains are supported in URI prefixes that are managed by an HttpListener object. To specify a wildcard subdomain, use the `*` character as part of the hostname in a URI prefix: for example, `http://*.foo.com/`, and pass this as the argument to the HttpListenerPrefixCollection.Add method. This will work on .NET 4.5.3 and Windows 10; in earlier versions, this would generate an HttpListenerException

ASF по умолчанию ожидает запросов только по адресу `127.0.0.1`, чтобы ни одна другая машина кроме вашей не могла получить доступ. Это мера безопасности, поскольку доступ к интерфейсу IPC может повлечь атаку на ваш процесс ASF, что может иметь драматические последствия. Однако, если вы знаете, что делаете, например, если вы позаботитесь об ограничении доступа к IPC самостоятельно, используя например `iptables` или другой брандмауэр, вы можете поменять этот параметр (на свой страх и риск) на что-то менее ограничивающее, например на `*`, что включит IPC на всех сетевых интерфейсах. Возможно вы также захотите используемый по-умолчанию порт IPC на любой другой, рекомендуется использовать порты выше `1024`, поскольку порты `0-1024` обычно требуют прав `root` на Unix-подобных операционных системах. Также помните о том, что ожидание запросов по адресу может требовать дополнительных прав, например привязка к публичному интерфейсу в Windows требует чтобы ASF был запущен с правами администратора (или была правильно настроена политика `netsh`).

Если ваша машина поддерживает IPv6, возможно вы захотите добавить значение `http://[::1]:1242/` в эту коллекцию, чтобы ожидать запросов как по локальному адресу IPv4 `127.0.0.1`, так и по локальному адресу IPv6 `::1`. Это особенно важно если вы планируете получать доступ к ASF по имени `localhost`, потому что в вашем случае может по-умолчанию использоваться IPv6.

Помните о том, что этот параметр, помимо привязки к сетевому адресу, также задаёт корректные **URL** по которым доступен интерфейс IPC. Другими словами, если вы хотите получить доступ к интерфейсу IPC по адресу `asf.example.com`, вам нужно задать в параметре `IPCPrefixes` значение `http://asf.example.com:1242/`. Даже если ваш интерфейс IPC доступен (например, вы сменили `127.0.0.1` на общедоступный IP-адрес), вы получите ошибку `404 NotFound` если URL по которому вы пытаетесь получить доступ не задан в `IPCPrefixes` ASF. Поэтому вам нужно задать в `IPCPrefixes` все URL по которым должен быть доступен интерфейс IPC, это может включать локальные адреса IPv4 и IPv6, публичные адреса IPv4 и IPv6 и доменные имена, так что у вас будет суммарно 5 разных `IPCPrefixes` если вы хотите получить доступ к интерфейсу IPC всеми этими 5 способами. Конечно же, вы можете просто задать `http://*:1242/`, но это может быть не всегда допустимо.

Обратите внимание - на данный момент ASF не поддерживает префиксы с путями, отличными от корневого (`/`). Использование пути, отличного от корневого, даст в результате ошибку `404`. Мы надеемся исправить это ограничение в будущем.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`LoginLimiterDelay` - параметр типа `byte` со значением по-умолчанию `10`. Сеть Steam в общем случае включает в себя различные ограничения на частоту одинаковых запросов, поэтому нам приходится добавлять дополнительные задержки, чтобы не сработали эти ограничения, поскольку такое срабатывание сделает сервисы Steam временно недоступными. ASF обеспечивает чтобы между двумя последовательными запросами на подключение прошло как минимум `LoginLimiterDelay` секунд. Значение по-умолчанию `10` было выбрано на основе подключения 100 ботов, и должно удовлетворить большинство (если не всех) пользователей. Вы можете, однако, захотеть уменьшить его, или даже сделать равным `0`, если у вас очень малое количество ботов, в этом случае ASF будет игнорировать задержку и подключаться к Steam намного быстрее. Но учтите, что слишком низкое значение при большом количестве ботов **приведёт** к временному бану по IP, что приведёт к **полной** невозможности подключиться и ошибке `InvalidPassword/RateLimitExceeded` - и это касается и обычного клиента Steam, не только ASF. Дополнительно, этот параметр также используется как буфер балансировки нагрузки всех запланированных действий ASF, таких как обмены по `SendTradePeriod`. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`MaxFarmingTime` - параметр типа `byte` со значением по-умолчанию `10`. Как вы должно быть знаете, Steam не всегда работает идеально, иногда происходят странные ситуации, как например Steam иногда не учитывает время в игре, хотя вы играете. ASF будет фармить одну игру в соло-режиме максимум `MaxFarmingTime` часов, и будет считать что фарм завершен по окончанию этого периода. Это необходимо не только чтобы процесс фарма не "зависал" в случае каких-то странных ситуаций, но и на случай если Steam выпускает новый значок, который не даёт ASF продолжить работу (см. `Blacklist`). Значение по-умолчанию в `10` часов должно быть достаточно для выпадения карточек из одной игры. Установка слишком маленького значения может привести к тому что обычные игры будут пропускаться (и да, известны случаи когда выпадение карт в игре занимает 9 часов), а слишком высокое значение может привести к "зависанию" процесса. Обратите внимание, что этот параметр влияет только на одну игру в одном сеансе фарма (поэтому после того пройдёт вся очередь ASF снова вернётся к той же игре), а также на то, что это не общее время в игре, а время фарма в ASF. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`MaxTradeHoldDuration` - параметр типа `byte` со значением по-умолчанию `15`. Этот параметр определяет максимальную длительность задержки обмена в днях, при которой мы согласны его принять - ASF будет отклонять обмены с задержкой более `MaxTradeHoldDuration` дней. Этот параметр влияет только на ботов у которых `TradingPreferences` имеет значение `SteamTradeMatcher`, и не затрагивает ни обменов с `Master`/`SteamOwnerID` ни пожертвований. Удержания обменов не нравятся никому, и никто не хочет иметь с ними дела. ASF предполагает работу по либеральным правилам и помощь каждому, независимо от удержания обмена - поэтому по-умолчанию значение этого параметра `15`. Однако, если вы предпочитаете отклонять все обмены с удержанием, вы можете указать здесь `0`. Также учитывайте, что карты с коротким сроком жизни не подвержены влиянию этого параметра, и обмены с ними отклоняются в случае наличия задержек, как описано в разделе "**[Обмены](https://github.com/JustArchi/ArchiSteamFarm/wiki/Trading-ru-RU)**", поэтому нет нужды глобально отклонять все обмены только из-за этого. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`OptimizationMode` - параметр типа `byte` со значением по-умолчанию `0`. Этот параметр определяет режим оптимизации, который ASF будет использовать при работе. На данный момент ASF поддерживает два режима - `0`, который называется `MaxPerformance`(Максимальная производительность), и `1` который называется `MinMemoryUsage`(Минимальное потребление памяти). По умолчанию ASF предпочитает как можно больше вещей делать параллельно (одновременно), что увеличивает производительность распределяя нагрузку на всех ядрах ЦПУ, нескольких потоках ЦПУ, нескольких сокетах и нескольких очередях задач. Например, ASF запросит первую страницу значков чтобы узнать какие игры фармить, и после завершения этого запроса прочитает сколько страниц со значками у вас есть, и запросит их все одновременно. Это то что вам нужно **почти всегда**, поскольку избыточность минимальна, а выгода от использования асинхронного кода ASF может быть заметна даже на очень старом железе с одноядерным CPU и ограниченной производительностью. Однако, когда много задач выполняется параллельно, ASF отвечает за их поддержку, как например поддержку открытых сокетов, запущенных потоков и обрабатываемых задач, что иногда может привести к увеличению использования памяти, и если вы очень ограничены доступной памятью, возможно вы захотите переключить значение этого параметра в `1` (`MinMemoryUsage`), что приведёт к тому что ASF будет последовательно выполнять код, который мог бы быть распараллелен. Вам стоит задумываться о переключении этой опции только если вы уже прочли раздел "**[Конфигурация для низкого потребления ОЗУ](https://github.com/JustArchi/ArchiSteamFarm/wiki/Low-memory-setup-ru-RU)**" и намеренно хотите пожертвовать огромным приростом производительности, ради очень небольшого выигрыша в объёме памяти. Обычно результаты от использования этого параметра **гораздо хуже** чем результаты, которых можно достичь другими путями, такими как ограниченное использование ASF или настройка сборщика мусора, как описано в разделе "**[Конфигурация для низкого потребления ОЗУ](https://github.com/JustArchi/ArchiSteamFarm/wiki/Low-memory-setup)**". Поэтому вам стоит использовать `MinMemoryUsage` только как **крайнюю меру**, перед перекомпиляцией исполняемых файлов, если вы не смогли достичь удовлетворительных результатов другими (гораздо лучшими) способами. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`Statistics` - параметр типа `bool` со значением по-умолчанию `true`. Этот параметр определяет, будет ли в ASF включена статистика. Подробное описание того, что делает этот параметр, доступно в разделе "**[Статистика](https://github.com/JustArchi/ArchiSteamFarm/wiki/Statistics-ru-RU)**". Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`SteamMessagePrefix` - параметр типа `string` со значением по-умолчанию `"/me "`. Этот параметр задаёт префикс, который будет добавляться в начало всех сообщений в Steam, отсылаемых ASF. По умолчанию ASF использует префикс `"/me "` чтобы сообщения от бота можно было легко отличить по другому цвету в чате Steam. Другой достойный упоминания префикс - `"/pre "`, который даёт похожий результат но использует другой вид форматирования. Вы также можете сделать этот параметр равным пустой строке или `null` чтобы полностью отключить использование префиксов и отправлять все сообщения ASF в обычном виде. Приятно отметить, что этот параметр влияет только на сообщения в Steam - ответы полученные через другие каналы (такие как IPC) не меняются. Кроме случая, когда вы хотите изменить стандартное поведение ASF, хорошей идеей будет оставить этому параметру значение по-умолчанию.

* * *

`SteamOwnerID` - параметр типа `ulong` со значением по-умолчанию `0`. Этот параметр задаёт 64-битный SteamID владельца процеса ASF, и очень похож на права доступа `Master` в настройках конкретного бота (но работающий глобально). Почти всегда вам нужно задать в этом параметре ID вашего основного аккаунта Steam. Права доступа `Master` даёт полный контроль над конкретным ботом, но глобальные команды, такие как `exit`, `restart` или `update` доступны только для `SteamOwnerID`. Это удобно если вы захотите запускать у себя ботов ваших друзей, не давая им при этом контроля над процессом ASF, например не позволяя завершить его командой `exit`. Значение по-умолчанию `0` указывает что у процесса ASF нет владельца, то есть никто не сможет использовать глобальные команды. Помните, что **[IPC](https://github.com/JustArchi/ArchiSteamFarm/wiki/IPC-ru-RU)** работает с `SteamOwnerID`, поэтому если вы хотите им пользоваться вам нужно указать здесь правильное значение.

* * *

`SteamProtocols` - `byte flags` type with default value of `5`. Этот параметр определяет протоколы по которым ASF будет соединяться с серверами Steam, которые задаются следующим образом:

| Значение | Имя       | Описание                                                                                         |
| -------- | --------- | ------------------------------------------------------------------------------------------------ |
| 0        | None      | Отсутствие протокола                                                                             |
| 1        | TCP       | **[Transmission Control Protocol](https://ru.wikipedia.org/wiki/Transmission_Control_Protocol)** |
| 2        | UDP       | **[User Datagram Protocol](https://ru.wikipedia.org/wiki/UDP)**                                  |
| 4        | WebSocket | **[WebSocket](https://ru.wikipedia.org/wiki/WebSocket)**                                         |

Обратите внимание, что это параметр типа `flags`, и следовательно возможны любые комбинации доступных значений. Ознакомьтесь с описанием типа `flags` в разделе "**[Типы параметров в JSON](#Типы-параметров-в-json)**" если хотите узнать больше. Если вы не включите ни один флаг, результатом будет вариант `None`, который сам по себе не является верным.

По-умолчанию ASF использует все доступные протоколы в качестве меры борьбы с простоями и другими проблемами Steam. Возможно вы захотите изменить этот параметр если вы хотите ограничить ASF использованием только одного или двух определённых протоколов вместо всех доступных. Такие меры могут понадобиться например если у вас есть брандмауэр на котором разрешён только TCP-трафик и вы не хотите чтобы ASF пытался подключиться по UDP. Однако, если вы не пытаетесь отладить какую-то конкретную проблему, почти всегда будет лучше дать ASF возможность выбрать любой из доступных протоколов, а не только один или два. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

Right now, default settings do not include UDP protocol due to issue **[#882](https://github.com/JustArchi/ArchiSteamFarm/issues/882)**.

* * *

`UpdateChannel` - `byte` type with default value of `1`. This property defines update channel which is being used, either for auto-updates (if `UpdatePeriod` is greater than `0`), or update notifications (otherwise). Currently ASF supports three update channels - `0` which is called `None`, `1`, which is called `Stable`, and `2`, which is called `Experimental`. `Stable` channel is the default release channel, which should be used by majority of users. `Experimental` channel in addition to `Stable` releases, also includes **pre-releases** dedicated for advanced users and other developers in order to test new features, confirm bugfixes or give feedback about planned enhancements. **Experimental versions often contain unpatched bugs, work-in-progress features or rewritten implementations**. If you don't consider yourself advanced user, please stay with default `1` (Stable) update channel. `Experimental` channel is dedicated to users who know how to report bugs, deal with issues and give feedback - no technical support will be given. Check out ASF **[release cycle](https://github.com/JustArchi/ArchiSteamFarm/wiki/Release-cycle)** if you'd like to learn more. You can also set `UpdateChannel` to `0` (`None`), if you want to completely remove all version checks. Setting `UpdateChannel` to `0` will entirely disable entire functionality related to updates, including `update` command. Using `None` channel is **strongly discouraged** due to exposing yourself to all sort of problems (mentioned in `UpdatePeriod` description below).

**Unless you know what you're doing**, we **strongly** recommend to keep it at default.

* * *

`UpdatePeriod` - `byte` type with default value of `24`. This property defines how often ASF should check for auto-updates. Updates are crucial not only to receive new features and critical security patches, but also to receive bugfixes, performance enhancements, stability improvements and more. When a value greater than `0` is set, ASF will automatically download, replace, and restart itself (if `AutoRestart` permits) when new update is available. In order to achieve this, ASF will check every `UpdatePeriod` hours if new update is available on our GitHub repo. A value of `0` disables auto-updates, but still allows you to execute `update` command manually. You might also be interested in setting appropriate `UpdateChannel` that `UpdatePeriod` should follow.

Update process of ASF involves update of entire folder structure that ASF is using, but without touching your own configs or databases located in `config` directory - this means that any extra files unrelated to ASF in its directory might be lost during update. Default value of `24` is a good balance between unnecessary checks, and ASF that is fresh enough.

Unless you have a **strong** reason to disable this feature, you should keep auto-updates enabled within reasonable `UpdatePeriod` **for your own good**. This is not only because we don't support anything but latest stable ASF release, but also because **we give our security guarantee only for latest version**. If you're using outdated ASF version then you're intentionally exposing yourself to all kind of issues, from small bugs, through broken functionality, ending with **[permanent Steam account suspensions](https://github.com/JustArchi/ArchiSteamFarm/wiki/FAQ#did-somebody-get-banned-for-it)**, so we **strongly recommend**, for your own good, to always ensure that your ASF version is up to date. Auto-updates allow us to react quickly to all kind of issues by disabling or patching problematic code before it can escalate - if you opt out of it, you lose all of our security guarantees and risk consequences from running code that could be potentially harmful, not only to Steam network, but also (by definition) to your own Steam account.

* * *

`WebLimiterDelay` - `ushort` type with default value of `200`. This property defines, in miliseconds, the minimum amount of delay between sending two consecutive requests to the same Steam web-service. Such delay is required as **[AkamaiGhost](https://www.akamai.com)** service that Steam uses internally includes rate-limiting based on global number of requests sent across given time period. In normal circumstances akamai block is rather hard to achieve, but under very heavy workloads with a huge ongoing queue of requests, it's possible to trigger it if we keep sending too many requests across too short time period.

Default value was set based on assumption that ASF is the only tool accessing Steam web-services, in particular `steamcommunity.com`, `api.steampowered.com` and `store.steampowered.com`. If you're using another tool sending requests to the same web-services then you should make sure that your tool includes similar functionality of `WebLimiterDelay` and set both to double of default value, which would be `400`. This guarantees that under no circumstance you'll exceed sending more than 1 request per 200 ms.

In general, lowering `WebLimiterDelay` under default value is **strongly discouraged** as it might lead to various IP-related blocks, some of which are possible to be permanent. Default value is good enough for running a single ASF instance on the server, as well as using ASF in normal scenario along with original Steam client. It should be correct for majority of usages, and you should only increase it (never lower it), if - apart from using ASF, you're also using another tool that might send excessive number of requests to the same web-services that ASF is making use of. In short, global number of all requests sent from a single IP to a single Steam domain should never exceed more than 1 request per 200 ms.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`WebProxy` - `string` type with default value of `null`. This property defines a web proxy address that will be used for all internal http and https requests sent by ASF's `HttpClient`, especially to services such as `github.com`, `steamcommunity.com` and `store.steampowered.com`. Proxying ASF requests in general has no advantages, but it's exceptionally useful for bypassing various kinds of firewalls, especially the great firewall in China.

This property is defined as uri string:

> A URI string is composed of a scheme (http or https), a host, and an optional port. An example of a complete uri string is `"http://contoso.com:8080"`.

If your proxy requires user authentication, you will also need to set up `WebProxyUsername` and/or `WebProxyPassword`. If there is no such need, setting up this property alone is sufficient.

Right now ASF uses web proxy only for `http` and `https` requests, which **do not** include internal Steam network communication done within ASF's internal Steam client. There are currently no plans for supporting that, mainly due to missing **[SK2](https://github.com/SteamRE/SteamKit)** functionality. If you need/want it to happen, I'd suggest starting from there.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`WebProxyPassword` - `string` type with default value of `null`. This property defines password field used in basic, digest, NTLM, and Kerberos authentication that is supported by a target `WebProxy` machine providing proxy functionality. If your proxy doesn't require user credentials, there is no need for you to input anything here. Using this option makes sense only if `WebProxy` is used as well, as it has no effect otherwise.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`WebProxyUsername` - `string` type with default value of `null`. This property defines username field used in basic, digest, NTLM, and Kerberos authentication that is supported by a target `WebProxy` machine providing proxy functionality. If your proxy doesn't require user credentials, there is no need for you to input anything here. Using this option makes sense only if `WebProxy` is used as well, as it has no effect otherwise.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

**[Вернуться к началу](#Конфигурация)**

* * *

## Конфигурация бота

As you should know already, every bot should have its own config. Example bot config is included in `example.json` file, which should be used for bot configuration. Simply **copy paste** `example.json` to a new file, and remember to name it appropriately, as it will be your bot instance. You should start from configuring your **primary** account, so some good suggestions for filename is `primary.json`, `1.json` or `YourNickname.json`.

**Notice:** There are several names which are reserved and can't be used for bot configs. Those are: **ASF**, **example** and **minimal**. ASF will ignore such configuration files. ASF will also ignore configuration files starting with a dot.

After deciding how you want to name your bot, open its file, and start with configuration. You should notice following structure:

```json
{
    "AcceptGifts": false,
    "AutoSteamSaleEvent": false,
    "BotBehaviour": 0,
    "CustomGamePlayedWhileFarming": null,
    "CustomGamePlayedWhileIdle": null,
    "Enabled": false,
    "FarmingOrders": [],
    "GamesPlayedWhileIdle": [],
    "HoursUntilCardDrops": 3,
    "IdlePriorityQueueOnly": false,
    "IdleRefundableGames": true,
    "LootableTypes": [
        1,
        3,
        5
    ],
    "MatchableTypes": [
        5
    ],
    "OnlineStatus": 1,
    "PasswordFormat": 0,
    "Paused": false,
    "RedeemingPreferences": 0,
    "SendOnFarmingFinished": false,
    "SendTradePeriod": 0,
    "ShutdownOnFarmingFinished": false,
    "SteamLogin": null,
    "SteamMasterClanID": 0,
    "SteamParentalPIN": "0",
    "SteamPassword": null,
    "SteamTradeToken": null,
    "SteamUserPermissions": {},
    "TradingPreferences": 0,
    "UseLoginKeys": true
}
```

**Tip:** In order for bot to work properly, you should edit at least `Enabled`, `SteamLogin` and `SteamPassword` properties. I also suggest to take a look at some fine-tuning such as `HoursUntilCardDrops`, but all of that is optional. ASF configs are quite advanced to allow you tune your bots and ASF however you want, if you don't "require" such advanced setup, you don't really have to go deep into each config property. It's up to you how simple or how complex ASF should be.

* * *

Все параметры описаны ниже:

`AcceptGifts` - `bool` type with default value of `false`. When enabled, ASF will automatically accept and redeem all steam gifts received by the bot. This includes also gifts from users different than defined in `SteamUserPermissions`. This option is recommended only for alt accounts, as it's very likely that you don't want to automatically redeem all gifts sent to your primary account. Keep in mind that gifts sent to e-mail address are not directly forwarded to the client, so ASF won't accept those gifts (without your help), therefore you should be sending steam gifts to your bots directly. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`AutoSteamSaleEvent` - `bool` type with default value of `false`. During Steam summer/winter sale events Steam is known for providing you extra cards for browsing discovery queue each day, as well as voting in the Steam awards. When this option is enabled, ASF will automatically check Steam discovery queue and Steam awards each 6 hours, and clear them if needed. This option is not recommended if you want to do those actions yourself, and typically it should make sense only on bot accounts. Moreover, you need to ensure that your account is at least of level `8` if you expect to receive those cards in the first place. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

Please note that due to constant Valve issues, changes and problems, **we give no guarantee whether this function will work properly**, therefore it's entirely possible that this option **will not work at all**. We do not accept **any** bug reports, neither support requests for this option. It's offered with absolutely no guarantees, you're using it at your own risk.

* * *

`BotBehaviour` - `byte flags` type with default value of `0`. This property defines ASF bot-like behaviour during various events, and is defined as below:

| Значение | Имя                           | Описание                                                                                   |
| -------- | ----------------------------- | ------------------------------------------------------------------------------------------ |
| 0        | None                          | Бот не имеет особых реакций, наименее агрессивный режим, используется по умолчанию         |
| 1        | RejectInvalidFriendInvites    | ASF будет отклонять (а не игнорировать) неверные запросы на добавление в друзья            |
| 2        | RejectInvalidTrades           | ASF будет отклонять (а не игнорировать) неверные предложения обмена                        |
| 4        | RejectInvalidGroupInvites     | ASF будет отклонять (а не игнорировать) неверные приглашения в группы                      |
| 8        | DismissInventoryNotifications | ASF будет автоматически отмечать все уведомления о предметах в инвентаре как просмотренные |
| 16       | MarkReceivedMessagesAsRead    | ASF будет автоматически отмечать все полученные сообщения как прочитанные                  |

Обратите внимание, что это параметр типа `flags`, и следовательно возможны любые комбинации доступных значений. Ознакомьтесь с описанием типа `flags` в разделе "**[Типы параметров в JSON](#Типы-параметров-в-json)**" если хотите узнать больше. Если вы не включите никаких флагов, будет использоваться вариант `None`.

In general you want to modify this property if you expect from ASF to do certain amount of automation related to its activity, as it'd be expected from a bot account, but not a primary account used in ASF. Therefore, changing this property makes sense mainly for alt accounts, although you're free to use selected options for main accounts as well.

Normal (`None`) ASF behaviour is to only automate things that user wants (e.g. cards farming or `SteamTradeMatcher` offers, if set in `TradingPreferences`). This is the least invasive mode, and it's beneficial to majority of users since you remain in full control over your account and you can decide yourself whether to allow certain out-of-scope interactions, or not.

Invalid friend invite is an invite that doesn't come from user with `FamilySharing` permission (defined in `SteamUserPermissions`) or above. ASF in normal mode ignores those invites, as you'd expect, giving you free choice whether to accept them, or not. `RejectInvalidFriendInvites` will cause those invites to be automatically rejected, which will practically disable option for other people to add you to their friend list (as ASF will deny all such requests, apart from people defined in `SteamUserPermissions`). Unless you want to outright deny all friend invites, you shouldn't enable this option.

Invalid trade offer is an offer that isn't accepted through built-in ASF module. More on this matter can be found in **[trading](https://github.com/JustArchi/ArchiSteamFarm/wiki/Trading)** section which explicitly defines what types of trade ASF is willing to accept automatically. Valid trades are also defined by other settings, especially `TradingPreferences`. `RejectInvalidTrades` will cause all invalid trade offers to be rejected, instead of being ignored. Unless you want to outright deny all trade offers that aren't automatically accepted by ASF, you shouldn't enable this option.

Invalid group invite is an invite that doesn't come from `SteamMasterClanID` group. ASF in normal mode ignores those group invites, as you'd expect, allowing you to decide yourself if you want to join particular Steam group or not. `RejectInvalidGroupInvites` will cause all those group invites to be automatically rejected, effectively making it impossible to invite you to any other group than `SteamMasterClanID`. Unless you want to outright deny all group invites, you shouldn't enable this option.

If you're unsure how to configure this option, it's best to leave it at default.

* * *

`CustomGamePlayedWhileFarming` - `string` type with default value of `null`. When ASF is farming, it can display itself as "Playing non-steam game: `CustomGamePlayedWhileFarming`" instead of currently farmed game. This can be useful if you would like to let your friends know that you're farming, yet you don't want to change default `OnlineStatus`. Please note that ASF cannot guarantee the actual display order of Steam network, therefore this is only a suggestion that may, or may not, display properly. Default value of `null` disables this feature.

* * *

`CustomGamePlayedWhileIdle` - `string` type with default value of `null`. Similar to `CustomGamePlayedWhileFarming`, but for the situation when ASF has nothing to do (as account is fully farmed). Default value of `null` disables this feature.

* * *

`Enabled` - `bool` type with default value of `false`. This property defines if bot is enabled. Enabled bot instance (`true`) will automatically start on ASF run, while disabled bot instance (`false`) will need to be started manually. By default every bot is disabled, so you probably want to switch this property to `true` for all of your bots that should be started automatically.

* * *

`FarmingOrders` - `ImmutableHashSet<byte>` type with default value of being empty. This property defines the **preferred** farming order used by ASF for given bot account. Currently there are following farming orders available:

| Значение | Имя                       | Описание                                                                                    |
| -------- | ------------------------- | ------------------------------------------------------------------------------------------- |
| 0        | Unordered                 | Без сортировки, незначительно улучшает производительность ЦПУ                               |
| 1        | AppIDsAscending           | Пытаться сначала фармить игры с самым маленьким `appID`                                     |
| 2        | AppIDsDescending          | Пытаться сначала фармить игры с самым большим `appID`                                       |
| 3        | CardDropsAscending        | Пытаться сначала фармить игры с наименьшим количеством доступных для выпадения карточек     |
| 4        | CardDropsDescending       | Пытаться сначала фармить игры с наибольшим количеством доступных для выпадения карточек     |
| 5        | HoursAscending            | Пытаться сначала фармить игры с наименьшим количеством наигранных часов                     |
| 6        | HoursDescending           | Пытаться сначала фармить игры с наибольшим количеством наигранных часов                     |
| 7        | NamesAscending            | Пытаться фармить игры в алфавитном порядке, начиная с A                                     |
| 8        | NamesDescending           | Пытаться фармить игры в обратном алфавитном порядке, начиная с Z                            |
| 9        | Random                    | Пытаться фармить игры в совершенно случайном порядке (разном для каждого запуска программы) |
| 10       | BadgeLevelsAscending      | Пытаться сначала фармить игры с самым маленьким уровнем значка                              |
| 11       | BadgeLevelsDescending     | Пытаться сначала фармить игры с самым большим уровнем значка                                |
| 12       | RedeemDateTimesAscending  | Пытаться сначала фармить игры, которые добавлены на аккаунт раньше других                   |
| 13       | RedeemDateTimesDescending | Пытаться сначала фармить игры, которые добавлены на аккаунт позже других                    |
| 14       | MarketableAscending       | Пытаться сначала фармить игры, карточки из которых нельзя продать                           |
| 15       | MarketableDescending      | Пытаться сначала фармить игры, карточки из которых можно продать                            |

Since this property is an array, it allows you to use several different settings in your fixed order. For example, you can include values of `15`, `11` and `7` in order to sort by marketable games first, then by those with highest badge level, and finally alphabetically. As you can guess, the order actually matters, as reverse one (`7`, `11` and `15`) achieves something entirely different. Majority of people will probably use just one order out of all of them, but in case you want to, you can also sort further by extra parameters.

Also notice the word "try" in all above descriptions - the actual ASF order is heavily affected by selected **[cards farming algorithm](https://github.com/JustArchi/ArchiSteamFarm/wiki/Performance)** and sorting will affect only results that ASF considers same performance-wise. For example, in `Simple` algorithm, selected `FarmingOrders` should be entirely respected in current farming session (as every game has the same performance value), while in `Complex` algorithm actual order is affected by hours first, and then sorted according to chosen `FarmingOrders`. This will lead to different results, as games with existing playtime will have a priority over others, so effectively ASF will prefer games with highest playtime first, and only then sorting everything further by your chosen `FarmingOrders`. Therefore, this config property is only a **suggestion** that ASF will try to respect, as long as it doesn't affect performance negatively (in this case, ASF will always prefer performance over `FarmingOrders`).

There is also idling priority queue that is accessible through `iq` **[commands](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands)**. If it's used, actual idling order is sorted firstly by performance, then by idling queue, and finally by your `FarmingOrders`.

* * *

`GamesPlayedWhileIdle` - `ImmutableHashSet<uint>` type with default value of being empty. If ASF has nothing to farm it can play your specified steam games (`appID`s) instead. Playing games in such manner increases your "hours played" of those games, but nothing else apart of it. This feature can be enabled at the same time with `CustomGamePlayedWhileIdle` in order to play your selected games while showing custom status in Steam network, but in this case, like in `CustomGamePlayedWhileFarming` case, the actual display order is not guaranteed. Please note that Steam allows ASF to play only up to `32` `appID`s, therefore if you put more games than that, only first `32` will be respected (and extra ones being ignored).

* * *

`HoursUntilCardDrops` - `byte` type with default value of `3`. This property defines if account has card drops restricted, and if yes, for how many initial hours. Restricted card drops means that account is not receiving any card drops from given game until the game is played for at least `HoursUntilCardDrops` hours. Unfortunately there is no magical way to detect that, so ASF relies on you. This property affects **[cards farming algorithm](https://github.com/JustArchi/ArchiSteamFarm/wiki/Performance)** that will be used. Setting this property properly will maximize profits and minimize time required for cards to be farmed. Remember that there is no obvious answer whether you should use one or another value, since it fully depends on your account. It seems that older accounts which never asked for refund have unrestricted card drops, so they should use a value of `0`, while new accounts and those who did ask for refund have restricted card drops with a value of `3`. Но это только теория, и не стоит полагаться на это как на правило. The default value for this property was set based on "lesser evil" and majority of use cases.

* * *

`IdlePriorityQueueOnly` - `bool` type with default value of `false`. This property defines if ASF should consider for automatic idling only apps that you added yourself to priority idling queue available with `iq` **[commands](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands)**. When this option is enabled, ASF will skip all `appIDs` that are missing on the list, effectively allowing you to cherry-pick games for automatic ASF idling. Keep in mind that if you didn't add any games to the queue then ASF will act as if there is nothing to idle on your account. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`IdleRefundableGames` - `bool` type with default value of `true`. This property defines if ASF is permitted to idle games that are still refundable. A refundable game is a game that we bought in last 2 weeks through Steam Store and we didn't play it for longer than 2 hours yet, as stated **[here](https://store.steampowered.com/steam_refunds)**. By default when this option is set to `true`, ASF ignores Steam refunds entirely and idles everything, as most people expect. However, you can change this option to `false` if you want to ensure that ASF won't idle any of your refundable games too soon, allowing you to evaluate those games yourself and refund if needed without worrying about ASF affecting playtime negatively. Please note that if you disable this option then games you purchased from Steam Store won't be idled by ASF for up to 14 days since redeem date. If you're unsure whether you want this feature enabled or not, keep it with default value of `true`.

* * *

`LootableTypes` - `ImmutableHashSet<byte>` type with default value of `1, 3, 5` steam item types. This property defines ASF behaviour when looting - both manual and automatic. ASF will ensure that only items from `LootableTypes` will be included in a trade offer, therefore this property allows you to choose what you want to receive in a trade offer that is being sent to you.

| Значение | Имя               | Описание                                                                  |
| -------- | ----------------- | ------------------------------------------------------------------------- |
| 0        | Unknown           | Типы предметов, которые не попадают ни в одну из категорий ниже           |
| 1        | BoosterPack       | Наборы карточек                                                           |
| 2        | Emoticon          | Смайлики, используемые в чате Steam                                       |
| 3        | FoilTradingCard   | Аналог `TradingCard`, но для металлических карточек                       |
| 4        | ProfileBackground | Фоны, используемые в вашем профиле Steam                                  |
| 5        | TradingCard       | Коллекционные карточки Steam, используемые для создания значков (обычных) |
| 6        | SteamGems         | Самоцветы и мешки самоцветов, используемые для создания наборов карточек  |

Please note that regardless of the settings above, ASF will only ask for Steam (`appID` of 753) community (`contextID` of 6) items, so all game items, gifts and likewise, are excluded from the trade offer by definition.

Default ASF setting is based on most common usage of the bot, with looting only booster packs, and trading cards (including foils). The property defined here allows you to alter that behaviour in whatever way that satisfies you. Please keep in mind that all types not defined above will show as `Unknown` type, which is especially important when Valve releases some new Steam item, that will be marked as `Unknown` by ASF as well, until it's added here (in the future release). That's why in general it's not recommended to include `Unknown` type in your `LootableTypes`, unless you know what you're doing, and you also understand that ASF will send your entire inventory in a trade offer if Steam Network gets broken again and reports all your items as `Unknown`. My strong suggestion is to not include `Unknown` type in the `LootableTypes`, even if you expect to loot everything.

* * *

`MatchableTypes` - `ImmutableHashSet<byte>` type with default value of `5` Steam item types. This property defines which Steam item types are permitted to be matched when `SteamTradeMatcher` option in `TradingPreferences` is enabled. Types are defined as below:

| Значение | Имя               | Описание                                                                  |
| -------- | ----------------- | ------------------------------------------------------------------------- |
| 0        | Unknown           | Типы предметов, которые не попадают ни в одну из категорий ниже           |
| 1        | BoosterPack       | Наборы карточек                                                           |
| 2        | Emoticon          | Смайлики, используемые в чате Steam                                       |
| 3        | FoilTradingCard   | Аналог `TradingCard`, но для металлических карточек                       |
| 4        | ProfileBackground | Фоны, используемые в вашем профиле Steam                                  |
| 5        | TradingCard       | Коллекционные карточки Steam, используемые для создания значков (обычных) |
| 6        | SteamGems         | Самоцветы и мешки самоцветов, используемые для создания наборов карточек  |

Of course, types that you should use for this property typically include only `2`, `3`, `4` and `5`, as only those types are supported by STM. Please note that **ASF is not a trading bot** and **will NOT care about price or rarity**, which means that if you use it e.g. with `Emoticon` type, then ASF will be happy to trade your 2x rare emoticon for 1x rare 1x common, as that makes progress towards badge (in this case emoticons) completion. Please evaluate twice if you're fine with that. Unless you know what you're doing, you should keep it with default value of `5`.

* * *

`OnlineStatus` - `byte` type with default value of `1`. This property specifies Steam community status that the bot will be announced with after logging in to Steam network. Currently you can choose one of below statuses:

| Значение | Имя            |
| -------- | -------------- |
| 0        | Offline        |
| 1        | Online         |
| 2        | Busy           |
| 3        | Away           |
| 4        | Snooze         |
| 5        | LookingToTrade |
| 6        | LookingToPlay  |
| 7        | Invisible      |

`Offline` status is extremely useful for primary accounts. As you should know, farming a game actually shows your steam status as "Playing game: XXX", which can be misleading to your friends, confusing them that you're playing a game while actually you're only farming it. Using `Offline` status solves that issue - your account will never be shown as "in-game" when you're farming steam cards with ASF. This is possible thanks to the fact that ASF does not have to sign in into Steam Community in order to work properly, so we're in fact playing those games, connected to Steam network, but without announcing our online presence at all. Keep in mind that played games using offline status will still count towards your playtime, and show as "recently played" on your profile.

In addition to that, this feature is also important if you want to receive notifications and unread messages when ASF is running, while not keeping Steam client open at the same time. This is because ASF acts as a Steam client itself, and whether ASF would like it or not, Steam broadcasts all those messages and other events to it. This is not a problem if you have both ASF and your own Steam client running, as both clients receive exactly the same events. However, if just ASF is running, Steam network could mark certain events and messages as "delivered", despite of your traditional Steam client not receiving it due to not being present. Offline status also solves this problem, as ASF is never considered for any community events in this case, so all unread messages and other events will be properly marked as unread when you come back.

It's important to note that ASF running on `Offline` mode will **not** be able to receive commands in usual Steam chat way, as the chat, as well as entire community presence is in fact, entirely offline. A solution to this issue is using `Invisible` mode instead which works in a similar way (not exposing status), but keeps the ability to receive and respond to messages (so also a potential to dismiss notifications and unread messages as stated above). `Invisible` mode makes the most sense on alt accounts that you don't want to expose (status-wise), but still be able to send commands to.

However, there is one catch with `Invisible` mode - it doesn't go well with primary accounts. This is because **any** Steam session that is currently online **exposes** the status, even if ASF itself does not. This is caused by the current limitation/bug of the Steam network that isn't possible to be fixed on ASF side, so if you want to use `Invisible` mode you will also need to ensure that **all** other sessions to the same account use `Invisible` mode as well. This will be the case on alt accounts where ASF is hopefully the only active session, but on primary accounts you'll almost always prefer to show as `Online` to your friends, hiding only ASF activity, and in this case `Invisible` mode will be entirely useless for you (we recommend to use `Offline` mode instead). Hopefully this limitation/bug will be eventually solved in the future by Valve, but I wouldn't expect that to happen anytime soon...

If you're unsure how to set up this property, it's recommended to use a value of `0` (`Offline`) for primary accounts, and default `1` (`Online`) otherwise.

* * *

`PasswordFormat` - параметр типа `byte` со значением по-умолчанию `​0​`. Этот параметр задаёт формат хранения параметра `SteamPassword`, и на сегодняшний день поддерживает следующие значения: `​0​` для `PlainText`, `1` для `AES` и `2` для `ProtectedDataForCurrentUser`. Пожалуйста, прочтите раздел "**[Безопасность](https://github.com/JustArchi/ArchiSteamFarm/wiki/Security-ru-RU)**" если хотите узнать больше, поскольку вам потребуется убедиться, что параметр `SteamPassword` действительно содержит пароль в формате, соответствующем `PasswordFormat`. Другими словами, когда вы меняете `PasswordFormat` ваш `SteamPassword` должен **уже** быть в этом формате, а не только планироваться как таковой. Вам следует оставить этому параметру значение по-умолчанию `​0​`, кроме тех случаев когда вы хорошо знаете, что делаете.

* * *

`Paused` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет исходное состояние модуля `CardsFarmer`. Со значением по-умолчанию `false` бот будет автоматически начинать фарм после запуска либо по параметру `Enabled` либо по команде `start`. Этот параметр следует переключать в `true` только если вы хотите вручную запускать процесс фарма командой `resume`, либо например если вы планируете всегда использовать команду `play` и не собираетесь использовать автоматический модуль `CardsFarmer` - он работает точно так же, как **[команда](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** `pause`. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`RedeemingPreferences` - параметр типа `byte flags` со значением по-умолчаниюtype `​0​`. Этот параметр определяет поведение ASF при активации ключей в Steam, и задаётся следующим образом:

| Значение | Имя              | Описание                                                                                                |
| -------- | ---------------- | ------------------------------------------------------------------------------------------------------- |
| 0        | None             | Нет предпочтений по активации, по-умолчанию                                                             |
| 1        | Forwarding       | Передавать ключи, которые не удалось активировать, другим ботам                                         |
| 2        | Distributing     | Распределять все ключи между этим и другими ботами                                                      |
| 4        | KeepMissingGames | Не передавать ключи для игр, которые (возможно) отсутствуют на аккаунте, оставлять их неиспользованными |

Обратите внимание что это параметр типа `flags`, и следовательно ему может быть присвоена любая комбинация приведенных выше значений. Ознакомьтесь с описанием типа `flags` в разделе "**[Типы параметров в JSON](#Типы-параметров-в-json)**" если хотите узнать больше. Если вы не включите никаких флагов, будет использоваться вариант `None`.

`Forwarding` приведёт к тому, что бот будет передавать ключи, которые не удалось активировать, другим подключенным и запущенным ботам, у которых нет данной игры (если удалось проверить). Наиболее распространённая ситуация это передача это игры со статусом `AlreadyPurchased`(уже есть на аккаунте) другому боту, у которого нет этой игры, но это значение также поддерживает другие случаи, такие как `DoesNotOwnRequiredApp`(отсутствует базовая игра), `RateLimited`(слишком много попыток активации) or `RestrictedCountry`(ключ не может быть активирован в вашем регионе).

`Distributing` приведёт к тому, что все полученные ключи будут распределены между этим и другими ботами. Это означает, что каждый бот получит один ключ и списка. Обычно это используется только если вы активируете много ключей от одной и той же игры, и хотите равномерно распределить их по всем ботам, ситуация противоположная активации нескольких ключей от разных игр. Эта функция не имеет никакого смысла если вы активируете только один ключ в одной команде `redeem` (поскольку нет дополнительных ключей, которые можно распределить).

`KeepMissingGames` приведёт к тому, что бот будет игнорировать значение `Forwarding` если нет уверенности в том, что активируемый ключ от игры, которая уже есть на аккаунте. Это попросту означает, что `Forwarding` будет применять **только** к ключам, получившим статус `AlreadyPurchased`, не покрывая другие случаи, такие как `DoesNotOwnRequiredApp`, `RateLimited` и `RestrictedCountry` (см. выше). Обычно вам может пригодиться это значение только для основного аккаунта, чтобы убедиться, что активируемые на нём ключи не будут переданы дальше если он временно получил статус `RateLimited`. Как вы можете догадаться из описания, это значение не будет иметь абсолютно никакого эффекта, если не включено значение `Forwarding`.

Если вы включите и `Forwarding` и `Distributing`, вы получите сочетание передачи с распределением, то есть ASF будет сначала пытаться активировать один ключ на всех аккаунтах (передача) перед тем как переходить к следующему (распределение). Обычно такое сочетание нужно если вы хотите использовать `Forwarding`, но со сменой следующего бота для активации, вместо того чтобы перебирать всех ботов по порядку (как происходит при одном `Forwarding`). Этот вариант может быть полезен если вы знаете что большинство или все ключи от одной и той же игры, потому что в этой ситуации один `Forwarding` будет пытаться активировать их все сначала на пером боте (что имеет смысл если ключи от разных игр), а `Forwarding` + `Distributing` будет менять бота для следующего ключа, "передавая" задачу активации нового ключа следующему боту (что имеет смысл если все ключи для одной игры, пропускается бессмысленная попытка активации для каждого ключа).

Реальный порядок ботов для всех вариантов активации - по алфавиту, исключая ботов которые не доступны (не подключены, остановлены и тому подобное). Помните, что у Steam есть ограничени попыток активации, как для одного аккаунта, так и для одного IP, и каждая попытка активации не завершившаяся статусом `OK` увеличивает счётчик неудачных попыток. ASF прилагает все усилия, чтобы уменьшить число статусов `AlreadyPurchased`, например пытаясь избежать передачи ключа боту, у которого уже есть эта игра, но это не всегда работает из-за того как Steam работает с лицензиями. Использование флагов активации, таких как `Forwarding` или `Distributing`, всегда увеличивает ваш шанс на получение статуса `RateLimited`.

Также помните, что вы не можете передавать или распределять ключи ботам, для которых у вас нет прав доступа. Это должно быть очевидно, но убедитесь что у вас есть права как минимум `Operator` для всех ботов, которых вы хотите задействовать в процессе активации, например с помощью **[команды](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** `status ASF`.

* * *

`SendOnFarmingFinished` - параметр типа `bool` со значением по-умолчанию `false`. По окончанию фарма всех карточек на одном аккаунте, ASF может автоматически отсылать предложение обмена со всеми выпавшими предметами пользователю с правами `Master`, что довольно удобно если вы не хотите заниматься предложениями обмена самостоятельно. Эта функция аналогична команде `loot`, поэтому помните что для неё нужно чтобы был установлен пользователь с правами `Master`, а также может понадобиться правильный `SteamTradeToken`, ну и конечно аккаунту должно быть разрешено совершать обмены. В дополнение к запуску `loot` после окончания фарма, если эта функция активна, ASF будет также вызывать `loot` каждый раз при получении уведомления о получении новых предметов (только когда фарм не запущен), и после завершения каждого обмена при котором получены новые предметы(всегда). Это особенно удобно для передачи "по цепочке" предметов полученных от других людей на основной аккаунт. Настоятельно рекомендуется использовать эту функцию совместно с настроенной **[2ФА ASF](https://github.com/JustArchi/ArchiSteamFarm/wiki/Two-factor-authentication-ru-RU)**, поскольку нет смысла автоматически отсылать предложения обмена если их надо вручную подтверждать. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `false`.

* * *

`SendTradePeriod` - параметр типа `byte` со значением по-умолчанию `​0​`. Этот параметр очень похож на `SendOnFarmingFinished`, с одним отличием - вместо того, чтобы отсылать предложение обмена по окончанию фарма, бот может отсылать предложение обмена каждые `SendTradePeriod` часов, не зависимо от того, сколько осталось фармить. Это полезно, если вы хотите получать предметы с дополнительных аккаунтов на регулярной основе, не дожидаясь окончания фарма. Значение по-умолчанию `​0​` отключает эту функцию, если вы хотите чтобы ваш бот отсылал вам предложения обмена, например, каждый день - поставьте сюда значение `24`. Настоятельно рекомендуется использовать эту функцию совместно с настроенной **[2ФА ASF](https://github.com/JustArchi/ArchiSteamFarm/wiki/Two-factor-authentication-ru-RU)**, поскольку нет смысла автоматически отсылать предложения обмена если их надо вручную подтверждать. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `​0​`.

* * *

`ShutdownOnFarmingFinished` - параметр типа `bool` со значением по-умолчанию `false`. ASF "занимает" аккаунт на всё время пока пока процесс запущен. Когда на аккаунте закончен фарм карточек, ASF периодически проверяет (каждые `IdleFarmingPeriod` часов), не появились ли новые игры с карточками, чтобы продолжить фарм без необходимости перезапуска процесса. Это полезно для большинства пользователей, поскольку ASF продолжает фармить по мере необходимости. Однако вы можете захотеть завершать процесс когда фарм на аккаунте закончен, для этого поставьте этому параметру значение `true`. Если этот параметр включен, ASF будет выходить из аккаунта когда фарм на нём закончен, а значит не сможет периодически проверять или занимать его. Вам нужно решить, хотите ли вы чтобы ASF работал с данным аккаунтом всё время, или ASF должен останавливать его, когда закончин фарм. Если все аккаунты остановлены, и процесс не запущен в **[режиме](https://github.com/JustArchi/ArchiSteamFarm/wiki/Command-Line-Arguments-ru-RU)** `--process-required`, ASF также будет завершён. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `false`.

* * *

`SteamLogin` - параметр типа `string` со значением по-умолчанию `null`. В этом параметре задаётся ваш логин Steam - тот, с которым вы входите в Steam. Помимо задания логина в этом параметре, вы можете оставить ему значение `null` если хотите вводить логин каждый раз при запуске ASF вместо хранения его в конфигурационном файле. Это может быть полезным, если вы не хотите сохранять конфиденциальные данные в конфигурационном файле.

* * *

`SteamMasterClanID` - параметр типа `ulong` со значением по-умолчанию `​0​`. В этом параметре задаётся steamID группы Steam, к которой бот должен автоматически присоединяться, и входить в чат. Вы можете узнать steamID вашей группы перейдя на её **[страницу](https://steamcommunity.com/groups/ascfarm)**, а затем добавив `/memberslistxml?xml=1` в конец ссылки в адресной строке, чтобы ссылка приобрела **[такой](https://steamcommunity.com/groups/ascfarm/memberslistxml?xml=1)** вид. Затем вы сможете получить steamID из результирующей выдачи (в некоторых браузерах может понадобиться включить режим просмотра исходного кода), он находится в теге `<groupID64>`. В примере выше это будет `103582791440160998`. В добавок к попытке присоединиться к группе на старте, бот будет также автоматически принимать приглашения в эту группу, что даёт вам возможность пригласить бота вручную, если ваша группа не открытая. Если у вас нет группы для ваших ботов, вам следует оставить этому параметру значение по-умолчанию, равное `0`.

* * *

`SteamParentalPIN` - параметр типа `string` со значением по-умолчанию `0`. В этом параметре задаётся ваш PIN для семейного просмотра. ASF требуется доступ к ресурсам, защищённым средствами семейного просмотра, если вы пользуетесь этим функционалом Steam - вам необходимо указать ваш PIN для корректной работы ASF. Значение по-умолчанию `​0​` означает что для просмотра содержимого на этом аккаунте не нужен PIN семейного просмотра, это то значение которое вам нужно если вы не пользуетесь этой функцией в Steam. Помимо задания PIN в этом параметре, вы можете также использовать значение `null`, если вы хотите вводить PIN семейного просмотра при каждом запуске ASF, вместо сохранения его в конфигурационном файле. Это может быть полезным, если вы не хотите сохранять конфиденциальные данные в конфигурационном файле.

* * *

`SteamPassword` - параметр типа `string` со значением по-умолчанию `null`. В этом параметре задаётся ваш пароль Steam - тот, с которым вы входите в Steam. Помимо задания пароля в этом параметре, вы можете оставить ему значение `null` если хотите вводить пароль каждый раз при запуске ASF вместо хранения его в конфигурационном файле. Это может быть полезным, если вы не хотите сохранять конфиденциальные данные в конфигурационном файле.

* * *

`SteamTradeToken` - параметр типа `string` со значением по-умолчанию `null`. Если бот находится в вашем списке друзей, он может отправлять вам предложения обмена без указания токена, в этом случае вы можете оставить этому параметру значение `null`. Однако, если вы решите что НЕ хотите иметь бота в списке друзей, вам понадобиться сгенерировать и заполнить токен для обменов как пользователю, которому бот должен отправлять обмен. Другими словами, в этом параметре должен быть указан токен для обменов от того аккаунта, который задан как `Master` в параметре `SteamUserPermissions` **этого** бота.

Чтобы найти ваш токен, вы должны зайти в Steam с аккаунта, который указан как `Master`, перейти **[сюда](https://steamcommunity.com/my/tradeoffers/privacy)** и посмотреть на свою ссылка на обмен. Токен, который вы ищете, состоит из 8 символов после `&token=` в вашей ссылке на обмен. Вам нужно скопировать эти 8 символов сюда, в параметр `SteamTradeToken`. Не нужно указывать целиком ссылку на обмен, и даже часть `&token=`, только сам токен.

* * *

`SteamUserPermissions` - `ImmutableDictionary<ulong, byte>` type with default value of being empty. Этот параметр - ассоциативный массив, задающий соответствие между пользователем Steam, указанным с помощью 64-битного Steam ID, и числом типа `byte`, которое задаёт его права для данного бота ASF. На данный момент доступны следующие права:

| Значение | Имя           | Описание                                                                                                                                                                                                                     |
| -------- | ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 0        | None          | Никаких прав, это зарезервированное значение, которое нужно только чтобы описывать те steam ID, которые отсутствуют в этом массиве - нет необходимости задавать какой-то аккаунт с такими правами                            |
| 1        | FamilySharing | Даёт минимальный доступ для пользователей использующих семейный доступ. Опять же, это скорее зарезервированное значение, поскольку ASF способен автоматически обнаруживать каким steam ID разрешён доступ к вашей библиотеке |
| 2        | Operator      | Даёт основные права доступа к боту, в основном для активации ключей и добавления бесплатных лицензий                                                                                                                         |
| 3        | Master        | Даёт полный доступ к данному боту                                                                                                                                                                                            |

Если коротко, этот параметр позволяет вам управлять разрешениями для выбранных пользователей. Разрешения важны для доступа к **[командам](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)**, но также для активации различных функций ASF, таких как принятие предложений обмена. Например, вы можете объявить свой аккаунт как `Master`, и дать права `Operator` 2-3 своим друзьям, чтобы они могли активировать ключи на ваших ботах, но при этом **не** могли, например, остановить их. Благодаря этому вы легко можете назначать права выбранным пользователям и давать им доступ к выбранным вами ботам до определённой вами степени.

Мы рекомендуем указать только одного пользователя как `Master`, и сколько захотите - как `Operator` и ниже. Хотя технически возможно указать несколько `Master`ов и ASF, будет корректно с ними работать, например принимать предложения обмена, которые они отправят боту, но ASF будет использовать только одного из них (с самым маленьким steam ID) для всех задач, для которых требуется только одна цель - например, запросов `loot`, а также параметров `SendOnFarmingFinished` или `SendTradePeriod`. Если вы хорошо понимаете эти ограничения, особенно тот факт что запрос `loot` всегда будет отсылать предметы аккаунту `Master` с самым маленьким steam ID, независимо от того, кто из `Master`ов отдал эту команду - вы можете задать здесь несколько пользователей с правами `Master`, но мы всё же рекомендуем схему с одним `Master` - мы не будем оказывать поддержку для конфигураций с несколькими `Master`.

Стоит отметить, что дополнительно есть ещё права доступа `Owner`, которые задаются в параметре `SteamOwnerID` глобальной конфигурации. Вы не можете никому задать права `Owner` в этом параметре, поскольку параметр `SteamUserPermissions` определяет только права, относящиеся к боту, а не к процессу ASF в целом.

* * *

`TradingPreferences` - параметр типа `byte flags` со значением по-умолчанию `0`. Этот параметр определяет поведение ASF при получении предложений обменов, и задаётся следующим образом:

| Значение | Имя                 | Описание                                                                                                                                                                                                                                 |
| -------- | ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 0        | None                | Нет предпочтений при обменах - принимаются только обмены от `Master`                                                                                                                                                                     |
| 1        | AcceptDonations     | Принимаются предложения обменов, в которых бот не отдаёт никаких предметов                                                                                                                                                               |
| 2        | SteamTradeMatcher   | Принимаются предложения обменов дубликатов карточек по правилам **[STM](https://www.steamtradematcher.com)**. Ознакомьтесь с разделом "**[Обмены](https://github.com/JustArchi/ArchiSteamFarm/wiki/Trading-ru-RU)**" чтобы узнать больше |
| 4        | MatchEverything     | Требует, чтобы был задан `SteamTradeMatcher`, и в сочетании с ним - также принимаются "плохие" сделки в дополнение к "хорошим" и "нейтральным"                                                                                           |
| 8        | DontAcceptBotTrades | Не принимаются автоматически предложения обмена, отправленные по команде `loot` другими ботами                                                                                                                                           |

Обратите внимание что это параметр типа `flags`, и следовательно ему может быть присвоена любая комбинация приведенных выше значений. Ознакомьтесь с описанием типа `flags` в разделе "**[Типы параметров в JSON](#Типы-параметров-в-json)**" если хотите узнать больше. Если вы не включите никаких флагов, будет использоваться вариант `None`.

Дальнейшее объяснение логики работы ASF с предложениями обмена, и описание всех доступных флагов вы найдёте в разделе "**[Обмены](https://github.com/JustArchi/ArchiSteamFarm/wiki/Trading-ru-RU)**".

* * *

`UseLoginKeys` - параметр типа `bool` со значением по-умолчанию `true`. Этот параметр задаёт, должен ли ASF использовать механизм ключей авторизации для этого аккаунта Steam. Механизм ключей авторизации подобен функции "Запомнить мой пароль" официального клиента Steam, он делает возможным для ASF сохранить временный одноразовый ключ авторизации для следующего подключения, снимая необходимость в пароле, коде Steam Guard или 2ФА если сохранённый ключ авторизации верный. Ключ авторизации хранится в файле `BotName.db` и обновляется автоматически. Поэтому вам не нужно вводить пароль/код SteamGuard/код 2ФА после того как вы зашли в ASF хотя бы раз.

Ключи авторизации по-умолчанию используются для вашего удобства, чтобы вам не нужно было вводить `SteamPassword` и коды SteamGuard или 2ФА (если вы не пользуетесь **[2ФА ASF](https://github.com/JustArchi/ArchiSteamFarm/wiki/Two-factor-authentication-ru-RU)**) при каждом входе. Это превосходная альтернатива, поскольку ключ авторизации может быть использован только один раз и никоим образом не раскрывает ваш пароль. Точно такой же метод используется самим клиентом Steam, который сохраняет имя вашего аккаунта и ключ авторизации для следующего входа, что по сути то же самое что использование `SteamLogin` с `UseLoginKeys` и пустым `SteamPassword` в ASF.

Однако, некоторые пользователи могут быть обеспокоены даже такой возможностью, поэтому этот параметр поможет вам если вы хотите чтобы ASF не сохранял никаких ключей, которые позволят ему возобновить предыдущую сессию после закрытия, что приведёт к необходимости полной аутентификации при каждой попытке входа. Отключение этой функции будет работать точно так же, как если бы вы не поставили отметку в поле "Запомнить мой пароль" при входе в официальный клиент Steam. Кроме случаев, когда вы понимаете что делаете, вам стоит оставить этому параметру значение по-умолчанию `true`.

**[Вернуться к началу](#Конфигурация)**

* * *

## Файловая структура

ASF использует достаточно простую файловую структуру.

    ├── config
    │     ├── ASF.json
    │     ├── ASF.db
    │     ├── Bot1.json
    │     ├── Bot1.db
    │     ├── Bot1.bin
    │     ├── Bot2.json
    │     ├── Bot2.db
    │     ├── Bot2.bin
    │     └── ...
    ├── ArchiSteamFarm.dll
    ├── log.txt
    └── ...
    

Чтобы перенести ASF в другое место, например на другой ПК, достаточно переместить/скопировать папку `config`, и это же рекомендованный метод создания "резервных копий ASF".

Файл `log.txt` содержит журнал, созданный ASF при последнем запуске. Этот файл не содержит никакой конфиденциальной информации, и крайне полезен когда дело доходит до поиска неисправностей и причин падений, и в целом для информации о том, что происходило во время последнего запуска ASF. Мы будет часто просить у вас этот файл, если у вас возникают проблемы и ошибки. ASF управляет этим файлом автоматически, но вы можете дополнительно настроить модуль **[журналирования](https://github.com/JustArchi/ArchiSteamFarm/wiki/Logging-ru-RU)** ASF если вы продвинутый пользователь.

Папка `config` это место где хранятся настройки ASF, включая настройки для всех ботов.

`ASF.json` это файл глобальных настроек ASF. Этот конфигурационный файл используется для настройки поведения ASF как процесса, эти настройки влияют на всех ботов и на саму программу. В нём вы найдёте глобальные параметры, такие как настройка владельца ASF, авто-обновлений или режима отладки.

`BotName.json` это файл настроек конкретного бота. Этот конфигурационный файл задаёт поведение конкретного бота, поэтому эти настройки индивидуальны для каждого бота, и не распространяются на других ботов. Это позволяет вам настроить ботов с разными значениями параметров, и не обязательно чтобы все они работали одинаково.

Кроме конфигурационных файлов, ASF также хранит в папке `config` свои базы данных.

`ASF.db` это файл глобальной базы данных ASF. Она служит глобальным постоянным хранилищем, и используется для хранения различной информации, необходимой процессу ASF, такой как IP-адреса локальных адресов Steam. **Вам не следует редактировать этот файл**.

`BotName.db` это база данных конкретного бота. Этот файл используется для хранения важных данных о конкретном боте в постоянном хранилище, таких как ключ авторизации или 2ФА ASF. **Вам не следует редактировать этот файл**.

`BotName.bin` это особый файл для конкретного бота, которых хранит информацию о хеше безопасности Steam. Хеш безопасности используется для аутентификации с использованием механизма `SteamGuard`, очень похоже на файл `ssfn` в Steam. **Вам не следует редактировать этот файл**.

`BotName.keys` это особый файл, который может использоваться для импорта ключей в **[модуль фоновой активации](https://github.com/JustArchi/ArchiSteamFarm/wiki/Background-games-redeemer-ru-RU)**. Это не обязательный файл, и не создаётся, а только распознаётся ASF. Этот файл автоматически удаляется после того как ключи успешно импортированы.

`BotName.maFile` это особый файл, который может использоваться для импорта **[2ФА ASF](https://github.com/JustArchi/ArchiSteamFarm/wiki/Two-factor-authentication-ru-RU)**. Это не обязательный файл, и не создаётся, а только распознаётся ASF если ваш бот `BotName` ещё не имеет подключенного 2ФА ASF. Этот файл автоматически удаляется после того как 2ФА ASF успешно импортирован.

**[Вернуться к началу](#Конфигурация)**

* * *

## Типы параметров в JSON

Каждый конфигурационный параметр имеет свой тип. Тип параметра определяет диапазон значений, допустимых для него. Мы можете использовать только верные для данного типа значения - если значение будет неверным, ASF не сможет прочесть ваш файл конфигурации.

**Мы настоятельно рекомендуем использовать Генератор Конфигураций для создания файлов конфигурации** - он берёт на себя большую часть низкоуровневых задач (таких как проверка типов), так что вам остаётся только ввести правильные значения, и вам не придётся разбираться в типах переменных, описанных ниже. Этот раздел в основном для людей, создающих/редактирующих файлы конфигурации вручную, чтобы они знали, какие значения можно использовать.

Типы используемые в ASF это встроенные типы C#, описанные ниже:

* * *

`bool` - логический тип, принимающий только значения `true` и `false`.

Пример: `"Enabled": true`

* * *

`byte` - Тип беззнакового байта, принимающий только целые числа из диапазона от `​0​` до `255` (включительно).

Пример: `"ConnectionTimeout": 60`

* * *

`uint` - Тип беззнакового целого, принимающий только целые числа из диапазона от `​0​` до `4294967295` (включительно).

* * *

`ulong` - Тип беззнакового длинного целого, принимающий только целые числа от `​0​` до `18446744073709551615` (включительно).

Пример: `"SteamMasterClanID": 103582791440160998`

* * *

`string` - Строковый тип, принимающий любую последовательность символов, включая пустую последовательность `""` и `null`. И пустая последовательность и значение `null` обрабатываются ASF одинаково, поэтому вы можете использовать то или другое на свой выбор.

Примеры: `"SteamLogin": null`, `"SteamLogin": ""`, `"SteamLogin": "MyAccountName"`

* * *

`ImmutableHashSet<valueType>` - Immutable collection (set) of unique values in given `valueType`. В JSON задаётся как массив элементов заданного типа `valueType`.

Example for `ImmutableHashSet<uint>`: `"Blacklist": [267420, 303700, 335590]`

* * *

`ImmutableDictionary<keyType, valueType>` - Immutable dictionary (map) that maps a key specified in its `keyType`, to value specified in its `valueType`. В JSON задаётся как объект с парами ключ-значение. Помните, что в этом случае `keyType` всегда берётся в кавычки, даже если это значение таких типов как `ulong`.

Example for `ImmutableDictionary<ulong, byte>`: `"SteamUserPermissions": { "76561198174813138": 3, "76561198174813137": 1 }`

* * *

`flags` - Флаговый атрибут объединяет несколько разных значений в одно конечное значение параметра с помощью битовых операций. Это позволяет выбирать любые комбинации допустимых значений одновременно. Окончательное значение формируется как сумма значений всех выбранных опций.

Например, вам даны следующие значения:

| Имя | Имя  |
| --- | ---- |
| 0   | None |
| 1   | A    |
| 2   | B    |
| 4   | C    |

Использование комбинации `B + C` даст в результате значение `6`, использование `A + C` даст значение `5`, использование `C` даст значение `4` и так далее. Это позволяет вам создавать любые возможные комбинации допустимых значений - если вы решите объединить их все, создав `None + A + B + C`, вы получите конечное значение `7`. Обратите внимание, что флаг со значением `​0​` включён по-умолчанию во все возможные комбинации, поэтому чаще всего этот флаг не задаёт ничего важного (как например `None`).

Легко видеть, что в примере выше у нас 3 доступных флага, которые можно включить/выключить (`A`, `B`, `C`), и суммарно 8 доступных значений (`None -> 0`, `A -> 1`, `B -> 2`, `A+B -> 3`, `C -> 4`, `A+C -> 5`, `B+C -> 6`, `A+B+C -> 7`).

**[Вернуться к началу](#Конфигурация)**

* * *

## Совместимость типов

Из-за ограничений JavaScript сетевой генератор конфигураций не может правильно сериализовать поля типа `ulong`, поэтому поля типа `ulong` будут создаваться как параметры строкового типа с префиксом `s_`. Это включает, например, `"SteamOwnerID": 76561198006963719` который будет записан генератором конфигураций в виде `"s_SteamOwnerID": "76561198006963719"`. В ASF автоматически поддерживает такие строковые параметры, поэтому записи с префиксом `s_` в ваших конфигурационных являются верными. Если вы создаёте конфигурационные файлы самостоятельно, мы рекомендуем по возможности придерживаться исходных полей `ulong`, но если вы по какой-то причине не можете этого сделать, вы можете также действовать по этой схеме и кодировать их как строки добавляя к названию префикс `s_`. Мы надеемся со временем обойти это ограничение JavaScript.

**[Вернуться к началу](#Конфигурация)**

* * *

## Совместимость конфигураций

Главным приоритетом ASF является совместимость со старыми файлами конфигурации. Как вы уже должны знать, недостающие параметры обрабатываются как будто они заданы со **значением по-умолчанию**. Следовательно, если в новой версии ASF добавляется новый параметр, все ваши файлы конфигураций останутся **совместимыми** с новой версией, и ASF будет обрабатывать новый параметр так будто он задан со **значением по-умолчанию**. Вы всегда можете добавлять, удалять или изменять конфигурационные параметры в соответствии со своими нуждами. Мы рекомендуем ограничится заданием только тех параметров, значение которых вы хотите изменить, поскольку все остальные автоматически получат значения по-умолчанию, это не только сделает ваш конфигурационный файл понятнее, но также увеличит совместимость в случае если мы решим изменить значение по-умолчанию для параметра, который вы не задали сами. Вы можете посмотреть пример конфигурации созданной по такому принципу в файле `minimal.json`.

**[Вернуться к началу](#Конфигурация)**

* * *

## Автоматическая перезагрузка

Начиная с ASF V2.1.6.2+, программа отслеживает изменение файлов конфигурации "на лету" - благодаря этому, ASF автоматически:

- Создаёт (и при необходимости запускает) нового бота, если вы создали для него файл конфигурации
- Останавливает (при необходимости) и удаляет старого бота, если вы удалили его файл конфигурации
- Останавливает (и при необходимости запускает) любого бота, если вы изменили его файл конфигурации
- Перезапускает (при необходимости) бота с новым именем, если вы переименовали файл конфигурации

Всё вышеперечисленное достаточно прозрачно и будет выполняться автоматически без необходимости перезапуска программы и не влияя на ботов конфигурационные файлы которых вы не меняли.

В добавок к этому, ASF автоматически перезапустися (если это разрешено в праметре `AutoRestart`) если вы измените файл глобальной конфигурации ASF `ASF.json`. Также, программа завершится если вы удалите или переименуете его.

**[Вернуться к началу](#Конфигурация)**