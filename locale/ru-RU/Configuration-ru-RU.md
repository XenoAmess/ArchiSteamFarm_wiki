# Конфигурация

Эта статься посвящена конфигурированию ASF. Здесь содержится полная документация по содержимому папки `config`, прозволяющая настроить ASF под ваши нужды.

- **[Введение](#Введение)**
- **[Сетевой генератор конфигураций](#Сетевой-генератор-конфигураций)**
- **[Ручная настройка](#Ручная-настройка)**
- **[Файл глобальной конфигурации](#Файл-глобальной-конфигурации)**
- **[Конфигурация бота](#Конфигурация-бота)**
- **[Файловая структура](#Файловая-структура)**
- **[Типы параметров в JSON](#Типы-параметров-в-json)**
- **[Совместимость типов](#Совместимость-типов)**
- **[Совместимость конфигураций](#Совместимость-конфигураций)**
- **[Автоматическая перезагрузка](#Автоматическая-перезагрузка)**

* * *

## Введение

Конфигурация ASF разделена на две основные части - глобальная конфигурация (для всего процесса), и конфигурация каждого бота. У каждого бота есть собственный файл конфигурации бота с именем `BotName.json` (где `BotName` это имя, которое вы дали боту), а для конфигурации процесса ASF используется один файл с именем `ASF.json`.

Бот - это один аккаунт Steam используемый ASF. Для нормальной работы ASF требует чтобы был определён хотя бы **один** бот. Жёсткого ограничения на количество ботов нет, поэтому вы можете использовать столько ботов (аккаунтов Steam) сколько захотите.

ASF использует формат **[JSON](https://ru.wikipedia.org/wiki/JSON)** для сохранения настроек в файлах конфигурации. Это дружественный к пользователю, читаемый и довольно универсальный формат, в котором вы можете конфигурировать программу. Но не волнуйтесь, вам не обязательно знать JSON чтобы настроить ASF. Я упомянул это просто на случай если вы захотите массово создавать конфигурации ASF каким-нибудь скриптом.

Configuration can be done either manually - by creating proper JSON configs, or by using our **[web-based ConfigGenerator](https://justarchinet.github.io/ASF-WebConfigGenerator)**, which should be much easier and convenient. Если вы не продвинутый пользователь, я рекомендую вам использовать генератор конфигураций, описание которого приведено ниже.

**[Вернуться к началу](#Конфигурация)**

* * *

## Сетевой генератор конфигураций

Цель сетевого генератора конфигураций - предоставить вам удобный интерфейс для создания конфигурационных файлов ASF. Сетевой генератор конфигураций работает на 100% на стороне клиента, это значит что никакие данные, которые вы в нём вводите, никуда не пересылаются, и обрабатываются только на вашей машине. This guarantees security and reliability, as it can even work **[offline](https://github.com/JustArchiNET/ASF-WebConfigGenerator/tree/master/docs)** if you'd like to download all the files and run `index.html` in your favourite browser.

Сетевой генератор конфигураций проверен в Chrome и Firefox, но он должен работать во всех популярных браузерах с включенным javascript.

Пользоваться им очень просто - выбираете, хотите ли вы создать файл конфигурации `ASF` или `Бот` выбрав соответствующую закладку, проверяете что выбранная в генераторе версия соответствует вашей версии ASF, вводите все необходимые поля и нажимаете кнопку "Скачать". Скачанный файл кладёте в папку `config` вашего ASF, при необходимости перезаписывая существующий. Повторяете всю процедуру в случае будущих модификаций, и используете остаток этой статьи для объяснения всех доступных параметров конфигурации.

**[Вернуться к началу](#Конфигурация)**

* * *

## Ручная настройка

Я настоятельно рекомендую использовать сетевой генератор конфигураций, но если по какой-то причине вы не хотите - вы можете создавать конфигурационные файлы сами. Ознакомьтесь с файлом `example.json` в качестве примера правильной структуры, вы можете скопировать этот файл и использовать как базу для вашего нового бота. Поскольку вы не пользуетесь программой, убедитесь что ваш файл **[валидный с точки зрения JSON](https://jsonlint.com)**, поскольку ASF не сможет его загрузить если его не удаётся разобрать. Чтобы узнать правильную структуру JSON для всех полей, ознакомьтесь с разделом "**[Типы параметров в JSON](#Типы-параметров-в-json)**" и приведенной ниже документацией.

**[Вернуться к началу](#Конфигурация)**

* * *

## Файл глобальной конфигурации

Файл глобальной конфигурации называется `ASF.json` и имеет следующую структуру:

```json
{
    "AutoRestart": true,
    "Blacklist": [],
    "CommandPrefix": "!",
    "ConfirmationsLimiterDelay": 10,
    "ConnectionTimeout": 60,
    "CurrentCulture": null,
    "Debug": false,
    "FarmingDelay": 15,
    "GiftsLimiterDelay": 1,
    "Headless": false,
    "IdleFarmingPeriod": 8,
    "InventoryLimiterDelay": 3,
    "IPC": false,
    "IPCPassword": null,
    "LoginLimiterDelay": 10,
    "MaxFarmingTime": 10,
    "MaxTradeHoldDuration": 15,
    "OptimizationMode": 0,
    "Statistics": true,
    "SteamMessagePrefix": "/me ",
    "SteamOwnerID": 0,
    "SteamProtocols": 5,
    "UpdateChannel": 1,
    "UpdatePeriod": 24,
    "WebLimiterDelay": 200,
    "WebProxy": null,
    "WebProxyPassword": null,
    "WebProxyUsername": null
}
```

**Совет:** Если вы не собираетесь менять этих настроек, вы можете просто оставить всё по-умолчанию, а значит вы можете закрыть `ASF.json` и перейти к конфигурированию бота.

* * *

Все параметры описаны ниже:

`AutoRestart` - параметр типа `bool` со значением по-умолчанию `true`. Этот параметр определяет, разрешено ли ASF перезапускаться при необходимости. Существуют события, которые могут потребовать перезапуска ASF, такие как обновление (раз в `UpdatePeriod` или по команде `update`), редактирование файла `ASF.json`, команда `restart` и тому подобное. Перезапуск обычно включает в себя две части - создание нового процесса и завершение текущего. Для большинства пользователей подойдёт оставить этому параметро значение по-умолчанию `true`, однако если вы запускаете ASF через собственный скрипт и/или `dotnet`, возможно вы захотите иметь полный контроль над запуском процесса, и избежать ситуации когда новый (перезапущеный) процесс ASF работает где-то в фоне, а не в основном процессе скрипта, который завершится вместе со старым процессом ASF. Особенно важно то, что новый процесс не будет прямым потомком вашего скрипта, из-за чего вы не сможете например использовать его стандартный поток вывода.

В этом случае вам поможет этот параметр, вы можете установить его в `false`. Однако помните, что в этом случае **вы** несёте ответственность за перезапуск процесса. Это особенно важно поскольку в этом случае ASF просто выйдет вместо создания нового процесса (например, после обновления), поэтому если вы не добавили свою логику для этого случая он просто перестанет работать пока вы его не запустите снова. ASF всегда выходит с правильным кодом выхода, указывающим на удачу (ноль) или неудачу (не ноль), поэтому вы можете добавить правильную логику в своём скрипте чтобы избежать перезапуска ASF в случае отказа, или как минимум создавать резервную копию `log.txt` для дальнейшего анализа. Также помните, что команда `restart` выполнит перезапуск ASF независимо от значения этого параметра, поскольку этот параметр задаёт поведение по-умолчанию, а команда `restart` производит принудительный перезапуск процесса. Если у вас нет причин отключать эту функцию, рекомендуется оставить её включенной.

* * *

`Blacklist` - параметр типа `ImmutableHashSet<uint>` с пустым значением по-умолчанию. Как подсказывает название, этот глобальный параметр определяет какие appID (игры) будут полностью игнорироваться в автоматическом режиме фарма ASF. К сожалению Steam любит отмечать значки летней/зимней распрожажи как "доступные для выпадения карточек", из-за чего ASF пытается их фармить как будто это настоящая игра. Если бы не было черного списка, ASF просто "зависал" бы пытаясь фармить эти игры, которые на самом деле не игры, и бесконечно бы ждал пока из них выпадут карточки, чего никогда не произойдёт. Черный список ASF позволяет отметить эти значки как недоступные для фарма, что позволяет просто тихо игнорировать их при определении следующей игры для фарма, и избегать таких ловушек.

По умолчанию ASF включает в себя два черных списка - `GlobalBlacklist`, который жёстко записан в ASF при программировании, и обычный `Blacklist`, который здесь описан. `GlobalBlacklist` обновляется вместе с ASF и обычно включает в себя все "плохие" appID на момент релиза, поэтому если вы пользуетесь последней версией вам не нужно беспокоиться о поддержании своего `Blacklist`, описанного здесь. Основная цель этого параметра - позволить вам заносить в черный список новые, не известные на момент релиза ASF appID, которые не следует фармить. Записанный в код `GlobalBlacklist` обновляется как можно быстрее, поэтому нет необходимости обновлять `Blacklist` если вы пользуетесь последней версие ASF, но без этого параметра вы были бы вынуждены обновлять ASF чтобы поддерживать его "работоспособным" когда Valve выпускает новый значок распродажи - а я не хочу заставлять вас пользоваться последней версие ASF, и поэтому этот параметр позволяет вам "исправить" ASF самостоятельно, если по какой-то причине вы не хотите или не можете обновить `GlobalBlacklist` вместе с новым релизом, но хотите чтобы ASF продолжил работать. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

If you're looking for bot-based blacklist instead, take a look at `ib`, `ibadd` and `ibrm` **[commands](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Commands)**.

* * *

`CommandPrefix` - параметр типа `string` со значением по-умолчанию `!`. This property specifies **case-sensitive** prefix used for ASF **[commands](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Commands)**. Другими словами, это то, с чего должна начинаться каждая команда ASF чтобы ASF вас послушался. Этому параметру можно присвоить значение `null` или пустую строку, чтобы заставить ASF не использовать префикс, в этом случае команды вводятся просто своими идентификаторами. Однако, это может привести к снижению производительности ASF, поскольку ASF оптимизирован пропускать команды, если они не начинаются с `CommandPrefix` - если вы намеренно решите не пользоваться им, ASF будет вынужден читать все сообщения и отвечать на них, даже если это не команды. Поэтому рекомендуется использовать какой-нибудь `CommandPrefix`, как например `/`, если вам не нравится значение по-умолчанию `!`. Для единообразия, `CommandPrefix` влияет на весь процесс ASF. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`ConfirmationsLimiterDelay` - параметр типа `byte` со значением по-умолчанию `10`. ASF will ensure that there will be at least `ConfirmationsLimiterDelay` seconds in between of two consecutive 2FA confirmations fetching requests to avoid triggering rate-limit - those are being used by **[ASF 2FA](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Two-factor-authentication)** during e.g. `2faok` command, as well as on as-needed basis when performing various trading-related operations. Default value was set based on our tests and should not be lowered if you don't want to run into issues. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`ConnectionTimeout` - параметр типа `byte` со значением по-умолчанию `60`. Этот параметр определяет таймауты для различных сетевых действий, производимых ASF, в секундах. В частности, `ConnectionTimeout` определяет таймаут в секундах для HTTP и IPC запросов, `ConnectionTimeout / 10` определяет максимальное число пропущенных тактов сторожевого таймера, а `ConnectionTimeout / 30` определяет время в минутах, которое мы выделяем на начальный запрос подключения к сети Steam. Значение по умолчанию `60` должно подходить большинству пользователей, однако, если у вас очень медленное сетевое подключение или ПК, возможно вы захотите увеличить это значение (например до `90`). Имейте в виду, что большие значения не починят волшебным образом медленные или недоступные сервера Steam, поэтому нет смысла бесконечно ждать чего-то, что никогда не случится, и проще попробовать заново позже. Установка этому параметру слишком большого значения приведёт к излишним задержка обнаружения проблем с сетью, а также приведёт к общему падению производительности. Установка этому параметру слишком маленького значения также уменьшит общую стабильность и производительность, поскольку ASF будет прерывать нормальные запросы, которые ещё обрабатываются. Поэтому устанавливать этому параметру значение меньше значения по-умолчанию в целом не даёт преимуществ, поскольку сервера Steam время от времени работают медленно, и поэтому требуют больше времени для обработки запросов ASF. Значение по-умолчанию - это попытка уравновесить предположение о стабильности сетевого подключения и сомнения в способности сети Steam обработать запрос за отведенное время. Если вы хотите обнаруживать проблемы с сетью как можно раньше и позволить ASF переподключаться/реагировать как можно быстрее, значение по умолчанию вам подойдёт (можно сделать его немножко ниже, чтобы ASF стал менее терпеливым). Если же вы замечаете, что у ASF часто происходят проблемы с сетью, такие как ошибки обменов, потери тактов сторожевого таймера, или разрывы связи со Steam, возможно имеет смысл увеличить это значение если вы уверены что это связано с самим Steam, а **не** с вашей сетью, поскольку увеличение таймаутов делает ASF более "терпеливым" и не пытаться сразу же переподключаться. Возможно также имеет смысл увеличить это значение если у вас довольно медленный интернет, который требует больше времени для передачи данных. Вкратце, значение по-умолчанию подходит для большинства случаев, но вы можете захотеть увеличить его при необходимости. Но значительно увеличивать относительно значения по-умолчанию также не имеет много смысла, поскольку большие таймауты не починят волшебным образом недоступные сервера Steam. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`CurrentCulture` - параметр типа `string` со значением по-умолчанию `null`. По-умолчанию ASF пытается использовать язык вашей операционной системы, и использовать переведенные на этот язык строки, если они доступны. This is possible thanks to our community that tries to **[localize](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Localization)** ASF in all most popular languages. Если по какой-то причине вы не хотите использовать язык вашей ОС, вы можете использовать этот параметр чтобы выбрать любой существующий язык, который бы вы хотели использовать. Полный список языков вы можете найти в **[MSDN](https://msdn.microsoft.com/en-us/library/cc233982.aspx)** в колонке `Language tag`. Рады сообщить, что ASF воспринимает как точные указания на языки, как например `en-GB`, так и нейтральные, такие как `en`. Указание языка может также влиять на другие региональные настройки, такие как формат валюты, даты и тому подобное. Обратите внимание, что вам могут понадобиться дополнительные шрифты/языковые пакеты для правильного отображения символов некоторых языков, если вы выбрали язык отличный от языка вашей системы. Обычно вам может понадобиться этот параметр если вы хотите пользоваться ASF на английском языке вместо своего родного.

* * *

`Debug` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, должен ли ASF работать в режиме отладки. В режиме отладки, ASF использует специальную папку `debug` рядом с папкой `config`, в которой сохраняются все обмены между ASF и серверами Steam. Отладочная информация может помочь обнаруживать сложные проблемы, связанные с сетью и общей работой ASF. В дополнение к этому, некоторые подпрограммы будут выводить гораздо больше информации, так например `WebBrowser` будет указывать конкретную причину, почему запросы завершаются неудачно - такая информация записывается в обычный журнал ASF. **Вам не следует использовать ASF в режиме отладки, если вас об этом не попросил разработчик**. Работа в отладочном режиме **уменьшает производительность**, **отрицательно влияет на стабильность** и **выводит гораздо больше информации в разных местах**, поэтому этот режим должен использоваться **исключительно** намеренно, кратковременно, для отладки конкретной проблемы, воспроизведения проблемы или получения дополнительной информации и сбое обмена, и тому подобное, но **не** для нормальной работы программы. Вы увидите **огромное количество** новых ошибок, проблем, и исключений - подумайте, обладаете ли вы достаточными знаниями об ASF, Steam и его глюках прежде чем вы решите анализировать эти данные самостоятельно, поскольку часть этих сообщений может не соответствовать истине.

**ПРЕДУПРЕЖДЕНИЕ:** активация этого режима включает журналирование **потенциально конфиденциальной** информации, такой как логины и пароли, используемые для входа в Steam (из-за журналирования сетевых запросов). Эти данные записываются как в папку `debug`, так и в обычный `log.txt` (который в этом режиме будет гораздо более подробным). Вам не следует выкладывать отладочную информацию, сгенерированную ASF, в публичных местах, разработчики ASF всегда будут просить передать её на e-mail, или выложить в другое безопасное место. Мы не сохраняем и не используем эти персональные данные, они записываются как часть процедуры отладки, поскольку их присутствие может быть связано с имеющейся у вас проблемой. Мы бы предпочли чтобы вы не изменяли журнал ASF, но если вы беспокоитесь, вы можете соответственно отредактировать свои персональные данные.

> Редактирование включает в себя замену персональных данных, например на звездочки. Вам стоит избегать полного удаления строк, содержащих персональные данные, поскольку само их наличие может быть важным, и поэтому их надо сохранить.

* * *

`FarmingDelay` - параметр типа `byte` со значением по-умолчанию `15`. Для работы ASF требуется периодически проверять каждые `FarmingDelay` минут, не выпали ли уже все карточки из текущей игры. Слишком маленькое значение в этом параметру приведёт к избыточному количеству запросов к steam, а слишком большое может привести к тому что ASF будет "фармить игру на `FarmingDelay` дольше чем требуется. Значение по-умолчанию должно прекрасно подойти большинству пользователей, однако если у вас много ботов вы можете захотеть увеличить это значение до чего-то вроде `30` минут чтобы ограничить количество запросов к сети Steam. К счастью, ASF использует механизм обработки событий и проверяет страницу значков в Steam каждый раз когда появляется уведомление о новых предметов, поэтому в общем случае **нам вообще не нужно проверять это через фиксированные промежутки времени**, но поскольку мы не полностью доверяем сети Steam - мы всё же проверяем страницу со значками, чтобы убедиться за за последние `FarmingDelay` минут не выпало карточек (на случай если Steam не пришлёт уведомление о новый предметах, или что-то подобное). Если предположить что сесть Steam работает правильно, уменьшение этого значения **никак не повлияет на эффективность фарма**, но **существенно увеличит нагрузку на сеть** - поэтому рекомендуется только увеличивать его (при необходимости) относительно значения по-умолчанию в `15` минут. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`GiftsLimiterDelay` - параметр типа `byte` со значением по-умолчанию `1`. ASF will ensure that there will be at least `GiftsLimiterDelay` seconds in between of two consecutive gift/key/license handling (redeeming) requests to avoid triggering rate-limit. In addition to that it'll also be used as global limiter for game list requests, such as the one issued by `owns` **[command](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Commands)**. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`Headless` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, должен ли ASF работать в безынтерфейсном режиме. В безынтерфейсном режиме предполагается что ASF запущен на сервере или в другой не-интерактивной среде, и поэтому запросы на чтение данных из консоли (таких как коды аутентификации, коды SteamGuard, пароли и тому подобное) не будут выдаваться. Это аналогично переводу консоли ASF в режим "только для чтения". Безынтерфейсный режим полезен в основном для пользователей, запускающих ASF на серверах, поскольку вместо запроса на, например, код аутентификации, ASF будет просто прерывать операцию и останавливать "проблемный" аккаунт. Если вы не пользуетесь ASF на сервере, и не убедились что ASF сможет работать без ввода дополнительных данных, вам стоит оставить этот параметр выключенным. В безынтерфейсном режиме не будет работать никакое взаимодействие с пользователем, и бот просто не запустится если для его работы нужен **любой** ввод значений. Это полезно на серверах, чтобы ASF просто прекращал попытки входа в аккаунт если для этого нужны дополнительные данные, а не ждал (бесконечно) пока пользователь их введёт. Enabling this mode will also allow you to use `input` **[command](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Commands)** which acts as a replacement for standard console input. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `false`.

If you're running ASF on the server, you might want to use this option together with `--process-required` **[command-line argument](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Command-line-arguments)**.

* * *

`IdleFarmingPeriod` - параметр типа `byte` со значением по-умолчанию `8`. Когда ASF нечего фармить, он будет проверять каждые `IdleFarmingPeriod` часов, не появилось ли на аккаунте новых игр для фарма. Эта функция не нужна когда мы говорим о добавлении новых игр на аккаунт, поскольку алгоритм ASF достаточно умен чтобы автоматически проверять в этом случае страницу со значками. `IdleFarmingPeriod` в основном для тех случаев, когда в старую игру, которае есть у нас на аккаунте, добавили коллекционные карточки. В этом случае нет никакого события, поэтому ASF приходится периодически проверять страницу со значками чтобы предусмотреть такой вариант. Значение `0` выключает эту функцию. Смотрите также: `ShutdownOnFarmingFinished`.

* * *

`InventoryLimiterDelay` - параметр типа `byte` со значением по-умолчанию `3`. ASF will ensure that there will be at least `InventoryLimiterDelay` seconds in between of two consecutive inventory requests to avoid triggering rate-limit - those are being used for fetching your own inventory (and only for that). Default value of `3` was set based on looting over 100 bot instances, and should satisfy most (if not all) of the users. You may however want to decrease it, or even change to `0` if you have very low amount of bots, so ASF will ignore the delay and loot steam inventories much faster. Be warned though, as setting it too low **will** result in Steam temporarily banning your IP, and that will prevent you from fetching your inventory at all. You also might need to increase this value if you're running a lot of bots with a lot of inventory requests, although in this case you should probably try to limit number of those requests instead. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`IPC` - параметр типа `bool` со значением по-умолчанию `false`. This property defines if ASF's **[IPC](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/IPC)** server should start together with the process. IPC обеспечивает межпроцессное взаимодействие запуская локальный HTTP сервер. Если вы не собираетесь использовать IPC сервер ASF, нет смысла включать этот параметр.

* * *

`IPCPassword` - параметр типа `string` со значением по-умолчанию `null`. Этот параметр задаёт обязательный пароль для любого запроса через IPC и служит дополнительной мерой безопасности. Когда этому параметру присвоено не пустое значение, все IPC запросы будут требовать дополнительный параметр `password` со значением заданным тут. Значение по-умолчанию `null` снимает необходимость в пароле, позволяя ASF обрабатывать все запросы. В дополнение к этому, включение этого параметра также включает встроенный в IPC механизм предотвращения перебора, который будет временно банить любой `IP` -адрес посылающий слишком много неавторизованных запросов за короткий интервал времени. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`LoginLimiterDelay` - параметр типа `byte` со значением по-умолчанию `10`. ASF will ensure that there will be at least `LoginLimiterDelay` seconds in between of two consecutive connection attempts to avoid triggering rate-limit. Default value of `10` was set based on connecting over 100 bot instances, and should satisfy most (if not all) of the users. You may however want to increase/decrease it, or even change to `0` if you have very low amount of bots, so ASF will ignore the delay and connect to Steam much faster. Be warned though, as setting it too low while having too many bots **will** result in Steam temporarily banning your IP, and that will prevent you from logging in **at all**, with `InvalidPassword/RateLimitExceeded` error - and that also includes your normal Steam client, not only ASF. Likewise, if you're running excessive number of bots, especially together with other Steam clients/tools using the same IP address, most likely you'll need to increase this value in order to spread logins across longer period of time.

Дополнительно, этот параметр также используется как буфер балансировки нагрузки всех запланированных действий ASF, таких как обмены по `SendTradePeriod`. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`MaxFarmingTime` - параметр типа `byte` со значением по-умолчанию `10`. Как вы должно быть знаете, Steam не всегда работает идеально, иногда происходят странные ситуации, как например Steam иногда не учитывает время в игре, хотя вы играете. ASF будет фармить одну игру в соло-режиме максимум `MaxFarmingTime` часов, и будет считать что фарм завершен по окончанию этого периода. Это необходимо не только чтобы процесс фарма не "зависал" в случае каких-то странных ситуаций, но и на случай если Steam выпускает новый значок, который не даёт ASF продолжить работу (см. `Blacklist`). Значение по-умолчанию в `10` часов должно быть достаточно для выпадения карточек из одной игры. Установка слишком маленького значения может привести к тому что обычные игры будут пропускаться (и да, известны случаи когда выпадение карт в игре занимает 9 часов), а слишком высокое значение может привести к "зависанию" процесса. Обратите внимание, что этот параметр влияет только на одну игру в одном сеансе фарма (поэтому после того пройдёт вся очередь ASF снова вернётся к той же игре), а также на то, что это не общее время в игре, а время фарма в ASF. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`MaxTradeHoldDuration` - параметр типа `byte` со значением по-умолчанию `15`. Этот параметр определяет максимальную длительность задержки обмена в днях, при которой мы согласны его принять - ASF будет отклонять обмены с задержкой более `MaxTradeHoldDuration` дней. Этот параметр влияет только на ботов у которых `TradingPreferences` имеет значение `SteamTradeMatcher`, и не затрагивает ни обменов с `Master`/`SteamOwnerID` ни пожертвований. Удержания обменов не нравятся никому, и никто не хочет иметь с ними дела. ASF предполагает работу по либеральным правилам и помощь каждому, независимо от удержания обмена - поэтому по-умолчанию значение этого параметра `15`. Однако, если вы предпочитаете отклонять все обмены с удержанием, вы можете указать здесь `0`. Please consider the fact that cards with short lifespan are not affected by this option and automatically rejected for people with trade holds, as described in **[trading](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Trading)** section, so there is no need to globally reject everybody only because of that. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`OptimizationMode` - параметр типа `byte` со значением по-умолчанию `0`. Этот параметр определяет режим оптимизации, который ASF будет использовать при работе. На данный момент ASF поддерживает два режима - `0`, который называется `MaxPerformance`(Максимальная производительность), и `1` который называется `MinMemoryUsage`(Минимальное потребление памяти). По умолчанию ASF предпочитает как можно больше вещей делать параллельно (одновременно), что увеличивает производительность распределяя нагрузку на всех ядрах ЦПУ, нескольких потоках ЦПУ, нескольких сокетах и нескольких очередях задач. Например, ASF запросит первую страницу значков чтобы узнать какие игры фармить, и после завершения этого запроса прочитает сколько страниц со значками у вас есть, и запросит их все одновременно. Это то что вам нужно **почти всегда**, поскольку избыточность минимальна, а выгода от использования асинхронного кода ASF может быть заметна даже на очень старом железе с одноядерным CPU и ограниченной производительностью. Однако, когда много задач выполняется параллельно, ASF отвечает за их поддержку, как например поддержку открытых сокетов, запущенных потоков и обрабатываемых задач, что иногда может привести к увеличению использования памяти, и если вы очень ограничены доступной памятью, возможно вы захотите переключить значение этого параметра в `1` (`MinMemoryUsage`), что приведёт к тому что ASF будет последовательно выполнять код, который мог бы быть распараллелен. You should consider switching this property only if you previously read **[low-memory setup](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Low-memory-setup)** and you intentionally want to sacrifice gigantic performance boost, for a very small memory overhead decrease. Usually this option is **much worse** than what you can achieve with other possible ways, such as by limiting your ASF usage or tuning runtime's garbage collector, as explained in **[low-memory setup](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Low-memory-setup)**. Поэтому вам стоит использовать `MinMemoryUsage` только как **крайнюю меру**, перед перекомпиляцией исполняемых файлов, если вы не смогли достичь удовлетворительных результатов другими (гораздо лучшими) способами. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`Statistics` - параметр типа `bool` со значением по-умолчанию `true`. Этот параметр определяет, будет ли в ASF включена статистика. Detailed explanation what exactly this option does is available in **[statistics](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Statistics)** section. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`SteamMessagePrefix` - параметр типа `string` со значением по-умолчанию `"/me "`. Этот параметр задаёт префикс, который будет добавляться в начало всех сообщений в Steam, отсылаемых ASF. По умолчанию ASF использует префикс `"/me "` чтобы сообщения от бота можно было легко отличить по другому цвету в чате Steam. Другой достойный упоминания префикс - `"/pre "`, который даёт похожий результат но использует другой вид форматирования. Вы также можете сделать этот параметр равным пустой строке или `null` чтобы полностью отключить использование префиксов и отправлять все сообщения ASF в обычном виде. Приятно отметить, что этот параметр влияет только на сообщения в Steam - ответы полученные через другие каналы (такие как IPC) не меняются. Кроме случая, когда вы хотите изменить стандартное поведение ASF, хорошей идеей будет оставить этому параметру значение по-умолчанию.

* * *

`SteamOwnerID` - параметр типа `ulong` со значением по-умолчанию `0`. Этот параметр задаёт 64-битный SteamID владельца процеса ASF, и очень похож на права доступа `Master` в настройках конкретного бота (но работающий глобально). Почти всегда вам нужно задать в этом параметре ID вашего основного аккаунта Steam. Права доступа `Master` даёт полный контроль над конкретным ботом, но глобальные команды, такие как `exit`, `restart` или `update` доступны только для `SteamOwnerID`. Это удобно если вы захотите запускать у себя ботов ваших друзей, не давая им при этом контроля над процессом ASF, например не позволяя завершить его командой `exit`. Значение по-умолчанию `0` указывает что у процесса ASF нет владельца, то есть никто не сможет использовать глобальные команды. Keep in mind that **[IPC](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/IPC)** works with `SteamOwnerID`, so if you want to use it you must provide a valid value here.

* * *

`SteamProtocols` - параметр типа `byte flags` со значением по-умолчанию `5`. Этот параметр определяет протоколы по которым ASF будет соединяться с серверами Steam, которые задаются следующим образом:

| Значение | Имя       | Описание                                                                                         |
| -------- | --------- | ------------------------------------------------------------------------------------------------ |
| 0        | None      | Отсутствие протокола                                                                             |
| 1        | TCP       | **[Transmission Control Protocol](https://ru.wikipedia.org/wiki/Transmission_Control_Protocol)** |
| 2        | UDP       | **[User Datagram Protocol](https://ru.wikipedia.org/wiki/UDP)**                                  |
| 4        | WebSocket | **[WebSocket](https://ru.wikipedia.org/wiki/WebSocket)**                                         |

Обратите внимание что это параметр типа `flags`, и следовательно ему может быть присвоена любая комбинация приведенных выше значений. Ознакомьтесь с описанием типа `flags` в разделе "**[Типы параметров в JSON](#Типы-параметров-в-json)**" если хотите узнать больше. Если вы не включите ни один флаг, результатом будет вариант `None`, который сам по себе не является верным.

По-умолчанию ASF использует все доступные протоколы в качестве меры борьбы с простоями и другими проблемами Steam. Возможно вы захотите изменить этот параметр если вы хотите ограничить ASF использованием только одного или двух определённых протоколов вместо всех доступных. Такие меры могут понадобиться например если у вас есть брандмауэр на котором разрешён только TCP-трафик и вы не хотите чтобы ASF пытался подключиться по UDP. Однако, если вы не пытаетесь отладить какую-то конкретную проблему, почти всегда будет лучше дать ASF возможность выбрать любой из доступных протоколов, а не только один или два. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

Right now, default settings do not include UDP protocol due to issue **[#882](https://github.com/JustArchiNET/ArchiSteamFarm/issues/882)**.

* * *

`UpdateChannel` - параметр типа `byte` со значением по-умолчанию `1`. Этот параметр задаёт используемый канал обновлений, который будет использоваться либо для авто-обновлений (если `UpdatePeriod` больше `0`), либо для оповещения о доступных обновлениях (в противном случае). На данный момент в ASF поддерживается три канала обновлений - `0` под названием `None`, `1`, под названием `Stable`, и `2`, под названием `Experimental`. Канал `Stable` это канал обновлений по-умолчанию, который должен использоваться большинством пользователей. Канал `Experimental` в дополнение к версиям канала `Stable` также версии **pre-releases**, предназначенные для продвинутых пользователей и других разработчиков с целью тестирования новых функций, подтверждения исправления ошибок и сбора обратной связи о планируемых улучшениях. **Экспериментальные версии часто включают в себя неисправленные ошибки, недоделанные функции и переписанные реализации**. Если вы не считаете себя продвинутым пользователем, пожалуйста, оставайтесь на канале обновлений по-умолчанию `1` (Stable). Канал `Experimental` предназначен для пользователей, которые знают, как сообщать об ошибках, как работать с проблемами и предоставлять обратную связь - техподдержка для этих версий программы осуществляться не будет. Check out ASF **[release cycle](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Release-cycle)** if you'd like to learn more. Вы также можете установить параметру `UpdateChannel` значение `0` (`None`) если вы хотите полностью отключить проверку наличия новых версий. Установка параметра `UpdateChannel` в `0` полностью отключит все функции связанные с обновлениями, в том числе командой `update`. Использование канала `None` **крайне не рекомендуется**, поскольку в этом случае вы подвергнете себя разнообразным проблемам (упомянутым в описании параметра `UpdatePeriod` ниже).

**Настойчиво** рекомендуем оставить этому параметру значение по-умолчанию, кроме случая когда **вы точно знаете что делаете**.

* * *

`UpdatePeriod` - параметр типа `byte` со значением по-умолчанию `24`. Этот параметр определяет, как часто ASF будет проверять наличие обновлений. Обновления важны не только для получения новых возможностей и патчей критических уязвимостей, но и для получения исправлений ошибок, улучшения производительности, стабильности и так далее. Если этому параметру присвоено значение больше `0`, ASF будет автоматически скачивать, заменять и перезапускать себя (если это разрешено в `AutoRestart`) при наличии обновлений. Для этого ASF будет проверять каждые `UpdatePeriod` часов, нет ли обновлений в нашем репозитории GitHub. Значение `0` выключает автоматические обновления, но позволяет вам запускать команду `update` вручную. Возможно вам также будет интересен параметр `UpdateChannel`, которому должен следовать `UpdatePeriod`.

Процесс обновления ASF включает в себя всю структуру каталогов, используемую ASF, за исключением конфигурационных файлов и баз данных в папке `config` - это значит что любые дополнительные файлы, не связанные с ASF, в этих каталогах будут удалены в процессе обновления. Значение по-умолчанию `24` это баланс между излишним количеством проверок и достаточно свежим ASF.

Если у вас нет **веских** причин отключать эту функцию, вам следует оставить авто-обновления включенными с разумной величиной `UpdatePeriod`, **для вашего же блага**. Не только потому, что мы предоставляем техническую поддержку только для последней стабильной версии ASF, но и потому что **мы даём гарантии безопасности только для последней версии**. If you're using outdated ASF version then you're intentionally exposing yourself to all kind of issues, from small bugs, through broken functionality, ending with **[permanent Steam account suspensions](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/FAQ#did-somebody-get-banned-for-it)**, so we **strongly recommend**, for your own good, to always ensure that your ASF version is up to date. Автоматические обновления позволяют нам быстро реагировать на любые проблемы, и исправлять проблемы в коде пока они не привели к непредвиденным последствиям, и если вы от них отказываетесь - вы теряете все гарантии безопасности в случае если исполняемый код окажется потенциально опасным, не только для сети Steam, но и (по определению) для вашего аккаунта Steam.

* * *

`WebLimiterDelay` - параметр типа `ushort` со значением по-умолчанию `200`. Этот параметр задаёт минимальную задержку (в миллисекундах), которая должна пройти между двумя последовательными запросами к одному web-сервису Steam. Такие задержки необходимы из-за того, что сервис **[AkamaiGhost](https://www.akamai.com)**, который используется Steam, включает в себя ограничение частоты глобального числа запросов за единицу времени. При обычных условиях довольно сложно получить блокировку akamai, но при высоких нагрузках с большими очередями запросов вполне возможно её срабатывание если мы продолжим слать большое количество запросов за короткий интервал времени.

Значение по-умолчанию установлено исходя из предположения что ASF - единственный инструмент, использующий web-сервисы Steam, в частности `steamcommunity.com`, `api.steampowered.com` и `store.steampowered.com`. Если вы пользуетесь другими утилитами, посылающим запросы к тому же web-сервису вам стоит убедиться, что этот инструмент имеет функционал, схожий с `WebLimiterDelay`, и установить и в этом инструменте и в ASF имеют величину задержки, равную `400`. Это гарантирует вам что ни при каких обстоятельствах вы не пошлёте больше 1 запроса за 200 мс.

В общем случае, уменьшение `WebLimiterDelay` ниже значения по-умолчанию **крайне не рекомендуется**, поскольку это может привести к различным блокировкам по IP, некоторые из которых могут оказаться перманентными. Значение по-умолчанию должно хорошо подойдти для одной копии ASF на сервере, а также при использовании ASF параллельно с обычным клиентом Steam. Оно должно подойти большинство пользователей, и есть смысл только в его увеличении (и никогда - в уменьшении), если кроме ASF вы используете какой-то инструмент посылающий большое количество запросов к web-сервисам которые используются в ASF. Короче говоря, глобальное число всех запросов с одного IP на один домен Steam никогда не должно превышать 1 запрос в 200 мс.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`WebProxy` - параметр типа `string` со значением по-умолчанию `null`. Этот параметр задаёт адрес прокси-сервера который будет использоваться для всех внутренних http и https запросов от `HttpClient` ASF, особенно к сервисам таким как `github.com`, `steamcommunity.com` и `store.steampowered.com`. Проксирование запросов ASF в общем случае не имеет достоинств, однако очень полезно для обхода различных брандмауэров, в частности "Великого китайского файрвола".

Этот параметр задаётся как строка uri:

> Строка URI состоит из схемы (http или https), имени хоста, и необязательного порта. Пример полной строки uri: `"http://contoso.com:8080"`.

Если ваш прокси требует авторизации, возможно вам также понадобиться настроить `WebProxyUsername` и/или `WebProxyPassword`. Если такой необходимости нет, будет достаточно только этого параметра.

На данный момент ASF использует прокси только для `http` и `https` запросов, что **не** включает в себя внутреннее взаимодействие с сетью Steam клиента ASF. Сейчас нет планов для обеспечения такой поддержки, в основном из-за отсутствия такого функционала в **[SK2](https://github.com/SteamRE/SteamKit)**. Если вы хотите чтобы это случилось - начинать надо там.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`WebProxyPassword` - параметр типа `string` со значением по-умолчанию `null`. Этот параметр задаёт пароль, используемый в базовой, дайджест, NTLM и Kerberos авторизации, которая поддерживается заданным в `WebProxy` прокси-сервером. Если ваш прокси не требует учётных данных пользователя, нет необходимости что-то вводить в этом параметре. Использование этого параметра имеет смысл только если задан `WebProxy`, и не имеет никакого эффекта в противном случае.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`WebProxyUsername` - параметр типа `string` со значением по-умолчанию `null`. Этот параметр задаёт имя пользователя, используемое в базовой, дайджест, NTLM и Kerberos авторизации, которая поддерживается заданным в `WebProxy` прокси-сервером. Если ваш прокси не требует учётных данных пользователя, нет необходимости что-то вводить в этом параметре. Использование этого параметра имеет смысл только если задан `WebProxy`, и не имеет никакого эффекта в противном случае.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

**[Вернуться к началу](#Конфигурация)**

* * *

## Конфигурация бота

Как вы уже наверное знаете, у каждого бота должен быть свой файл конфигурации. Пример конфигурационного файла бота вы можете найти в файле `example.json`. Просто **скопируйте** `example.json` в новый файл, переименуйте есть, и у вас получится новый бот. Вам стоит начать с конфигурации вашего **основного** аккаунта, поэтому вы можете назвать новый файл например `primary.json`, `1.json` или `YourNickname.json`.

**Примечание:** Есть несколько имён, которые зарезервированы и не могут быть использованы как имя бота. Это имена **ASF**, **example** и **minimal**. ASF будет игнорировать файлы конфигурации с такими именами. Кроме того, ASF игнорирует конфигурационные файлы, имя которых начинается с точки.

Когда вы определитесь с именем бота, откройте файл и начните конфигурирование. Вы должны увидеть следующую структуру:

```json
{
    "AcceptGifts": false,
    "AutoSteamSaleEvent": false,
    "BotBehaviour": 0,
    "CustomGamePlayedWhileFarming": null,
    "CustomGamePlayedWhileIdle": null,
    "Enabled": false,
    "FarmingOrders": [],
    "GamesPlayedWhileIdle": [],
    "HoursUntilCardDrops": 3,
    "IdlePriorityQueueOnly": false,
    "IdleRefundableGames": true,
    "LootableTypes": [
        1,
        3,
        5
    ],
    "MatchableTypes": [
        5
    ],
    "OnlineStatus": 1,
    "PasswordFormat": 0,
    "Paused": false,
    "RedeemingPreferences": 0,
    "SendOnFarmingFinished": false,
    "SendTradePeriod": 0,
    "ShutdownOnFarmingFinished": false,
    "SteamLogin": null,
    "SteamMasterClanID": 0,
    "SteamParentalCode": null,
    "SteamPassword": null,
    "SteamTradeToken": null,
    "SteamUserPermissions": {},
    "TradingPreferences": 0,
    "UseLoginKeys": true
}
```

**Совет:** Чтобы бот правильно работал, вам надо отредактировать как минимум параметры `Enabled`, `SteamLogin` и `SteamPassword`. Я также рекомендую взглянуть на некоторые дополнительные настройки вроде `HoursUntilCardDrops`, но это не обязательно. Файл конфигурации ASF довольно обширны, что позволяет вам настроить ботов и ASF как вам нужно, но если вам не нужны все эти дополнительные настройки вам совершенно не обязательно в них углубляться. Именно вам решать насколько простым или сложным должен быть ASF.

* * *

Все параметры описаны ниже:

`AcceptGifts` - параметр типа `bool` со значением по-умолчанию `false`. Если этот параметр включен, ASF будет автоматически принимать и активировать все подарки в Steam(включая электронные подарочные карты для пополнения кошелька Steam), отправленные боту. Это также включает в себя подарки от пользователей, не указанных в `SteamUserPermissions`. Помните о том, что подарки, отправленные на электронную почту не передаются в клиент автоматически, поэтому ASF не сможет принять их без вашей помощи.

Эта возможность рекомендуется только для дополнительных аккаунтов, поскольку весьма вероятно что вы не захотите активировать все подарки, полученные на основной аккаунт. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`AutoSteamSaleEvent` - параметр типа `bool` со значением по-умолчанию `false`. Во время зимней и летней распродаж Steam обычно проводит мероприятия, позволяющие получить дополнительные карточки за просмотр списка рекомендаций каждый день, и за голосование в различных номинациях Steam. Если этот параметр включен, ASF будет автоматически проверять списки рекомендаций и номинации Steam каждые 6 часов, и выполнять эти задания при необходимости. Не рекомендуется включать эту функцию если вы хотите выполнять эти задания самостоятельно, обычно эта функция будет иметь смысл только на дополнительных аккаунтах. Кроме того, необходимо чтобы ваш аккаунт имел уровень не менее `8` если вы надеетесь получить карты распродажи за эти задания. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

Обратите внимание, что из-за постоянных проблем Steam, и изменений в заданиях, **мы не гарантируем что эта функция будет правильно работать**, а значит вполне возможен вариант, когда она **не будет работать вообще**. Мы не принимаем **никаких** сообщений об ошибках, и не оказываем техническую поддержку связанную с этой функцией. Она предоставляется абсолютно без гарантий, и вы используете её на свой страх и риск.

* * *

`BotBehaviour` - параметр типа `byte flags` со значением по-умолчанию `0`. Этот параметр определяет реакцию бота под управлением ASF на различные события, и задаётся следующим образом:

| Значение | Имя                           | Описание                                                                                   |
| -------- | ----------------------------- | ------------------------------------------------------------------------------------------ |
| 0        | None                          | Бот не имеет особых реакций, наименее агрессивный режим, используется по умолчанию         |
| 1        | RejectInvalidFriendInvites    | ASF будет отклонять (а не игнорировать) неверные запросы на добавление в друзья            |
| 2        | RejectInvalidTrades           | ASF будет отклонять (а не игнорировать) неверные предложения обмена                        |
| 4        | RejectInvalidGroupInvites     | ASF будет отклонять (а не игнорировать) неверные приглашения в группы                      |
| 8        | DismissInventoryNotifications | ASF будет автоматически отмечать все уведомления о предметах в инвентаре как просмотренные |
| 16       | MarkReceivedMessagesAsRead    | ASF будет автоматически отмечать все полученные сообщения как прочитанные                  |

Обратите внимание что это параметр типа `flags`, и следовательно ему может быть присвоена любая комбинация приведенных выше значений. Ознакомьтесь с описанием типа `flags` в разделе "**[Типы параметров в JSON](#Типы-параметров-в-json)**" если хотите узнать больше. Если вы не включите никаких флагов, будет использоваться вариант `None`.

В общем случае вы можете настроить этот параметр если хотите чтобы ASF выполнял за вас некие автоматические действия, связанные с его деятельностью, это обычно ожидается от дополнительных, но не от основного аккаунта. Поэтому в основном имеет смысл менять этот параметр для дополнительных аккаунтов, хотя вы конечно же можете использовать отдельные опции и на основном.

Нормальное (`None`) поведение ASF подразумевает автоматизацию только нужных пользователю вещей (например, фарм карточек, или обработка обменов по правилам `SteamTradeMatcher`, если это задано в `TradingPreferences`). Это наименее агрессивный режим, и он подойдёт большинству пользователей, поскольку у них остаётся полный контроль над аккаунтом, и они могут сами решать, выполнять ли какие-то нестандартные взаимодействия, или нет.

Неверный запрос на добвление в друзья - это такой, который пришёл не от пользователя с правами `FamilySharing` или выше (задаётся в параметре `SteamUserPermissions`). ASF в нормальном режиме игнорирует такие запросы, как и ожидается, давая вам выбор принимать их или нет. Значение `RejectInvalidFriendInvites` приведёт к тому, что такие запросы будут автоматически отклоняться, что практически исключит возможность другим людям добавить вас в друзья (поскольку ASF будет отклонять все их запросы, кроме людей заданных в `SteamUserPermissions`). Если вы не хотите целиком заблокировать запросы на добавление в друзья, не используйте это значение.

Неверное предложение обмена это такое предложение, которое не будет автоматически принято модулем ASF. More on this matter can be found in **[trading](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Trading)** section which explicitly defines what types of trade ASF is willing to accept automatically. Правильные обмены также определяются и другими настройками, особенно `TradingPreferences`. Значение `RejectInvalidTrades` приведёт к тому, что все неверные предложения будут отклонены, а не проигнорированы. Если вы не хотите запретить все обмены, кроме тех которые автоматически обрабатывает ASF вам не следует использовать этот значение.

Неверное приглашение в группу это приглашение которое пришло не от группы `SteamMasterClanID`. ASF в нормальном режиме, как и ожидается, будет игнорировать такие приглашения, позволяя вам самостоятельно решить, хотите ли вы вступать в конкретную группу Steam или нет. Значение `RejectInvalidGroupInvites` приведёт к тому что все эти приглашения в группы будут автоматически отклонены, делая попросту невозможным пригласить вас в группу, отличную от `SteamMasterClanID`. Если вы не хотите запретить все приглашения в группы, вам не следует использовать это значение.

Если вы не уверены, как настроить этот параметр, лучше оставить ему значение по-умолчанию.

* * *

`CustomGamePlayedWhileFarming` - параметр типа `string` со значением по-умолчанию `null`. Во время фарма ASF может показывать статус "В сторонней игре: `CustomGamePlayedWhileFarming`" вместо названия текущей игры. Это может оказаться полезным если вы хотите дать знать своим друзьям что вы фармите, но не хотите менять значение по-умолчанию у параметра `OnlineStatus`. Обратите внимание, ASF не может гарантировать порядок отображения статусов в Steam, поэтому этот статус может как работать так и не работать правильно. Значение по-умолчанию `null` выключает эту функцию.

* * *

`CustomGamePlayedWhileIdle` - параметр типа `string` со значением по-умолчанию `null`. Аналогично `CustomGamePlayedWhileFarming`, но для ситуации когда ASF нечего делать (все карточки на аккаунте уже выбиты). Значение по-умолчанию `null` выключает эту функцию.

* * *

`Enabled` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, что бот включен. Включенный бот (`true`) будет автоматически запускаться при запуске ASF, а выключенный бот (`false`) необходимо запускать вручную. По умолчанию каждый бот выключен, поэтому вы вероятно захотите переключить этот параметр в `true` на всех ботах, которые должны запускаться автоматически.

* * *

`FarmingOrders` - параметр типа `ImmutableHashSet<byte>` с пустым значением по-умолчанию. Этот параметр задаёт **предпочитаемый** порядок фарма, которы ASF будет использовать для данного бота. На данный момент вам доступны следующие варианты порядка фарма:

| Значение | Имя                       | Описание                                                                                    |
| -------- | ------------------------- | ------------------------------------------------------------------------------------------- |
| 0        | Unordered                 | Без сортировки, незначительно улучшает производительность ЦПУ                               |
| 1        | AppIDsAscending           | Пытаться сначала фармить игры с самым маленьким `appID`                                     |
| 2        | AppIDsDescending          | Пытаться сначала фармить игры с самым большим `appID`                                       |
| 3        | CardDropsAscending        | Пытаться сначала фармить игры с наименьшим количеством доступных для выпадения карточек     |
| 4        | CardDropsDescending       | Пытаться сначала фармить игры с наибольшим количеством доступных для выпадения карточек     |
| 5        | HoursAscending            | Пытаться сначала фармить игры с наименьшим количеством наигранных часов                     |
| 6        | HoursDescending           | Пытаться сначала фармить игры с наибольшим количеством наигранных часов                     |
| 7        | NamesAscending            | Пытаться фармить игры в алфавитном порядке, начиная с A                                     |
| 8        | NamesDescending           | Пытаться фармить игры в обратном алфавитном порядке, начиная с Z                            |
| 9        | Random                    | Пытаться фармить игры в совершенно случайном порядке (разном для каждого запуска программы) |
| 10       | BadgeLevelsAscending      | Пытаться сначала фармить игры с самым маленьким уровнем значка                              |
| 11       | BadgeLevelsDescending     | Пытаться сначала фармить игры с самым большим уровнем значка                                |
| 12       | RedeemDateTimesAscending  | Пытаться сначала фармить игры, которые добавлены на аккаунт раньше других                   |
| 13       | RedeemDateTimesDescending | Пытаться сначала фармить игры, которые добавлены на аккаунт позже других                    |
| 14       | MarketableAscending       | Пытаться сначала фармить игры, карточки из которых нельзя продать                           |
| 15       | MarketableDescending      | Пытаться сначала фармить игры, карточки из которых можно продать                            |

Поскольку этот параметр - массив, вы можете использовать несколько значений в нужном вам порядке. Например, вы можете добавить значения `15`, `11` и `7` чтобы сортировать сначала по играм с продаваемыми предметами, затем по самому высокому уровню значка, и в конце - по алфавиту. Как вы могли догадаться, порядок имеет значаения, и обратный порядок (`7`, `11` и `15`) даст совершенно другой результат. Большинство пользователей вероятно будут использовать только один способ сортировки, но в случае если вам этого хочется - вы можете уточнить сортировку дополнительными параметрами.

Also notice the word "try" in all above descriptions - the actual ASF order is heavily affected by selected **[cards farming algorithm](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Performance)** and sorting will affect only results that ASF considers same performance-wise. Например, при выбранном алгоритме `Simple`, выбранные `FarmingOrders` будут полностью соблюдаться в текущей сессии фарма (поскольку у все игры в данном случае одинаковы с точки зрения производительности), а при алгоритме `Complex` реальный порядок зависит в первую очередь от наигранных часов и только потом сортируется согласно выбранному `FarmingOrders`. Это приведёт к различным результатам, поскольку игры в которых уже есть "время в игре" будут иметь приоритет над остальными, поэтому ASF будет предпочитать в первую очередь игры с самым большим "временем в игре", и только затем производить сортировку согласно выбранным `FarmingOrders`. Следовательно, этот параметр - это только **пожелание**, которое ASF будет учитывать пока оно не влияет негативно на производительность (в противном случае соображения производительности всегда будут иметь приоритет перед `FarmingOrders`).

There is also idling priority queue that is accessible through `iq` **[commands](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Commands)**. Если она используется, порядок фарма формируется сначала из соображений производительности, затем с учётом очереди фарма, и наконец согласно выбранным вами `FarmingOrders`.

* * *

`GamesPlayedWhileIdle` - параметр типа `ImmutableHashSet<uint>` с пустым значением по-умолчанию. Если ASF нечего фармить, вместо фарма будут запускаться указанные игры (`appID`) Steam. Запуск игр таким способом увеличивает "время в игре" для этих игр, но ничего кроме этого. Эта функция может использоваться одновременно с `CustomGamePlayedWhileIdle` с целью запуска игр и одновременно показе заданного статуса в Steam, но в этом случае, как и с `CustomGamePlayedWhileFarming`, реальный порядок отображения не гарантируется. Обратите внимание на то, что Steam позволяет одновременно запускать до `32` `appID`, а значит если вы укажете больше игр, только первые `32` будут отработаны (а все дополнительные проигнорированы).

* * *

`HoursUntilCardDrops` - параметр типа `byte` со значением по-умолчанию `3`. Этот параметр задаёт, есть ли у аккаунта ограничение на выпадение карточек, и если да - то на сколько часов. Ограничение на выпадение карточек означает что у данного аккаунта не выпадает карточек из игры пока в этой игре не наиграно как минимум `HoursUntilCardDrops` часов. К сожалению, нет никакого волшебного способа узнать, есть ли ограничение или нет, поэтому ASF полагается в этом на вас. This property affects **[cards farming algorithm](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Performance)** that will be used. Правильная настройка этого параметра максимизирует прибыль и минимизирует время, необходимое на фарм всех карточек. Помните о том, что нет очевидного ответа, какое значение вам использовать, это полностью зависит от вашего аккаунта. Похоже что старые аккаунты, с которых не запрашивали возврат средств не имеют ограничений на выпадение карт, поэтому им следует использовать значение `​0​`, а новые аккаунты, и те кто запрашивал возврат средств за игры - имеют ограничение на `3` часа. Но это только теория, и не стоит полагаться на это как на правило. Значение по-умолчанию основано на том, что будет в данном случае меньшим злом, и подходит для большинства случаев.

* * *

`IdlePriorityQueueOnly` - параметр типа `bool` со значением по-умолчанию `false`. This property defines if ASF should consider for automatic idling only apps that you added yourself to priority idling queue available with `iq` **[commands](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Commands)**. Если этот параметр включен, ASF будет пропускать все `appID` отсутствующие в списке, позволяя вам выбрать игры для автоматического фарма. Помните, что если вы не добавили ни одной игры в очередь, ASF будет нечего фармить на вашем аккаунте. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`IdleRefundableGames` - параметр типа `bool` со значением по-умолчанию `true`. Этот параметр указывает, разрешено ли ASF фармить игры, за которые ещё возможен возврат средств. Возврат средств разрешён за игры, которые были куплены не ранее чем 2 недели назад через магазин Steam, и в которые наиграно менее 2 часов, это описано **[здесь](https://store.steampowered.com/steam_refunds)**. По-умолчанию этот параметр установлен в значение `true`, ASF игнорирует возможность возврата средств, и фармит все доступные игры, как того ожидает большинство пользователей. Однако, вы можете переключить этот параметр в `false` если хотите чтобы ASF не фармил игры, за которые возможен возврат средств, давая вам возможность оценить эти игры самостоятельно и без проблем запросить возврат средств при необходимости, не беспокоясь о том что ASF отрицательно повлияет на время в игре. Обратите внимание, если вы отключите этот параметр, ASF не будет фармить игры которые вы купили в магазине Steam в течении 14 дней со дня покупки. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `true`.

* * *

`LootableTypes` - параметр типа `ImmutableHashSet<byte>` со значением по-умолчанию `1, 3, 5`. Этот параметр определяет поведение ASF при отправке обменов - как ручной, так и автоматической. ASF будет отправлять в предложении обмена только предметы соответствующие `LootableTypes`, поэтому вы можете указать, что вы хотите получить в предложениях обмена, которые будет вам присылать бот.

| Значение | Имя               | Описание                                                                  |
| -------- | ----------------- | ------------------------------------------------------------------------- |
| 0        | Unknown           | Типы предметов, которые не попадают ни в одну из категорий ниже           |
| 1        | BoosterPack       | Наборы карточек                                                           |
| 2        | Emoticon          | Смайлики, используемые в чате Steam                                       |
| 3        | FoilTradingCard   | Аналог `TradingCard`, но для металлических карточек                       |
| 4        | ProfileBackground | Фоны, используемые в вашем профиле Steam                                  |
| 5        | TradingCard       | Коллекционные карточки Steam, используемые для создания значков (обычных) |
| 6        | SteamGems         | Самоцветы и мешки самоцветов, используемые для создания наборов карточек  |

Обратите внимание, что независимо от настроек выше, ASF будет отправлять только предметы из сообщества (`contextID` равно 6) Steam (`appID` равно 753), поэтому все игровые предметы, подарки, и так далее, исключены из предложений обмена по определению.

Значение по-умолчанию основано на наиболее распространённом применении ботов, и пересылает только наборы карт и сами карты (включая металлические). Этот параметр позволяет вам изменить это поведение по своему вкусу. Обратите внимание, что все типы, кроме описанных выше, будут относиться к типу `Unknown`, это может быть важно в случае если Valve выпустит новый тип предметов Steam, такие предметы будут относиться к типу `Unknown`, пока их не добавят в какой-то новый тип (в будущих версиях программы). Именно поэтому в общем случае не рекомендуется включать тип `Unknown` в вашем `LootableTypes`, кроме случая когда вы знаете, что делаете, и понимаете, что ASF отправит вам весь инвентарь в предложении обмена если сеть Steam опять сломается и начнёт обозначать все предметы как `Unknown`. Настоятельно не рекомендуем добавлять тип `Unknown` в `LootableTypes`, даже если вы собираетесь пересылать весь инвентарь.

* * *

`MatchableTypes` - параметр типа `ImmutableHashSet<byte>` со значением по-умолчанию `5`. Этот параметр задаёт, какие типы предметов разрешено обменивать, если в параметре `TradingPreferences` включено значение `SteamTradeMatcher`. Типы определяются следующим образом:

| Значение | Имя               | Описание                                                                  |
| -------- | ----------------- | ------------------------------------------------------------------------- |
| 0        | Unknown           | Типы предметов, которые не попадают ни в одну из категорий ниже           |
| 1        | BoosterPack       | Наборы карточек                                                           |
| 2        | Emoticon          | Смайлики, используемые в чате Steam                                       |
| 3        | FoilTradingCard   | Аналог `TradingCard`, но для металлических карточек                       |
| 4        | ProfileBackground | Фоны, используемые в вашем профиле Steam                                  |
| 5        | TradingCard       | Коллекционные карточки Steam, используемые для создания значков (обычных) |
| 6        | SteamGems         | Самоцветы и мешки самоцветов, используемые для создания наборов карточек  |

Разумеется, обычно имеет смысл использовать в этом параметре только типы `2`, `3`, `4` и `5`, поскольку только эти типы поддерживает STM. Помните, что **ASF это не бот для торговли** и **не будет отслеживать цену предмета или его редкость**, а значит если вы используете тип `Emoticon`, ASF с радостью поменяет 2 ваших редких смайлика на 1 редкий и 1 обычный, если это помогает достичь прогресса в сборе значка (в данном случае - сборе всех смайликов). Подумайте дважды, готовы ли вы к этому. Вам следует оставить этому параметру значение по-умолчанию `5`, кроме тех случаев когда вы хорошо знаете, что делаете.

* * *

`OnlineStatus` - параметр типа `byte` со значением по-умолчанию `1`. Этот параметр задаёт статус в сообществе Steam, который будет указывать бот при входе в сеть Steam. На данный момент вы можете выбрать один из нижеприведенных статусов:

| Значение | Имя            |
| -------- | -------------- |
| 0        | Offline        |
| 1        | Online         |
| 2        | Busy           |
| 3        | Away           |
| 4        | Snooze         |
| 5        | LookingToTrade |
| 6        | LookingToPlay  |
| 7        | Invisible      |

Статус `Offline` чрезвычайно полезен для основных аккаунтов. Как вы уже должны знать, фарм игры отображает ваш статус в Steam как "В игре: XXX", что может ввести в заблуждение ваших друзей, которые подумают что вы играете в игру, которую вы просто фармите. Использование статуса `Offline` решает этот проблему - ваш аккаунт никогда не будет отображаться как "в игре", когда вы фармите карточки в ASF. Это возможно благодаря тому, что ASF может не входить в сообщество Steam но при этом продолжать работу, поэтому он запускает игры, подключившись к сети Steam но вообще не оповещая его о том, что мы онлайн. Помните, что игры запущенные в со статусом `Offline` всё равно учитываются в наигранное время, и отображаются в разделе "Недавняя активность" на странице вашего профиля.

В добавок к этому, эта функция также полезна если вы хотите получать уведомления и непрочитанные сообщения когда у вас запущен ASF и в то же время не запущен клиент Steam. Поскольку ASF работает как и сам клиент Steam, то хочет ASF того или нет, Steam будет транслировать ему эти сообщения и прочие события. Это не проблема если у вас одновременно запущены ASF и ваш клиент Steam, поскольку оба клиента получат совершенно одинаковые события. Однако, если запущено только ASF, сеть Steam может отмечать некоторые события и сообщения как "доставленные", не смотря на то что ваш обычный клиент Steam не получил их из-за того что не подключен к сети. Статус Offline решает это проблему, поскольку ASF в этом случае не учитывается в обработке событий, поэтому все непрочитанные сообщения и прочие события будут правильно помечены как непрочитанные, когда вы вернётесь.

Важно отметить, что ASF в режиме `Offline` **не** сможет принимать никакие команды через обычные чаты Steam, поскольку чат, как и наличие в сообществе вообще, полностью оффлайн. Решение этой проблемы - использовать режим `Invisible`, который работает похожим образом (не отображает статус), но сохраняет возможность получать и отвечать на сообщения (а также возможность отмечать уведомления как просмотренные и сообщения как прочитанные, как описано выше). Режим `Invisible` имеет смысл для дополнительных аккаунтов, которые вы не хотите раскрывать (с точки зрения статуса), но которым вы всё же хотите отправлять команды.

Однако, есть одна проблема со статусом `Invisible` - он не очень хорошо работает с основными аккаунтами. Проблема в том, что **любая** сессия Steam, со статусом online, **раскрывает** реальный статус, даже если сам ASF не делает этого. Это происходит из-за текущего ограничения/ошибки в сети Steam, которое невозможно починить со стороны ASF, поэтому если вы хотите пользоваться режимом `Invisible`, то вам необходимо проследить чтобы **все** другие сессии того же аккаунта тоже были в режиме `Invisible`. Это будет именно так для дополнительных аккаунтов, где ASF, скорее всего, единственная активная сессия, но на основном аккаунте, который вы практически всегда захотите видеть как `Online`, скрыв при этом активность ASF, и в этом случае режим `Invisible` будет полностью бесполезен для вас (мы рекомендуем использовать вместо этого режим `Offline`). Мы надеемся что это ограничение/ошибка будет со временем исправлена Valve, но не стоит ожидать что это произойдёт в ближайшее время...

Если вы не уверены, как правильно настроить этот параметр, рекомендуется использовать значение `0` (`Offline`) для основных аккаунтов и `1` (`Online`) для остальных.

* * *

`PasswordFormat` - параметр типа `byte` со значением по-умолчанию `0`. Этот параметр задаёт формат хранения параметра `SteamPassword`, и на сегодняшний день поддерживает следующие значения: `​0​` для `PlainText`, `1` для `AES` и `2` для `ProtectedDataForCurrentUser`. Please refer to **[Security](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Security)** section if you want to learn more, as you'll need to ensure that `SteamPassword` property indeed includes password in matching `PasswordFormat`. Другими словами, когда вы меняете `PasswordFormat` ваш `SteamPassword` должен **уже** быть в этом формате, а не только планироваться как таковой. Вам следует оставить этому параметру значение по-умолчанию `​0​`, кроме тех случаев когда вы хорошо знаете, что делаете.

* * *

`Paused` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет исходное состояние модуля `CardsFarmer`. Со значением по-умолчанию `false` бот будет автоматически начинать фарм после запуска либо по параметру `Enabled` либо по команде `start`. Switching this property to `true` should be done only if you want to manually `resume` automatic farming process, for example because you want to use `play` all the time and never use automatic `CardsFarmer` module - this works exactly the same as `pause` **[command](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Commands)**. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`RedeemingPreferences` - параметр типа `byte flags` со значением по-умолчаниюtype `0`. Этот параметр определяет поведение ASF при активации ключей в Steam, и задаётся следующим образом:

| Значение | Имя              | Описание                                                                                                |
| -------- | ---------------- | ------------------------------------------------------------------------------------------------------- |
| 0        | None             | Нет предпочтений по активации, по-умолчанию                                                             |
| 1        | Forwarding       | Передавать ключи, которые не удалось активировать, другим ботам                                         |
| 2        | Distributing     | Распределять все ключи между этим и другими ботами                                                      |
| 4        | KeepMissingGames | Не передавать ключи для игр, которые (возможно) отсутствуют на аккаунте, оставлять их неиспользованными |

Обратите внимание, что это параметр типа `flags`, и следовательно возможны любые комбинации доступных значений. Ознакомьтесь с описанием типа `flags` в разделе "**[Типы параметров в JSON](#Типы-параметров-в-json)**" если хотите узнать больше. Если вы не включите никаких флагов, будет использоваться вариант `None`.

`Forwarding` приведёт к тому, что бот будет передавать ключи, которые не удалось активировать, другим подключенным и запущенным ботам, у которых нет данной игры (если удалось проверить). Наиболее распространённая ситуация это передача это игры со статусом `AlreadyPurchased`(уже есть на аккаунте) другому боту, у которого нет этой игры, но это значение также поддерживает другие случаи, такие как `DoesNotOwnRequiredApp`(отсутствует базовая игра), `RateLimited`(слишком много попыток активации) or `RestrictedCountry`(ключ не может быть активирован в вашем регионе).

`Distributing` приведёт к тому, что все полученные ключи будут распределены между этим и другими ботами. Это означает, что каждый бот получит один ключ и списка. Обычно это используется только если вы активируете много ключей от одной и той же игры, и хотите равномерно распределить их по всем ботам, ситуация противоположная активации нескольких ключей от разных игр. Эта функция не имеет никакого смысла если вы активируете только один ключ в одной команде `redeem` (поскольку нет дополнительных ключей, которые можно распределить).

`KeepMissingGames` приведёт к тому, что бот будет игнорировать значение `Forwarding` если нет уверенности в том, что активируемый ключ от игры, которая уже есть на аккаунте. Это попросту означает, что `Forwarding` будет применять **только** к ключам, получившим статус `AlreadyPurchased`, не покрывая другие случаи, такие как `DoesNotOwnRequiredApp`, `RateLimited` и `RestrictedCountry` (см. выше). Обычно вам может пригодиться это значение только для основного аккаунта, чтобы убедиться, что активируемые на нём ключи не будут переданы дальше если он временно получил статус `RateLimited`. Как вы можете догадаться из описания, это значение не будет иметь абсолютно никакого эффекта, если не включено значение `Forwarding`.

Если вы включите и `Forwarding` и `Distributing`, вы получите сочетание передачи с распределением, то есть ASF будет сначала пытаться активировать один ключ на всех аккаунтах (передача) перед тем как переходить к следующему (распределение). Обычно такое сочетание нужно если вы хотите использовать `Forwarding`, но со сменой следующего бота для активации, вместо того чтобы перебирать всех ботов по порядку (как происходит при одном `Forwarding`). Этот вариант может быть полезен если вы знаете что большинство или все ключи от одной и той же игры, потому что в этой ситуации один `Forwarding` будет пытаться активировать их все сначала на пером боте (что имеет смысл если ключи от разных игр), а `Forwarding` + `Distributing` будет менять бота для следующего ключа, "передавая" задачу активации нового ключа следующему боту (что имеет смысл если все ключи для одной игры, пропускается бессмысленная попытка активации для каждого ключа).

Реальный порядок ботов для всех вариантов активации - по алфавиту, исключая ботов которые не доступны (не подключены, остановлены и тому подобное). Помните, что у Steam есть ограничени попыток активации, как для одного аккаунта, так и для одного IP, и каждая попытка активации не завершившаяся статусом `OK` увеличивает счётчик неудачных попыток. ASF прилагает все усилия, чтобы уменьшить число статусов `AlreadyPurchased`, например пытаясь избежать передачи ключа боту, у которого уже есть эта игра, но это не всегда работает из-за того как Steam работает с лицензиями. Использование флагов активации, таких как `Forwarding` или `Distributing`, всегда увеличивает ваш шанс на получение статуса `RateLimited`.

Также помните, что вы не можете передавать или распределять ключи ботам, для которых у вас нет прав доступа. This should be obvious, but ensure that you're at least `Operator` of all the bots you want to include in your redeeming process, for example with `status ASF` **[command](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Commands)**.

* * *

`SendOnFarmingFinished` - параметр типа `bool` со значением по-умолчанию `false`. По окончанию фарма всех карточек на одном аккаунте, ASF может автоматически отсылать предложение обмена со всеми выпавшими предметами пользователю с правами `Master`, что довольно удобно если вы не хотите заниматься предложениями обмена самостоятельно. Эта функция аналогична команде `loot`, поэтому помните что для неё нужно чтобы был установлен пользователь с правами `Master`, а также может понадобиться правильный `SteamTradeToken`, ну и конечно аккаунту должно быть разрешено совершать обмены. В дополнение к запуску `loot` после окончания фарма, если эта функция активна, ASF будет также вызывать `loot` каждый раз при получении уведомления о получении новых предметов (только когда фарм не запущен), и после завершения каждого обмена при котором получены новые предметы(всегда). Это особенно удобно для передачи "по цепочке" предметов полученных от других людей на основной аккаунт. It's strongly recommended to use this feature together with **[ASF 2FA](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Two-factor-authentication)** being set, as there is no point in sending automatic trades if you need to manually confirm them. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `false`.

* * *

`SendTradePeriod` - параметр типа `byte` со значением по-умолчанию `0`. Этот параметр очень похож на `SendOnFarmingFinished`, с одним отличием - вместо того, чтобы отсылать предложение обмена по окончанию фарма, бот может отсылать предложение обмена каждые `SendTradePeriod` часов, не зависимо от того, сколько осталось фармить. Это полезно, если вы хотите получать предметы с дополнительных аккаунтов на регулярной основе, не дожидаясь окончания фарма. Значение по-умолчанию `​0​` отключает эту функцию, если вы хотите чтобы ваш бот отсылал вам предложения обмена, например, каждый день - поставьте сюда значение `24`. It's strongly recommended to use this feature together with **[ASF 2FA](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Two-factor-authentication)** being set, as there is no point in sending automatic trades if you need to manually confirm them. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `0`.

* * *

`ShutdownOnFarmingFinished` - параметр типа `bool` со значением по-умолчанию `false`. ASF "занимает" аккаунт на всё время пока пока процесс запущен. Когда на аккаунте закончен фарм карточек, ASF периодически проверяет (каждые `IdleFarmingPeriod` часов), не появились ли новые игры с карточками, чтобы продолжить фарм без необходимости перезапуска процесса. Это полезно для большинства пользователей, поскольку ASF продолжает фармить по мере необходимости. Однако вы можете захотеть завершать процесс когда фарм на аккаунте закончен, для этого поставьте этому параметру значение `true`. Если этот параметр включен, ASF будет выходить из аккаунта когда фарм на нём закончен, а значит не сможет периодически проверять или занимать его. Вам нужно решить, хотите ли вы чтобы ASF работал с данным аккаунтом всё время, или ASF должен останавливать его, когда закончин фарм. When all accounts are stopped and process is not running in `--process-required` **[mode](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Command-Line-Arguments)**, ASF will shutdown as well. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `false`.

* * *

`SteamLogin` - параметр типа `string` со значением по-умолчанию `null`. В этом параметре задаётся ваш логин Steam - тот, с которым вы входите в Steam. Помимо задания логина в этом параметре, вы можете оставить ему значение `null` если хотите вводить логин каждый раз при запуске ASF вместо хранения его в конфигурационном файле. Это может быть полезным, если вы не хотите сохранять конфиденциальные данные в конфигурационном файле.

* * *

`SteamMasterClanID` - параметр типа `ulong` со значением по-умолчанию `0`. В этом параметре задаётся steamID группы Steam, к которой бот должен автоматически присоединяться, и входить в чат. Вы можете узнать steamID вашей группы перейдя на её **[страницу](https://steamcommunity.com/groups/ascfarm)**, а затем добавив `/memberslistxml?xml=1` в конец ссылки в адресной строке, чтобы ссылка приобрела **[такой](https://steamcommunity.com/groups/ascfarm/memberslistxml?xml=1)** вид. Затем вы сможете получить steamID из результирующей выдачи (в некоторых браузерах может понадобиться включить режим просмотра исходного кода), он находится в теге `<groupID64>`. В примере выше это будет `103582791440160998`. В добавок к попытке присоединиться к группе на старте, бот будет также автоматически принимать приглашения в эту группу, что даёт вам возможность пригласить бота вручную, если ваша группа не открытая. Если у вас нет группы для ваших ботов, вам следует оставить этому параметру значение по-умолчанию, равное `0`.

* * *

`SteamParentalCode` - `string` type with default value of `null`. В этом параметре задаётся ваш PIN для семейного просмотра. ASF требуется доступ к ресурсам, защищённым средствами семейного просмотра, если вы пользуетесь этим функционалом Steam - вам необходимо указать ваш PIN для корректной работы ASF. Default value of `null` means that there is no steam parental PIN required to unlock this account, and this is probably what you want if you don't use steam parental functionality. In addition to defining steam parental PIN here, you may also use value of `0` if you want to enter your steam parental PIN on each ASF startup instead of putting it in the config. This may be useful for you if you don't want to save sensitive data in config file.

* * *

`SteamPassword` - параметр типа `string` со значением по-умолчанию `null`. В этом параметре задаётся ваш пароль Steam - тот, с которым вы входите в Steam. Помимо задания пароля в этом параметре, вы можете оставить ему значение `null` если хотите вводить пароль каждый раз при запуске ASF вместо хранения его в конфигурационном файле. Это может быть полезным, если вы не хотите сохранять конфиденциальные данные в конфигурационном файле.

* * *

`SteamTradeToken` - параметр типа `string` со значением по-умолчанию `null`. Если бот находится в вашем списке друзей, он может отправлять вам предложения обмена без указания токена, в этом случае вы можете оставить этому параметру значение `null`. Однако, если вы решите что НЕ хотите иметь бота в списке друзей, вам понадобиться сгенерировать и заполнить токен для обменов как пользователю, которому бот должен отправлять обмен. Другими словами, в этом параметре должен быть указан токен для обменов от того аккаунта, который задан как `Master` в параметре `SteamUserPermissions` **этого** бота.

Чтобы найти ваш токен, вы должны зайти в Steam с аккаунта, который указан как `Master`, перейти **[сюда](https://steamcommunity.com/my/tradeoffers/privacy)** и посмотреть на свою ссылка на обмен. Токен, который вы ищете, состоит из 8 символов после `&token=` в вашей ссылке на обмен. Вам нужно скопировать эти 8 символов сюда, в параметр `SteamTradeToken`. Не нужно указывать целиком ссылку на обмен, и даже часть `&token=`, только сам токен.

* * *

`SteamUserPermissions` - параметр типа `ImmutableDictionary<ulong, byte>` с пустым значением по-умолчанию. Этот параметр - ассоциативный массив, задающий соответствие между пользователем Steam, указанным с помощью 64-битного Steam ID, и числом типа `byte`, которое задаёт его права для данного бота ASF. На данный момент доступны следующие права:

| Значение | Имя           | Описание                                                                                                                                                                                                                     |
| -------- | ------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 0        | None          | Никаких прав, это зарезервированное значение, которое нужно только чтобы описывать те steam ID, которые отсутствуют в этом массиве - нет необходимости задавать какой-то аккаунт с такими правами                            |
| 1        | FamilySharing | Даёт минимальный доступ для пользователей использующих семейный доступ. Опять же, это скорее зарезервированное значение, поскольку ASF способен автоматически обнаруживать каким steam ID разрешён доступ к вашей библиотеке |
| 2        | Operator      | Даёт основные права доступа к боту, в основном для активации ключей и добавления бесплатных лицензий                                                                                                                         |
| 3        | Master        | Даёт полный доступ к данному боту                                                                                                                                                                                            |

Если коротко, этот параметр позволяет вам управлять разрешениями для выбранных пользователей. Permissions are important mainly for access to ASF **[commands](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Commands)**, but also for enabling many ASF features, such as accepting trades. Например, вы можете объявить свой аккаунт как `Master`, и дать права `Operator` 2-3 своим друзьям, чтобы они могли активировать ключи на ваших ботах, но при этом **не** могли, например, остановить их. Благодаря этому вы легко можете назначать права выбранным пользователям и давать им доступ к выбранным вами ботам до определённой вами степени.

Мы рекомендуем указать только одного пользователя как `Master`, и сколько захотите - как `Operator` и ниже. Хотя технически возможно указать несколько `Master`ов и ASF, будет корректно с ними работать, например принимать предложения обмена, которые они отправят боту, но ASF будет использовать только одного из них (с самым маленьким steam ID) для всех задач, для которых требуется только одна цель - например, запросов `loot`, а также параметров `SendOnFarmingFinished` или `SendTradePeriod`. Если вы хорошо понимаете эти ограничения, особенно тот факт что запрос `loot` всегда будет отсылать предметы аккаунту `Master` с самым маленьким steam ID, независимо от того, кто из `Master`ов отдал эту команду - вы можете задать здесь несколько пользователей с правами `Master`, но мы всё же рекомендуем схему с одним `Master` - мы не будем оказывать поддержку для конфигураций с несколькими `Master`.

Стоит отметить, что дополнительно есть ещё права доступа `Owner`, которые задаются в параметре `SteamOwnerID` глобальной конфигурации. Вы не можете никому задать права `Owner` в этом параметре, поскольку параметр `SteamUserPermissions` определяет только права, относящиеся к боту, а не к процессу ASF в целом.

* * *

`TradingPreferences` - параметр типа `byte flags` со значением по-умолчанию `0`. Этот параметр определяет поведение ASF при получении предложений обменов, и задаётся следующим образом:

| Значение | Имя                 | Описание                                                                                                                                                                                                     |
| -------- | ------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| 0        | None                | Нет предпочтений при обменах - принимаются только обмены от `Master`                                                                                                                                         |
| 1        | AcceptDonations     | Принимаются предложения обменов, в которых бот не отдаёт никаких предметов                                                                                                                                   |
| 2        | SteamTradeMatcher   | Принимаются предложения обменов дубликатов карточек по правилам **[STM](https://www.steamtradematcher.com)**. Visit **[trading](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Trading)** for more info |
| 4        | MatchEverything     | Требует, чтобы был задан `SteamTradeMatcher`, и в сочетании с ним - также принимаются "плохие" сделки в дополнение к "хорошим" и "нейтральным"                                                               |
| 8        | DontAcceptBotTrades | Не принимаются автоматически предложения обмена, отправленные по команде `loot` другими ботами                                                                                                               |

Обратите внимание, что это параметр типа `flags`, и следовательно возможны любые комбинации доступных значений. Ознакомьтесь с **[типами параметров в JSON](#Типы-параметров-в-json)** если хотите узнать больше. Если вы не включите никаких флагов, будет использоваться вариант `None`.

For further explanation of ASF trading logic, and description of every available flag, please visit **[Trading](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Trading)** section.

* * *

`UseLoginKeys` - параметр типа `bool` со значением по-умолчанию `true`. Этот параметр задаёт, должен ли ASF использовать механизм ключей авторизации для этого аккаунта Steam. Механизм ключей авторизации подобен функции "Запомнить мой пароль" официального клиента Steam, он делает возможным для ASF сохранить временный одноразовый ключ авторизации для следующего подключения, снимая необходимость в пароле, коде Steam Guard или 2ФА если сохранённый ключ авторизации верный. Ключ авторизации хранится в файле `BotName.db` и обновляется автоматически. Поэтому вам не нужно вводить пароль/код SteamGuard/код 2ФА после того как вы зашли в ASF хотя бы раз.

Login keys are used by default for your convenience, so you don't need to input `SteamPassword`, SteamGuard or 2FA code (when not using **[ASF 2FA](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Two-factor-authentication)**) on each login. Это превосходная альтернатива, поскольку ключ авторизации может быть использован только один раз и никоим образом не раскрывает ваш пароль. Точно такой же метод используется самим клиентом Steam, который сохраняет имя вашего аккаунта и ключ авторизации для следующего входа, что по сути то же самое что использование `SteamLogin` с `UseLoginKeys` и пустым `SteamPassword` в ASF.

Однако, некоторые пользователи могут быть обеспокоены даже такой возможностью, поэтому этот параметр поможет вам если вы хотите чтобы ASF не сохранял никаких ключей, которые позволят ему возобновить предыдущую сессию после закрытия, что приведёт к необходимости полной аутентификации при каждой попытке входа. Отключение этой функции будет работать точно так же, как если бы вы не поставили отметку в поле "Запомнить мой пароль" при входе в официальный клиент Steam. Кроме случаев, когда вы понимаете что делаете, вам стоит оставить этому параметру значение по-умолчанию `true`.

**[Вернуться к началу](#Конфигурация)**

* * *

## Файловая структура

ASF использует достаточно простую файловую структуру.

    ├── config
    │     ├── ASF.json
    │     ├── ASF.db
    │     ├── Bot1.json
    │     ├── Bot1.db
    │     ├── Bot1.bin
    │     ├── Bot2.json
    │     ├── Bot2.db
    │     ├── Bot2.bin
    │     └── ...
    ├── ArchiSteamFarm.dll
    ├── log.txt
    └── ...
    

Чтобы перенести ASF в другое место, например на другой ПК, достаточно переместить/скопировать папку `config`, и это же рекомендованный метод создания "резервных копий ASF".

Файл `log.txt` содержит журнал, созданный ASF при последнем запуске. Этот файл не содержит никакой конфиденциальной информации, и крайне полезен когда дело доходит до поиска неисправностей и причин падений, и в целом для информации о том, что происходило во время последнего запуска ASF. Мы будет часто просить у вас этот файл, если у вас возникают проблемы и ошибки. ASF automatically manages this file for you, but you can further tweak ASF **[logging](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Logging)** module if you're advanced user.

Папка `config` это место где хранятся настройки ASF, включая настройки для всех ботов.

`ASF.json` это файл глобальных настроек ASF. Этот конфигурационный файл используется для настройки поведения ASF как процесса, эти настройки влияют на всех ботов и на саму программу. В нём вы найдёте глобальные параметры, такие как настройка владельца ASF, авто-обновлений или режима отладки.

`BotName.json` это файл настроек конкретного бота. Этот конфигурационный файл задаёт поведение конкретного бота, поэтому эти настройки индивидуальны для каждого бота, и не распространяются на других ботов. Это позволяет вам настроить ботов с разными значениями параметров, и не обязательно чтобы все они работали одинаково.

Кроме конфигурационных файлов, ASF также хранит в папке `config` свои базы данных.

`ASF.db` это файл глобальной базы данных ASF. Она служит глобальным постоянным хранилищем, и используется для хранения различной информации, необходимой процессу ASF, такой как IP-адреса локальных адресов Steam. **Вам не следует редактировать этот файл**.

`BotName.db` это база данных конкретного бота. Этот файл используется для хранения важных данных о конкретном боте в постоянном хранилище, таких как ключ авторизации или 2ФА ASF. **Вам не следует редактировать этот файл**.

`BotName.bin` это особый файл для конкретного бота, которых хранит информацию о хеше безопасности Steam. Хеш безопасности используется для аутентификации с использованием механизма `SteamGuard`, очень похоже на файл `ssfn` в Steam. **Вам не следует редактировать этот файл**.

`BotName.keys` is a special file that can be used for importing keys into **[background games redeemer](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Background-games-redeemer)**. Это не обязательный файл, и не создаётся, а только распознаётся ASF. Этот файл автоматически удаляется после того как ключи успешно импортированы.

`BotName.maFile` is a special file that can be used for importing **[ASF 2FA](https://github.com/JustArchiNET/ArchiSteamFarm/wiki/Two-factor-authentication)**. Это не обязательный файл, и не создаётся, а только распознаётся ASF если ваш бот `BotName` ещё не имеет подключенного 2ФА ASF. Этот файл автоматически удаляется после того как 2ФА ASF успешно импортирован.

**[Вернуться к началу](#Конфигурация)**

* * *

## Типы параметров в JSON

Каждый конфигурационный параметр имеет свой тип. Тип параметра определяет диапазон значений, допустимых для него. Мы можете использовать только верные для данного типа значения - если значение будет неверным, ASF не сможет прочесть ваш файл конфигурации.

**Мы настоятельно рекомендуем использовать Генератор Конфигураций для создания файлов конфигурации** - он берёт на себя большую часть низкоуровневых задач (таких как проверка типов), так что вам остаётся только ввести правильные значения, и вам не придётся разбираться в типах переменных, описанных ниже. Этот раздел в основном для людей, создающих/редактирующих файлы конфигурации вручную, чтобы они знали, какие значения можно использовать.

Типы используемые в ASF это встроенные типы C#, описанные ниже:

* * *

`bool` - логический тип, принимающий только значения `true` и `false`.

Пример: `"Enabled": true`

* * *

`byte` - Тип беззнакового байта, принимающий только целые числа из диапазона от `​0​` до `255` (включительно).

Пример: `"ConnectionTimeout": 60`

* * *

`uint` - Тип беззнакового целого, принимающий только целые числа из диапазона от `​0​` до `4294967295` (включительно).

* * *

`ulong` - Тип беззнакового длинного целого, принимающий только целые числа от `​0​` до `18446744073709551615` (включительно).

Пример: `"SteamMasterClanID": 103582791440160998`

* * *

`string` - Строковый тип, принимающий любую последовательность символов, включая пустую последовательность `""` и `null`. И пустая последовательность и значение `null` обрабатываются ASF одинаково, поэтому вы можете использовать то или другое на свой выбор.

Примеры: `"SteamLogin": null`, `"SteamLogin": ""`, `"SteamLogin": "MyAccountName"`

* * *

`ImmutableHashSet<valueType>` - Неизменяемая коллекция (набор) уникальных значений заданного типа `valueType`. В JSON задаётся как массив элементов заданного типа `valueType`.

Пример для `ImmutableHashSet<uint>`: `"Blacklist": [267420, 303700, 335590]`

* * *

`ImmutableDictionary<keyType, valueType>` - неизменяемый ассоциативный массив, задающий соответствие ключа типа `keyType` значению типа `valueType`. В JSON задаётся как объект с парами ключ-значение. Помните, что в этом случае `keyType` всегда берётся в кавычки, даже если это значение таких типов как `ulong`.

Пример `ImmutableDictionary<ulong, byte>`: `"SteamUserPermissions": { "76561198174813138": 3, "76561198174813137": 1 }`

* * *

`flags` - Флаговый атрибут объединяет несколько разных значений в одно конечное значение параметра с помощью битовых операций. Это позволяет выбирать любые комбинации допустимых значений одновременно. Окончательное значение формируется как сумма значений всех выбранных опций.

Например, вам даны следующие значения:

| Имя | Имя  |
| --- | ---- |
| 0   | None |
| 1   | A    |
| 2   | B    |
| 4   | C    |

Использование комбинации `B + C` даст в результате значение `6`, использование `A + C` даст значение `5`, использование `C` даст значение `4` и так далее. Это позволяет вам создавать любые возможные комбинации допустимых значений - если вы решите объединить их все, создав `None + A + B + C`, вы получите конечное значение `7`. Обратите внимание, что флаг со значением `​0​` включён по-умолчанию во все возможные комбинации, поэтому чаще всего этот флаг не задаёт ничего важного (как например `None`).

Легко видеть, что в примере выше у нас 3 доступных флага, которые можно включить/выключить (`A`, `B`, `C`), и суммарно 8 доступных значений (`None -> 0`, `A -> 1`, `B -> 2`, `A+B -> 3`, `C -> 4`, `A+C -> 5`, `B+C -> 6`, `A+B+C -> 7`).

**[Вернуться к началу](#Конфигурация)**

* * *

## Совместимость типов

Из-за ограничений JavaScript сетевой генератор конфигураций не может правильно сериализовать поля типа `ulong`, поэтому поля типа `ulong` будут создаваться как параметры строкового типа с префиксом `s_`. Это включает, например, `"SteamOwnerID": 76561198006963719` который будет записан генератором конфигураций в виде `"s_SteamOwnerID": "76561198006963719"`. В ASF автоматически поддерживает такие строковые параметры, поэтому записи с префиксом `s_` в ваших конфигурационных являются верными. Если вы создаёте конфигурационные файлы самостоятельно, мы рекомендуем по возможности придерживаться исходных полей `ulong`, но если вы по какой-то причине не можете этого сделать, вы можете также действовать по этой схеме и кодировать их как строки добавляя к названию префикс `s_`. Мы надеемся со временем обойти это ограничение JavaScript.

**[Вернуться к началу](#Конфигурация)**

* * *

## Совместимость конфигураций

Главным приоритетом ASF является совместимость со старыми файлами конфигурации. Как вы уже должны знать, недостающие параметры обрабатываются как будто они заданы со **значением по-умолчанию**. Следовательно, если в новой версии ASF добавляется новый параметр, все ваши файлы конфигураций останутся **совместимыми** с новой версией, и ASF будет обрабатывать новый параметр так будто он задан со **значением по-умолчанию**. Вы всегда можете добавлять, удалять или изменять конфигурационные параметры в соответствии со своими нуждами. Мы рекомендуем ограничится заданием только тех параметров, значение которых вы хотите изменить, поскольку все остальные автоматически получат значения по-умолчанию, это не только сделает ваш конфигурационный файл понятнее, но также увеличит совместимость в случае если мы решим изменить значение по-умолчанию для параметра, который вы не задали сами. Вы можете посмотреть пример конфигурации созданной по такому принципу в файле `minimal.json`.

**[Вернуться к началу](#Конфигурация)**

* * *

## Автоматическая перезагрузка

Начиная с ASF V2.1.6.2+, программа отслеживает изменение файлов конфигурации "на лету" - благодаря этому, ASF автоматически:

- Создаёт (и при необходимости запускает) нового бота, если вы создали для него файл конфигурации
- Останавливает (при необходимости) и удаляет старого бота, если вы удалили его файл конфигурации
- Останавливает (и при необходимости запускает) любого бота, если вы изменили его файл конфигурации
- Перезапускает (при необходимости) бота с новым именем, если вы переименовали файл конфигурации

Всё вышеперечисленное достаточно прозрачно и будет выполняться автоматически без необходимости перезапуска программы и не влияя на ботов конфигурационные файлы которых вы не меняли.

В добавок к этому, ASF автоматически перезапустися (если это разрешено в праметре `AutoRestart`) если вы измените файл глобальной конфигурации ASF `ASF.json`. Также, программа завершится если вы удалите или переименуете его.

**[Вернуться к началу](#Конфигурация)**