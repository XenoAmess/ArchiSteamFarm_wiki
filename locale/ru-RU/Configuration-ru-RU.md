# Конфигурация

Эта статься посвящена конфигурированию ASF. Здесь содержится полная документация по содержимому папки `config`, прозволяющая настроить ASF под ваши нужды.

- **[Введение](#Введение)**
- **[Сетевой генератор конфигураций](#Сетевой-генератор-конфигураций)**
- **[Ручная настройка](#Ручная-настройка)**
- **[Файл глобальной конфигурации](#Файл-глобальной-конфигурации)**
- **[Конфигурация бота](#Конфигурация-бота)**
- **[Файловая структура](#Файловая-структура)**
- **[Типы параметров в JSON](#Типы-параметров-в-json)**
- **[Совместимость типов](#Совместимость-типов)**
- **[Совместимость конфигураций](#Совместимость-конфигураций)**
- **[Автоматическая перезагрузка](#Автоматическая-перезагрузка)**

* * *

## Введение

Конфигурация ASF разделена на две основные части - глобальная конфигурация (для всего процесса), и конфигурация каждого бота. У каждого бота есть собственный файл конфигурации бота с именем `BotName.json` (где `BotName` это имя, которое вы дали боту), а для конфигурации процесса ASF используется один файл с именем `ASF.json`.

Бот - это один аккаунт Steam используемый ASF. Для нормальной работы ASF требует чтобы был определён хотя бы **один** бот. Жёсткого ограничения на количество ботов нет, поэтому вы можете использовать столько ботов (аккаунтов Steam) сколько захотите.

ASF использует формат **[JSON](https://ru.wikipedia.org/wiki/JSON)** для сохранения настроек в файлах конфигурации. Это дружественный к пользователю, читаемый и довольно универсальный формат, в котором вы можете конфигурировать программу. Но не волнуйтесь, вам не обязательно знать JSON чтобы настроить ASF. Я упомянул это просто на случай если вы захотите массово создавать конфигурации ASF каким-нибудь скриптом.

Конфигурирование может быть проделано вручную - путём создания соответствующих файлов конфигруации в формате JSON, или с использованием нашего **[сетевого генератора конфигураций](https://justarchi.github.io/ArchiSteamFarm)**, что будет намного легче и удобнее. Если вы не продвинутый пользователь, я рекомендую вам использовать генератор конфигураций, описание которого приведено ниже.

**[Вернуться к началу](#Конфигурация)**

* * *

## Сетевой генератор конфигураций

Цель сетевого генератора конфигураций - предоставить вам удобный интерфейс для создания конфигурационных файлов ASF. Сетевой генератор конфигураций работает на 100% на стороне клиента, это значит что никакие данные, которые вы в нём вводите, никуда не пересылаются, и обрабатываются только на вашей машине. Это обеспечивает безопасность и надёжность, поскольку он может работать даже **[оффлайн](https://github.com/JustArchi/ArchiSteamFarm/tree/master/docs)** если вы скачаете все файлы и запустите `index.html` в своём любимом браузере.

Сетевой генератор конфигураций проверен в Chrome и Firefox, но он должен работать во всех популярных браузерах с включенным javascript.

Пользоваться им очень просто - выбираете, хотите ли вы создать файл конфигурации `ASF` или `Бот` выбрав соответствующую закладку, проверяете что выбранная в генераторе версия соответствует вашей версии ASF, вводите все необходимые поля и нажимаете кнопку "Скачать". Скачанный файл кладёте в папку `config` вашего ASF, при необходимости перезаписывая существующий. Повторяете всю процедуру в случае будущих модификаций, и используете остаток этой статьи для объяснения всех доступных параметров конфигурации.

**[Вернуться к началу](#Конфигурация)**

* * *

## Ручная настройка

Я настоятельно рекомендую использовать сетевой генератор конфигураций, но если по какой-то причине вы не хотите - вы можете создавать конфигурационные файлы сами. Ознакомьтесь с файлом `example.json` в качестве примера правильной структуры, вы можете скопировать этот файл и использовать как базу для вашего нового бота. Поскольку вы не пользуетесь программой, убедитесь что ваш файл **[валидный с точки зрения JSON](https://jsonlint.com)**, поскольку ASF не сможет его загрузить если его не удаётся разобрать. Чтобы узнать правильную структуру JSON для всех полей, ознакомьтесь с разделом "**[Типы параметров в JSON](#Типы-параметров-в-json)**" и приведенной ниже документацией.

**[Вернуться к началу](#Конфигурация)**

* * *

## Файл глобальной конфигурации

Файл глобальной конфигурации называется `ASF.json` и имеет следующую структуру:

```json
{
    "AutoRestart": true,
    "BackgroundGCPeriod": 0,
    "Blacklist": [],
    "CommandPrefix": "!",
    "ConfirmationsLimiterDelay": 10,
    "ConnectionTimeout": 60,
    "CurrentCulture": null,
    "Debug": false,
    "FarmingDelay": 15,
    "GiftsLimiterDelay": 1,
    "Headless": false,
    "IdleFarmingPeriod": 8,
    "InventoryLimiterDelay": 3,
    "IPC": false,
    "IPCPassword": null,
    "IPCPrefixes": [
        "http://127.0.0.1:1242/"
    ],
    "LoginLimiterDelay": 10,
    "MaxFarmingTime": 10,
    "MaxTradeHoldDuration": 15,
    "OptimizationMode": 0,
    "Statistics": true,
    "SteamOwnerID": 0,
    "SteamProtocols": 3,
    "UpdateChannel": 1,
    "UpdatePeriod": 24,
    "WebLimiterDelay": 200,
    "WebProxy": null,
    "WebProxyPassword": null,
    "WebProxyUsername": null
}
```

**Совет:** Если вы не собираетесь менять этих настроек, вы можете просто оставить всё по-умолчанию, а значит вы можете закрыть `ASF.json` и перейти к конфигурированию бота.

* * *

Все параметры описаны ниже:

`AutoRestart` - параметр типа `bool` со значением по-умолчанию `true`. Этот параметр определяет, разрешено ли ASF перезапускаться при необходимости. Существуют события, которые могут потребовать перезапуска ASF, такие как обновление (раз в `UpdatePeriod` или по команде `update`), редактирование файла `ASF.json`, команда `restart` и тому подобное. Перезапуск обычно включает в себя две части - создание нового процесса и завершение текущего. Для большинства пользователей подойдёт оставить этому параметро значение по-умолчанию `true`, однако если вы запускаете ASF через собственный скрипт и/или `dotnet`, возможно вы захотите иметь полный контроль над запуском процесса, и избежать ситуации когда новый (перезапущеный) процесс ASF работает где-то в фоне, а не в основном процессе скрипта, который завершится вместе со старым процессом ASF. Особенно важно то, что новый процесс не будет прямым потомком вашего скрипта, из-за чего вы не сможете например использовать его стандартный поток вывода.

В этом случае вам поможет этот параметр, вы можете установить его в `false`. Однако помните, что в этом случае **вы** несёте ответственность за перезапуск процесса. Это особенно важно поскольку в этом случае ASF просто выйдет вместо создания нового процесса (например, после обновления), поэтому если вы не добавили свою логику для этого случая он просто перестанет работать пока вы его не запустите снова. ASF всегда выходит с правильным кодом выхода, указывающим на удачу (ноль) или неудачу (не ноль), поэтому вы можете добавить правильную логику в своём скрипте чтобы избежать перезапуска ASF в случае отказа, или как минимум создавать резервную копию `log.txt` для дальнейшего анализа. Также помните, что команда `restart` выполнит перезапуск ASF независимо от значения этого параметра, поскольку этот параметр задаёт поведение по-умолчанию, а команда `restart` производит принудительный перезапуск процесса. Если у вас нет причин отключать эту функцию, рекомендуется оставить её включенной.

* * *

`BackgroundGCPeriod` - параметр типа `byte` со значением по-умолчанию ``. Этот параметр создан специально для **[режима экономии памяти](https://github.com/JustArchi/ArchiSteamFarm/wiki/Low-memory-setup-ru-RU)** и не должен включаться без необходимости. Если этому параметру установлено значение, отличное от ``, ASF будет производить полную сборку мусора каждые `BackgroundGCPeriod` секунд, и уплотнение больших объектов кучи каждые `BackgroundGCPeriod` минут. Такой подход приводит к уменьшению использования памяти, а также делает среду исполнение менее "жадной" отдавая больше неиспользуемой памяти назад ОС через фиксированные интервалы. Однако, такая принудительная сборка мусора через фиксированные интервалы отрицательно скажется на производительности ASF, а также приведёт к увеличению нагрузки на ЦПУ. Вам следует включать эту функцию только если она вам действительно нужна, обычно **[только с включенной серверной сборкой мусора](https://github.com/JustArchi/ArchiSteamFarm/wiki/High-performance-setup-ru-RU#Расширенная-настройка-среды-исполнения)**, и только после прочтения раздела посвященного **[экономии ОЗУ](https://github.com/JustArchi/ArchiSteamFarm/wiki/Low-memory-setup-ru-RU)**. Наиболее агрессивная настройка конечно же включить сборку мусора каждую `1` секунду, но прежде чем делать это попробуйте что-то не столь радикальное, например `10`. Если у вас нет **веских** причин включать эту функцию, рекомендуется оставить её выключенной со значением по-умолчанию ``.

* * *

`Blacklist` - параметр типа `HashSet<uint>` с пустым значением по-умолчанию. Как подсказывает название, этот глобальный параметр определяет какие appID (игры) будут полностью игнорироваться в автоматическом режиме фарма ASF. К сожалению Steam любит отмечать значки летней/зимней распрожажи как "доступные для выпадения карточек", из-за чего ASF пытается их фармить как будто это настоящая игра. Если бы не было черного списка, ASF просто "зависал" бы пытаясь фармить эти игры, которые на самом деле не игры, и бесконечно бы ждал пока из них выпадут карточки, чего никогда не произойдёт. Черный список ASF позволяет отметить эти значки как недоступные для фарма, что позволяет просто тихо игнорировать их при определении следующей игры для фарма, и избегать таких ловушек.

По умолчанию ASF включает в себя два черных списка - `GlobalBlacklist`, который жёстко записан в ASF при программировании, и обычный `Blacklist`, который здесь описан. `GlobalBlacklist` обновляется вместе с ASF и обычно включает в себя все "плохие" appID на момент релиза, поэтому если вы пользуетесь последней версией вам не нужно беспокоиться о поддержании своего `Blacklist`, описанного здесь. Основная цель этого параметра - позволить вам заносить в черный список новые, не известные на момент релиза ASF appID, которые не следует фармить. Записанный в код `GlobalBlacklist` обновляется как можно быстрее, поэтому нет необходимости обновлять `Blacklist` если вы пользуетесь последней версие ASF, но без этого параметра вы были бы вынуждены обновлять ASF чтобы поддерживать его "работоспособным" когда Valve выпускает новый значок распродажи - а я не хочу заставлять вас пользоваться последней версие ASF, и поэтому этот параметр позволяет вам "исправить" ASF самостоятельно, если по какой-то причине вы не хотите или не можете обновить `GlobalBlacklist` вместе с новым релизом, но хотите чтобы ASF продолжил работать. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

Если вы ищете черный список, персональный для каждого бота, посмотрите на **[команды](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** `ib`, `ibadd` and `ibrm`.

* * *

`CommandPrefix` - параметр типа `string` со значением по-умолчанию `!`. Этот параметр задаёт **чувствительный к регистру** префикс используемый для **[команд](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** ASF. Другими словами, это то, с чего должна начинаться каждая команда ASF чтобы ASF вас послушался. Этому параметру можно присвоить значение `null` или пустую строку, чтобы заставить ASF не использовать префикс, в этом случае команды вводятся просто своими идентификаторами. Однако, это может привести к снижению производительности ASF, поскольку ASF оптимизирован пропускать команды, если они не начинаются с `CommandPrefix` - если вы намеренно решите не пользоваться им, ASF будет вынужден читать все сообщения и отвечать на них, даже если это не команды. Поэтому рекомендуется использовать какой-нибудь `CommandPrefix`, как например `/`, если вам не нравится значение по-умолчанию `!`. Для единообразия, `CommandPrefix` влияет на весь процесс ASF. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`ConfirmationsLimiterDelay` - параметр типа `byte` со значением по-умолчанию `10`. Сеть Steam в общем случае включает в себя различные ограничения на частоту одинаковых запросов, поэтому нам приходится добавлять дополнительные задержки, чтобы не сработали эти ограничения, поскольку такое срабатывание сделает сервисы Steam временно недоступными. ASF обеспечивает, чтобы как минимум `ConfirmationsLimiterDelay` секунд прошло между двумя последовательными запросами на подтверждение двухфакторной аутентификации (далее 2ФА) - они используются для **[2ФА ASF](https://github.com/JustArchi/ArchiSteamFarm/wiki/Escrow-ru-RU)** во время, например, команды `2faok`, а также при необходимости различных действия связанных с обменами. Значение по-умолчанию было установлено исходя из результатов наших тестов, и его не стоит снижать если вы не хотите возникновения проблем. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`ConnectionTimeout` - параметр типа `byte` со значением по-умолчанию `60`. Этот параметр определяет таймауты для различных сетевых действий, производимых ASF, в секундах. В частности, `ConnectionTimeout` определяет таймаут в секундах для HTTP и IPC запросов, `ConnectionTimeout / 10` определяет максимальное число пропущенных тактов сторожевого таймера, а `ConnectionTimeout / 30` определяет время в минутах, которое мы выделяем на начальный запрос подключения к сети Steam. Значение по умолчанию `60` должно подходить большинству пользователей, однако, если у вас очень медленное сетевое подключение или ПК, возможно вы захотите увеличить это значение (например до `90`). Имейте в виду, что большие значения не починят волшебным образом медленные или недоступные сервера Steam, поэтому нет смысла бесконечно ждать чего-то, что никогда не случится, и проще попробовать заново позже. Установка этому параметру слишком большого значения приведёт к излишним задержка обнаружения проблем с сетью, а также приведёт к общему падению производительности. Установка этому параметру слишком маленького значения также уменьшит общую стабильность и производительность, поскольку ASF будет прерывать нормальные запросы, которые ещё обрабатываются. Поэтому устанавливать этому параметру значение меньше значения по-умолчанию в целом не даёт преимуществ, поскольку сервера Steam время от времени работают медленно, и поэтому требуют больше времени для обработки запросов ASF. Значение по-умолчанию - это попытка уравновесить предположение о стабильности сетевого подключения и сомнения в способности сети Steam обработать запрос за отведенное время. Если вы хотите обнаруживать проблемы с сетью как можно раньше и позволить ASF переподключаться/реагировать как можно быстрее, значение по умолчанию вам подойдёт (можно сделать его немножко ниже, чтобы ASF стал менее терпеливым). Если же вы замечаете, что у ASF часто происходят проблемы с сетью, такие как ошибки обменов, потери тактов сторожевого таймера, или разрывы связи со Steam, возможно имеет смысл увеличить это значение если вы уверены что это связано с самим Steam, а **не** с вашей сетью, поскольку увеличение таймаутов делает ASF более "терпеливым" и не пытаться сразу же переподключаться. Возможно также имеет смысл увеличить это значение если у вас довольно медленный интернет, который требует больше времени для передачи данных. Вкратце, значение по-умолчанию подходит для большинства случаев, но вы можете захотеть увеличить его при необходимости. Но значительно увеличивать относительно значения по-умолчанию также не имеет много смысла, поскольку большие таймауты не починят волшебным образом недоступные сервера Steam. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`CurrentCulture` - параметр типа `string` со значением по-умолчанию `null`. По-умолчанию ASF пытается использовать язык вашей операционной системы, и использовать переведенные на этот язык строки, если они доступны. Это возможно благодаря нашему сообществу, которое старается **[локализовать](https://github.com/JustArchi/ArchiSteamFarm/wiki/Localization-ru-RU)** ASF на большинство популярных языков. Если по какой-то причине вы не хотите использовать язык вашей ОС, вы можете использовать этот параметр чтобы выбрать любой существующий язык, который бы вы хотели использовать. Полный список языков вы можете найти в **[MSDN](https://msdn.microsoft.com/en-us/library/cc233982.aspx)** в колонке `Language tag`. Рады сообщить, что ASF воспринимает как точные указания на языки, как например `en-GB`, так и нейтральные, такие как `en`. Указание языка может также влиять на другие региональные настройки, такие как формат валюты, даты и тому подобное. Обратите внимание, что вам могут понадобиться дополнительные шрифты/языковые пакеты для правильного отображения символов некоторых языков, если вы выбрали язык отличный от языка вашей системы. Обычно вам может понадобиться этот параметр если вы хотите пользоваться ASF на английском языке вместо своего родного.

* * *

`Debug` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, должен ли ASF работать в режиме отладки. В режиме отладки, ASF использует специальную папку `debug` рядом с папкой `config`, в которой сохраняются все обмены между ASF и серверами Steam. Отладочная информация может помочь обнаруживать сложные проблемы, связанные с сетью и общей работой ASF. В дополнение к этому, некоторые подпрограммы будут выводить гораздо больше информации, так например `WebBrowser` будет указывать конкретную причину, почему запросы завершаются неудачно - такая информация записывается в обычный журнал ASF. **Вам не следует использовать ASF в режиме отладки, если вас об этом не попросил разработчик**. Работа в отладочном режиме **уменьшает производительность**, **отрицательно влияет на стабильность** и **выводит гораздо больше информации в разных местах**, поэтому этот режим должен использоваться **исключительно** намеренно, кратковременно, для отладки конкретной проблемы, воспроизведения проблемы или получения дополнительной информации и сбое обмена, и тому подобное, но **не** для нормальной работы программы. Вы увидите **огромное количество** новых ошибок, проблем, и исключений - подумайте, обладаете ли вы достаточными знаниями об ASF, Steam и его глюках прежде чем вы решите анализировать эти данные самостоятельно, поскольку часть этих сообщений может не соответствовать истине.

**ПРЕДУПРЕЖДЕНИЕ:** активация этого режима включает журналирование **потенциально конфиденциальной** информации, такой как логины и пароли, используемые для входа в Steam (из-за журналирования сетевых запросов). Эти данные записываются как в папку `debug`, так и в обычный `log.txt` (который в этом режиме будет гораздо более подробным). Вам не следует выкладывать отладочную информацию, сгенерированную ASF, в публичных местах, разработчики ASF всегда будут просить передать её на e-mail, или выложить в другое безопасное место.

* * *

`FarmingDelay` - параметр типа `byte` со значением по-умолчанию `15`. Для работы ASF требуется периодически проверять каждые `FarmingDelay` минут, не выпали ли уже все карточки из текущей игры. Слишком маленькое значение в этом параметру приведёт к избыточному количеству запросов к steam, а слишком большое может привести к тому что ASF будет "фармить игру на `FarmingDelay` дольше чем требуется. Значение по-умолчанию должно прекрасно подойти большинству пользователей, однако если у вас много ботов вы можете захотеть увеличить это значение до чего-то вроде `30` минут чтобы ограничить количество запросов к сети Steam. К счастью, ASF использует механизм обработки событий и проверяет страницу значков в Steam каждый раз когда появляется уведомление о новых предметов, поэтому в общем случае **нам вообще не нужно проверять это через фиксированные промежутки времени**, но поскольку мы не полностью доверяем сети Steam - мы всё же проверяем страницу со значками, чтобы убедиться за за последние `FarmingDelay` минут не выпало карточек (на случай если Steam не пришлёт уведомление о новый предметах, или что-то подобное). Если предположить что сесть Steam работает правильно, уменьшение этого значения **никак не повлияет на эффективность фарма**, но **существенно увеличит нагрузку на сеть** - поэтому рекомендуется только увеличивать его (при необходимости) относительно значения по-умолчанию в `15` минут. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`GiftsLimiterDelay` - параметр типа `byte` со значением по-умолчанию `1`. Сеть Steam в общем случае включает в себя различные ограничения на частоту одинаковых запросов, поэтому нам приходится добавлять дополнительные задержки, чтобы не сработали эти ограничения, поскольку такое срабатывание сделает сервисы Steam временно недоступными. ASF обеспечивает чтобы между последовательными запросами на обработку(активацию) подарков/ключей/лицензий прошло как минимум `GiftsLimiterDelay` секунд. В дополнение к этому этот параметр также будет использоваться как глобальное ограничение на получение списка игр, как например по **[команде](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** `owns`. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`Headless` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, должен ли ASF работать в безынтерфейсном режиме. В безынтерфейсном режиме предполагается что ASF запущен на сервере или в другой не-интерактивной среде, и поэтому запросы на чтение данных из консоли (таких как коды аутентификации, коды SteamGuard, пароли и тому подобное) не будут выдаваться. Это аналогично переводу консоли ASF в режим "только для чтения". Безынтерфейсный режим полезен в основном для пользователей, запускающих ASF на серверах, поскольку вместо запроса на, например, код аутентификации, ASF будет просто прерывать операцию и останавливать "проблемный" аккаунт. Если вы не пользуетесь ASF на сервере, и не убедились что ASF сможет работать без ввода дополнительных данных, вам стоит оставить этот параметр выключенным. В безынтерфейсном режиме не будет работать никакое взаимодействие с пользователем, и бот просто не запустится если для его работы нужен **любой** ввод значений. Это полезно на серверах, чтобы ASF просто прекращал попытки входа в аккаунт если для этого нужны дополнительные данные, а не ждал (бесконечно) пока пользователь их введёт. Также, если этот параметр включен, вы сможете пользоваться **[командой](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** `input`, которая служит заменой стандартного ввода с консоли. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `false`.

Если вы используете ASF на сервере, возможно вы захотите использовать этот параметр совместно с **[аргументом командной строки](https://github.com/JustArchi/ArchiSteamFarm/wiki/Command-line-arguments-ru-RU)** `--process-required`.

* * *

`IdleFarmingPeriod` - параметр типа `byte` со значением по-умолчанию `8`. Когда ASF нечего фармить, он будет проверять каждые `IdleFarmingPeriod` часов, не появилось ли на аккаунте новых игр для фарма. Эта функция не нужна когда мы говорим о добавлении новых игр на аккаунт, поскольку алгоритм ASF достаточно умен чтобы автоматически проверять в этом случае страницу со значками. `IdleFarmingPeriod` в основном для тех случаев, когда в старую игру, которае есть у нас на аккаунте, добавили коллекционные карточки. В этом случае нет никакого события, поэтому ASF приходится периодически проверять страницу со значками чтобы предусмотреть такой вариант. Значение `` выключает эту функцию. Смотрите также: `ShutdownOnFarmingFinished`.

* * *

`InventoryLimiterDelay` - параметр типа `byte` со значением по-умолчанию `3`. Сеть Steam в общем случае включает в себя различные ограничения на частоту одинаковых запросов, поэтому нам приходится добавлять дополнительные задержки, чтобы не сработали эти ограничения, поскольку такое срабатывание сделает сервисы Steam временно недоступными. ASF обеспечивает чтобы между двумя последовательными запросами к инвентарю (они используются только чтобы получить список предметов в вашем инвентаре) прошло как минимум `InventoryLimiterDelay` секунд. Значение по-умолчанию `3` основано на испытаниях проведенных со 100 ботами, и должно быть достаточным для большинства (если не всех) пользователей. Однако вы можете захотеть уменьшить это значение, или даже сделать его равным `` если у вас очень небольшое количество ботов, в этом случае ASF будет игнорировать задержку и опрашивать инвентари гораздо быстрее. Но помните, слишком низкое значение **приведёт** к временному бано по IP, и тогда вы вообще не сможете получить доступ к инвентарю. Вам может также понадобиться увеличить это значение если у вас много ботов который производят много запросов к инвентарю, хотя возможно в этом случае вам стоит вместо этого уменьшить количество запросов. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`IPC` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, должен ли **[IPC](https://github.com/JustArchi/ArchiSteamFarm/wiki/IPC-ru-RU)** сервер ASF запускаться при запуске программы. IPC обеспечивает межпроцессное взаимодействие запуская локальный HTTP сервер по указанному в `IPCPrefixes` адресу. Если вы не собираетесь использовать IPC сервер ASF, нет смысла включать этот параметр.

* * *

`IPCPassword` - параметр типа `string` со значением по-умолчанию `null`. Этот параметр задаёт обязательный пароль для любого запроса через IPC и служит дополнительной мерой безопасности. Когда этому параметру присвоено не пустое значение, все IPC запросы будут требовать дополнительный параметр `password` со значением заданным тут. Значение по-умолчанию `null` снимает необходимость в пароле, позволяя ASF обрабатывать все запросы. В дополнение к этому, включение этого параметра также включает встроенный в IPC механизм предотвращения перебора, который будет временно банить любой `IP` -адрес посылающий слишком много неавторизованных запросов за короткий интервал времени. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`IPCPrefixes` - параметр типа `HashSet<string>` со значением по-умолчанию `http://127.0.0.1:1242/`. Этот параметр задаёт префиксы, которые будет использовать `HttpListener` используемый в интерфейсе **[IPC](https://github.com/JustArchi/ArchiSteamFarm/wiki/IPC-ru-RU)**. Другими словами, этот параметр указывает, по каким адресам IPC интерфейс ASF должен ждать входящих запросов. Для получения общей информации о префиксах `HttpListener`, пожалуйста ознакомьтесь с **[MSDN](https://docs.microsoft.com/en-us/dotnet/api/system.net.httplistener?view=netstandard-2.0#Remarks)**.

> Строка URI-префикса состоит из схемы (http и https), имени хоста, необязательного порта, и необязательного пути. Пример полной строки префикса `"http://www.contoso.com:8080/customerData/"`. Перфиксы должны заканчиваться прямым слешом ("/"). Объект `HttpListener` с префиксом, который максимально точно соответствует URI отвечает на запрос. Несколько объектов `HttpListener` не могут иметь одинаковый префикс. Если `HttpListener` добавляет уже используемый префикс, срабатывает исключение `Win32Exception`.
> 
> Когда указан порт, имя хоста можно заменить "\*" для указания что `HttpListener` должен принимать запросы на этот порт если URI запроса не соответствует ни одному другому префиксу. Например, чтобы получать все запросы на порт 8080 когда URI запроса не обрабатывается ни одним другим `HttpListener`, нужен префикс `"http://*:8080/"`. Аналогично, чтобы указать что `HttpListener` должен принимать все запросы на конкретный порт, замените имя хоста символом "+", `"https://+:8080"`. Символы "\*" и "+" могут присутствовать в префиксах в которых указан путь.
> 
> Начиная с .NET 4.5.3 и Windows 10, в префиксах URI, управляемых `HttpListener` поддерживаются подстановочные символы вместо под-доменов. В качестве символа подстановки в под-доменах используется символ "\*" как часть имени хоста в префиксе URI: например, `http://*.foo.com/`, этот аргумент передаётся методу `HttpListenerPrefixCollection.Add`. Это работает на .NET 4.5.3 и Windows 10; в более ранних версиях это вызовет `HttpListenerException`

ASF по умолчанию ожидает запросов только по адресу `127.0.0.1`, чтобы ни одна другая машина кроме вашей не могла получить доступ. Это мера безопасности, поскольку доступ к интерфейсу IPC может повлечь атаку на ваш процесс ASF, что может иметь драматические последствия. Однако, если вы знаете, что делаете, например, если вы позаботитесь об ограничении доступа к IPC самостоятельно, используя например `iptables` или другой брандмауэр, вы можете поменять этот параметр (на свой страх и риск) на что-то менее ограничивающее, например на `*`, что включит IPC на всех сетевых интерфейсах. Возможно вы также захотите используемый по-умолчанию порт IPC на любой другой, рекомендуется использовать порты выше `1024`, поскольку порты `0-1024` обычно требуют прав `root` на Unix-подобных операционных системах. Также помните о том, что ожидание запросов по адресу может требовать дополнительных прав, например привязка к публичному интерфейсу в Windows требует чтобы ASF был запущен с правами администратора (или была правильно настроена политика `netsh`).

Если ваша машина поддерживает IPv6, возможно вы захотите добавить значение `http://[::1]:1242/` в эту коллекцию, чтобы ожидать запросов как по локальному адресу IPv4 `127.0.0.1`, так и по локальному адресу IPv6 `::1`. Это особенно важно если вы планируете получать доступ к ASF по имени `localhost`, потому что в вашем случае может по-умолчанию использоваться IPv6.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`LoginLimiterDelay` - параметр типа `byte` со значением по-умолчанию `10`. Сеть Steam в общем случае включает в себя различные ограничения на частоту одинаковых запросов, поэтому нам приходится добавлять дополнительные задержки, чтобы не сработали эти ограничения, поскольку такое срабатывание сделает сервисы Steam временно недоступными. ASF обеспечивает чтобы между двумя последовательными запросами на подключение прошло как минимум `LoginLimiterDelay` секунд. Значение по-умолчанию `10` было выбрано на основе подключения 100 ботов, и должно удовлетворить большинство (если не всех) пользователей. Вы можете, однако, захотеть уменьшить его, или даже сделать равным ``, если у вас очень малое количество ботов, в этом случае ASF будет игнорировать задержку и подключаться к Steam намного быстрее. Но учтите, что слишком низкое значение при большом количестве ботов **приведёт** к временному бану по IP, что приведёт к **полной** невозможности подключиться и ошибке `InvalidPassword/RateLimitExceeded` - и это касается и обычного клиента Steam, не только ASF. Дополнительно, этот параметр также используется как буфер балансировки нагрузки всех запланированных действий ASF, таких как обмены по `SendTradePeriod`. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`MaxFarmingTime` - параметр типа `byte` со значением по-умолчанию `10`. Как вы должно быть знаете, Steam не всегда работает идеально, иногда происходят странные ситуации, как например Steam иногда не учитывает время в игре, хотя вы играете. ASF будет фармить одну игру в соло-режиме максимум `MaxFarmingTime` часов, и будет считать что фарм завершен по окончанию этого периода. Это необходимо не только чтобы процесс фарма не "зависал" в случае каких-то странных ситуаций, но и на случай если Steam выпускает новый значок, который не даёт ASF продолжить работу (см. `Blacklist`). Значение по-умолчанию в `10` часов должно быть достаточно для выпадения карточек из одной игры. Установка слишком маленького значения может привести к тому что обычные игры будут пропускаться (и да, известны случаи когда выпадение карт в игре занимает 9 часов), а слишком высокое значение может привести к "зависанию" процесса. Обратите внимание, что этот параметр влияет только на одну игру в одном сеансе фарма (поэтому после того пройдёт вся очередь ASF снова вернётся к той же игре), а также на то, что это не общее время в игре, а время фарма в ASF. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`MaxTradeHoldDuration` - параметр типа `byte` со значением по-умолчанию `15`. Этот параметр определяет максимальную длительность задержки обмена в днях, при которой мы согласны его принять - ASF будет отклонять обмены с задержкой более `MaxTradeHoldDuration` дней. Этот параметр влияет только на ботов у которых `TradingPreferences` имеет значение `SteamTradeMatcher`, и не затрагивает ни обменов с `Master`/`SteamOwnerID` ни пожертвований. Удержания обменов не нравятся никому, и никто не хочет иметь с ними дела. ASF предполагает работу по либеральным правилам и помощь каждому, независимо от удержания обмена - поэтому по-умолчанию значение этого параметра `15`. Однако, если вы предпочитаете отклонять все обмены с удержанием, вы можете указать здесь ``. Также учитывайте, что карты с коротким сроком жизни не подвержены влиянию этого параметра, и обмены с ними отклоняются в случае наличия задержек, как описано в разделе "**[Обмены](https://github.com/JustArchi/ArchiSteamFarm/wiki/Trading-ru-RU)**", поэтому нет нужды глобально отклонять все обмены только из-за этого. Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`OptimizationMode` - параметр типа `byte` со значением по-умолчанию ``. Этот параметр определяет режим оптимизации, который ASF будет использовать при работе. На данный момент ASF поддерживает два режима - ``, который называется `MaxPerformance`(Максимальная производительность), и `1` который называется `MinMemoryUsage`(Минимальное потребление памяти). По умолчанию ASF предпочитает как можно больше вещей делать параллельно (одновременно), что увеличивает производительность распределяя нагрузку на всех ядрах ЦПУ, нескольких потоках ЦПУ, нескольких сокетах и нескольких очередях задач. Например, ASF запросит первую страницу значков чтобы узнать какие игры фармить, и после завершения этого запроса прочитает сколько страниц со значками у вас есть, и запросит их все одновременно. Это то что вам нужно **почти всегда**, поскольку избыточность минимальна, а выгода от использования асинхронного кода ASF может быть заметна даже на очень старом железе с одноядерным CPU и ограниченной производительностью. Однако, когда много задач выполняется параллельно, ASF отвечает за их поддержку, как например поддержку открытых сокетов, запущенных потоков и обрабатываемых задач, что иногда может привести к увеличению использования памяти, и если вы очень ограничены доступной памятью, возможно вы захотите переключить значение этого параметра в `1` (`MinMemoryUsage`), что приведёт к тому что ASF будет последовательно выполнять код, который мог бы быть распараллелен. Вам стоит задумываться о переключении этой опции только если вы уже прочли раздел "**[Конфигурация для низкого потребления ОЗУ](https://github.com/JustArchi/ArchiSteamFarm/wiki/Low-memory-setup-ru-RU)**" и намеренно хотите пожертвовать огромным приростом производительности, ради очень небольшого выигрыша в объёме памяти. Обычно результаты от использования этого параметра **гораздо хуже** чем результаты, которых можно достичь другими путями, такими как ограниченное использование ASF или настройка сборщика мусора, как описано в разделе "**[Конфигурация для низкого потребления ОЗУ](https://github.com/JustArchi/ArchiSteamFarm/wiki/Low-memory-setup)**". Поэтому вам стоит использовать `MinMemoryUsage` только как **крайнюю меру**, перед перекомпиляцией исполняемых файлов, если вы не смогли достичь удовлетворительных результатов другими (гораздо лучшими) способами. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`Statistics` - параметр типа `bool` со значением по-умолчанию `true`. Этот параметр определяет, будет ли в ASF включена статистика. Подробное описание того, что делает этот параметр, доступно в разделе "**[Статистика](https://github.com/JustArchi/ArchiSteamFarm/wiki/Statistics-ru-RU)**". Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`SteamOwnerID` - параметр типа `ulong` со значением по-умолчанию ``. Этот параметр задаёт 64-битный SteamID владельца процеса ASF, и очень похож на права доступа `Master` в настройках конкретного бота (но работающий глобально). Почти всегда вам нужно задать в этом параметре ID вашего основного аккаунта Steam. Права доступа `Master` даёт полный контроль над конкретным ботом, но глобальные команды, такие как `exit`, `restart` или `update` доступны только для `SteamOwnerID`. Это удобно если вы захотите запускать у себя ботов ваших друзей, не давая им при этом контроля над процессом ASF, например не позволяя завершить его командой `exit`. Значение по-умолчанию `` указывает что у процесса ASF нет владельца, то есть никто не сможет использовать глобальные команды. Помните, что **[IPC](https://github.com/JustArchi/ArchiSteamFarm/wiki/IPC-ru-RU)** работает с `SteamOwnerID`, поэтому если вы хотите им пользоваться вам нужно указать здесь правильное значение.

* * *

`SteamProtocols` - параметр типа `byte flags` со значением по-умолчанию `3`. Этот параметр определяет протоколы по которым ASF будет соединяться с серверами Steam, которые задаются следующим образом:

| Значение | Имя       | Описание                                                                                         |
| -------- | --------- | ------------------------------------------------------------------------------------------------ |
|          | None      | Отсутствие протокола                                                                             |
| 1        | TCP       | **[Transmission Control Protocol](https://ru.wikipedia.org/wiki/Transmission_Control_Protocol)** |
| 2        | UDP       | **[User Datagram Protocol](https://ru.wikipedia.org/wiki/UDP)**                                  |
| 4        | WebSocket | **[WebSocket](https://ru.wikipedia.org/wiki/WebSocket)**                                         |

Обратите внимание что это параметр типа `flags`, и следовательно ему может быть присвоена любая комбинация приведенных выше значений. Ознакомьтесь с **[типами параметров в JSON](#Типы-параметров-в-json)** если хотите узнать больше. Если вы не включите ни один флаг, результатом будет вариант `None`, который сам по себе не является верным.

По-умолчанию ASF использует все доступные протоколы в качестве меры борьбы с простоями и другими проблемами Steam. Возможно вы захотите изменить этот параметр если вы хотите ограничить ASF использованием только одного или двух определённых протоколов вместо всех доступных. Такие меры могут понадобиться например если у вас есть брандмауэр на котором разрешён только TCP-трафик и вы не хотите чтобы ASF пытался подключиться по UDP. Однако, если вы не пытаетесь отладить какую-то конкретную проблему, почти всегда будет лучше дать ASF возможность выбрать любой из доступных протоколов, а не только один или два. Если у вас нет **веских** причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

В данный момент этот параметр по умолчанию не включает в себя WebSockets из-за проблемы **[#612](https://github.com/JustArchi/ArchiSteamFarm/issues/612)**.

* * *

`UpdateChannel` - параметр типа `byte` со значением по-умолчанию `1`. Этот параметр задаёт используемый канал обновлений, который будет использоваться либо для авто-обновлений (если `UpdatePeriod` больше ``), либо для оповещения о доступных обновлениях (в противном случае). На данный момент в ASF поддерживается три канала обновлений - `` под названием `None`, `1`, под названием `Stable`, и `2`, под названием `Experimental`. Канал `Stable` это канал обновлений по-умолчанию, который должен использоваться большинством пользователей. Канал `Experimental` в дополнение к версиям канала `Stable` также версии **pre-releases**, предназначенные для продвинутых пользователей и других разработчиков с целью тестирования новых функций, подтверждения исправления ошибок и сбора обратной связи о планируемых улучшениях. **Экспериментальные версии часто включают в себя неисправленные ошибки, недоделанные функции и переписанные реализации**. Если вы не считаете себя продвинутым пользователем, пожалуйста, оставайтесь на канале обновлений по-умолчанию `1` (Stable). Канал `Experimental` предназначен для пользователей, которые знают, как сообщать об ошибках, как работать с проблемами и предоставлять обратную связь - техподдержка для этих версий программы осуществляться не будет. Ознакомьтесь с **[циклом выпуска](https://github.com/JustArchi/ArchiSteamFarm/wiki/Release-cycle-ru-RU)** ASF если хотите узнать больше. Вы можете установить `UpdateChannel` в `` (`None`), если хотите полностью отключить проверку наличия новых версий, хотя это не рекомендуется, кроме случая когда вы не хотите даже получать уведомления о новых версиях. Установка параметра `UpdateChannel` в `` полностью отключит все функции связанные с командой `update`.

* * *

`UpdatePeriod` - параметр типа `byte` со значением по-умолчанию `24`. Этот параметр определяет, как часто ASF будет проверять наличие обновлений. Обновления важны не только для получения новых возможностей и патчей критических уязвимостей, но и для получения исправлений ошибок, улучшения производительности, стабильности и так далее. Если этому параметру присвоено значение больше ``, ASF будет автоматически скачивать, заменять и перезапускать себя (если это разрешено в `AutoRestart`) при наличии обновлений. Для этого ASF будет проверять каждые `UpdatePeriod` часов, нет ли обновлений в нашем репозитории GitHub. Значение `` выключает автоматические обновления, но позволяет вам запускать команду `update` вручную. Возможно вам также будет интересен параметр `UpdateChannel`, которому должен следовать `UpdatePeriod`.

Процесс обновления ASF включает в себя всю структуру каталогов, используемую ASF, за исключением конфигурационных файлов и баз данных в папке `config` - это значит что любые дополнительные файлы, не связанные с ASF, в этих каталогах будут удалены в процессе обновления. Значение по-умолчанию `24` это баланс между излишним количеством проверок и достаточно свежим ASF.

Если у вас нет **веских** причин отключать эту функцию, вам следует оставить авто-обновления включенными с разумной величиной `UpdatePeriod`, **для вашего же блага**. Не только потому, что мы предоставляем техническую поддержку только для последней стабильной версии ASF, но и потому что **мы даём гарантии безопасности только для последней версии**. Если вы используете устаревшую версию ASF - Вы сами по себе, и вам придётся самостоятельно иметь дело с возникающими ошибками, такими как **[зацикливание уведомлений](https://github.com/JustArchi/ArchiSteamFarm/commit/2d767c41aacb33dda35a98fa4b41efb7d33f5ffe)**, которое было вызвано сменой протокола в Steam. Это приводило к тому, что ASF непрерывно флудил в сеть Steam, что могло легко и быстро привести к бану сообщества из-за вероятности **[DoS](https://ru.wikipedia.org/wiki/DoS-атака)**. Автоматические обновления позволяют нам быстро реагировать на такие проблемы, и исправлять проблемы пока они не привели к непредвиденным последствиям, и если вы от них отказываетесь - вы теряете все гарантии безопасности в случае если исполняемый код окажется потенциально опасным, либо для сети Steam, либо (и скорее всего) для вашего аккаунта Steam.

* * *

`WebLimiterDelay` - параметр типа `ushort` со значением по-умолчанию `200`. Этот параметр задаёт минимальную задержку (в миллисекундах), которая должна пройти между двумя последовательными запросами к одному web-сервису Steam. Такие задержки необходимы из-за того, что сервис **[AkamaiGhost](https://www.akamai.com)**, который используется Steam, включает в себя ограничение частоты глобального числа запросов за единицу времени. При обычных условиях довольно сложно получить блокировку akamai, но при высоких нагрузках с большими очередями запросов вполне возможно её срабатывание если мы продолжим слать большое количество запросов за короткий интервал времени.

Значение по-умолчанию установлено исходя из предположения что ASF - единственный инструмент, использующий web-сервисы Steam, в частности `steamcommunity.com`, `api.steampowered.com` и `store.steampowered.com`. Если вы пользуетесь другим инструментом, посылающим запросы к тому же web-сервису вам стоит убедиться, что этот инструмент имеет функционал, схожий с `WebLimiterDelay`, и установить и в этом инструменте и в ASF имеют величину задержки, равную `400`. Это гарантирует вам что ни при каких обстоятельствах вы не пошлёте больше 1 запроса за 200 мс.

В общем случае, уменьшение `WebLimiterDelay` ниже значения по-умолчанию **крайне не рекомендуется**, поскольку это может привести к различным блокировкам по IP, некоторые из которых могут оказаться перманентными. Значение по-умолчанию должно хорошо подойдти для одной копии ASF на сервере, а также при использовании ASF параллельно с обычным клиентом Steam. Оно должно подойти большинство пользователей, и есть смысл только в его увеличении (и никогда - в уменьшении), если кроме ASF вы используете какой-то инструмент посылающий большое количество запросов к web-сервисам которые используются в ASF. Короче говоря, глобальное число всех запросов с одного IP на один домен Steam никогда не должно превышать 1 запрос в 200 мс.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`WebProxy` - параметр типа `string` со значением по-умолчанию `null`. Этот параметр задаёт адрес прокси-сервера который будет использоваться для всех внутренних http и https запросов от `HttpClient` ASF, особенно к сервисам таким как `github.com`, `steamcommunity.com` и `store.steampowered.com`. Проксирование запросов ASF в общем случае не имеет достоинств, однако очень полезно для обхода различных брандмауэров, в частности "Великого китайского файрвола".

Этот параметр задаётся как строка uri:

> Строка URI состоит из схемы (http или https), имени хоста, и необязательного порта. Пример полной строки uri: `"http://contoso.com:8080"`.

Если ваш прокси требует авторизации, возможно вам также понадобиться настроить `WebProxyUsername` и/или `WebProxyPassword`. Если такой необходимости нет, будет достаточно только этого параметра.

На данный момент ASF использует прокси только для `http` и `https` запросов, что **не** включает в себя внутреннее взаимодействие с сетью Steam клиента ASF. Сейчас нет планов для обеспечения такой поддержки, в основном из-за отсутствия такого функционала в **[SK2](https://github.com/SteamRE/SteamKit)**. Если вы хотите чтобы это случилось - начинать надо там.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`WebProxyPassword` - параметр типа `string` со значением по-умолчанию `null`. Этот параметр задаёт пароль, используемый в базовой, дайджест, NTLM и Kerberos авторизации, которая поддерживается заданным в `WebProxy` прокси-сервером. Если ваш прокси не требует учётных данных пользователя, нет необходимости что-то вводить в этом параметре. Использование этого параметра имеет смысл только если задан `WebProxy`, и не имеет никакого эффекта в противном случае.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

`WebProxyUsername` - параметр типа `string` со значением по-умолчанию `null`. Этот параметр задаёт имя пользователя, используемое в базовой, дайджест, NTLM и Kerberos авторизации, которая поддерживается заданным в `WebProxy` прокси-сервером. Если ваш прокси не требует учётных данных пользователя, нет необходимости что-то вводить в этом параметре. Использование этого параметра имеет смысл только если задан `WebProxy`, и не имеет никакого эффекта в противном случае.

Если у вас нет причин редактировать этот параметр, рекомендуется оставить ему значение по-умолчанию.

* * *

**[Вернуться к началу](#Конфигурация)**

* * *

## Конфигурация бота

Как вы уже наверное знаете, у каждого бота должен быть свой файл конфигурации. Пример конфигурационного файла бота вы можете найти в файле `example.json`. Просто **скопируйте** `example.json` в новый файл, переименуйте есть, и у вас получится новый бот. Вам стоит начать с конфигурации вашего **основного** аккаунта, поэтому вы можете назвать новый файл например `primary.json`, `1.json` или `YourNickname.json`.

**Примечание:** Есть несколько имён, которые зарезервированы и не могут быть использованы как имя бота. Это имена **ASF**, **example** и **minimal**. ASF будет игнорировать файлы конфигурации с такими именами. Кроме того, ASF игнорирует конфигурационные файлы, имя которых начинается с точки.

Когда вы определитесь с именем бота, откройте файл и начните конфигурирование. Вы должны увидеть следующую структуру:

```json
{
    "AcceptGifts": false,
    "AutoSteamSaleEvent": false,
    "BotBehaviour": 0,
    "CustomGamePlayedWhileFarming": null,
    "CustomGamePlayedWhileIdle": null,
    "DismissInventoryNotifications": false,
    "Enabled": false,
    "FarmingOrder": 0,
    "FarmOffline": false,
    "GamesPlayedWhileIdle": [],
    "HandleOfflineMessages": false,
    "HoursUntilCardDrops": 3,
    "IdlePriorityQueueOnly": false,
    "IdleRefundableGames": true,
    "LootableTypes": [
        1,
        3,
        5
    ],
    "MatchableTypes": [
        5
    ],
    "PasswordFormat": 0,
    "Paused": false,
    "RedeemingPreferences": 0,
    "SendOnFarmingFinished": false,
    "SendTradePeriod": 0,
    "ShutdownOnFarmingFinished": false,
    "SteamLogin": null,
    "SteamMasterClanID": 0,
    "SteamParentalPIN": "0",
    "SteamPassword": null,
    "SteamTradeToken": null,
    "SteamUserPermissions": {},
    "TradingPreferences": 0,
    "UseLoginKeys": true
}
```

**Совет:** Чтобы бот правильно работал, вам надо отредактировать как минимум параметры `Enabled`, `SteamLogin` и `SteamPassword`. Я также рекомендую взглянуть на некоторые дополнительные настройки вроде `HoursUntilCardDrops`, но это не обязательно. Файл конфигурации ASF довольно обширны, что позволяет вам настроить ботов и ASF как вам нужно, но если вам не нужны все эти дополнительные настройки вам совершенно не обязательно в них углубляться. Именно вам решать насколько простым или сложным должен быть ASF.

* * *

Все параметры описаны ниже:

`AcceptGifts` - параметр типа `bool` со значением по-умолчанию `false`. Если этот параметр включен, ASF будет автоматически принимать и активировать все подарки в Steam, полученные ботом. Это также включает в себя подарки от пользователей, не указанных в `SteamUserPermissions`. Эта возможность рекомендуется только для дополнительных аккаунтов, поскольку весьма вероятно что вы не захотите активировать все подарки, полученные на основной аккаунт. Не забывайте, что подарки полученные по e-mail не направляются в клиент автоматически, поэтому ASF не примет эти подарки (без вашей помощи), поэтому подарки вашим ботам нужно посылать напрямую. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`AutoSteamSaleEvent` - параметр типа `bool` со значением по-умолчанию `false`. Во время зимней и летней распродаж Steam обычно проводит мероприятия, позволяющие получить дополнительные карточки за просмотр списка рекомендаций каждый день, и за голосование в различных номинациях Steam. Если этот параметр включен, ASF будет автоматически проверять списки рекомендаций и номинации Steam каждые 6 часов, и выполнять эти задания при необходимости. Не рекомендуется включать эту функцию если вы хотите выполнять эти задания самостоятельно, обычно эта функция будет иметь смысл только на дополнительных аккаунтах. Кроме того, необходимо чтобы ваш аккаунт имел уровень не менее `8` если вы надеетесь получить карты распродажи за эти задания. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

Обратите внимание, что из-за постоянных проблем Steam, и изменений в заданиях, **мы не гарантируем что эта функция будет правильно работать**, а значит вполне возможен вариант, когда она **не будет работать вообще**. Мы не принимаем **никаких** сообщений об ошибках, и не оказываем техническую поддержку связанную с этой функцией. Она предоставляется абсолютно без гарантий, и вы используете её на свой страх и риск.

* * *

`BotBehaviour` - параметр типа `byte flags` со значением по-умолчанию ``. Этот параметр определяет реакцию бота под управлением ASF на различные события, и задаётся следующим образом:

| Значение | Имя                        | Описание                                                                           |
| -------- | -------------------------- | ---------------------------------------------------------------------------------- |
|          | None                       | Бот не имеет особых реакций, наименее агрессивный режим, используется по умолчанию |
| 1        | RejectInvalidFriendInvites | ASF будет отклонять (а не игнорировать) неверные запросы на добавление в друзья    |
| 2        | RejectInvalidTrades        | ASF будет отклонять (а не игнорировать) неверные предложения обмена                |
| 4        | RejectInvalidGroupInvites  | ASF будет отклонять (а не игнорировать) неверные приглашения в группы              |

Обратите внимание что это параметр типа `flags`, и следовательно ему может быть присвоена любая комбинация приведенных выше значений. Ознакомьтесь с **[типами параметров в JSON](#Типы-параметров-в-json)** если хотите узнать больше. Если вы не включите никаких флагов, будет использоваться вариант `None`.

В общем случае вы можете настроить этот параметр если хотите чтобы ASF выполнял за вас некие автоматические действия по отношению к нежелаемым событиям, это обычно ожидается от дополнительных, но не от основного аккаунта. Поэтому в основном имеет смысл менять этот параметр для дополнительных аккаунтов, хотя вы конечно же можете настроить его и на основном.

Нормальное (`None`) поведение ASF подразумевает автоматизацию только нужных пользователю вещей (например, фарм карточек, или обработка обменов по правилам `SteamTradeMatcher`, если это задано в `TradingPreferences`). Это наименее агрессивный режим, и он подойдёт большинству пользователей, поскольку у них остаётся полный контроль над аккаунтом, и они могут сами решать, выполнять ли какие-то нестандартные взаимодействия, или нет.

Неверный запрос на добвление в друзья - это такой, который пришёл не от пользователя с правами `FamilySharing` или выше (задаётся в параметре `SteamUserPermissions`). ASF в нормальном режиме игнорирует такие запросы, как и ожидается, давая вам выбор принимать их или нет. Значение `RejectInvalidFriendInvites` приведёт к тому, что такие запросы будут автоматически отклоняться, что практически исключит возможность другим людям добавить вас в друзья (поскольку ASF будет отклонять все их запросы, кроме людей заданных в `SteamUserPermissions`). Если вы не хотите целиком заблокировать запросы на добавление в друзья, не используйте это значение.

Неверное предложение обмена это такое предложение, которое не будет автоматически принято модулем ASF. Вы можете прочесть об этом больше в разделе "**[Обмены](https://github.com/JustArchi/ArchiSteamFarm/wiki/Trading-ru-RU)**", который посвящен непосредственно тому, какие обмены ASF будет принимать автоматически. Правильные обмены также определяются и другими настройками, особенно `TradingPreferences`. Значение `RejectInvalidTrades` приведёт к тому, что все неверные предложения будут отклонены, а не проигнорированы. Если вы не хотите запретить все обмены, кроме тех которые автоматически обрабатывает ASF вам не следует использовать этот значение.

Неверное приглашение в группу это приглашение которое пришло не от группы `SteamMasterClanID`. ASF в нормальном режиме, как и ожидается, будет игнорировать такие приглашения, позволяя вам самостоятельно решить, хотите ли вы вступать в конкретную группу Steam или нет. Значение `RejectInvalidGroupInvites` приведёт к тому что все эти приглашения в группы будут автоматически отклонены, делая попросту невозможным пригласить вас в группу, отличную от `SteamMasterClanID`. Если вы не хотите запретить все приглашения в группы, вам не следует использовать это значение.

Если вы не уверены, как настроить этот параметр, лучше оставить ему значение по-умолчанию.

* * *

`CustomGamePlayedWhileFarming` - параметр типа `string` со значением по-умолчанию `null`. Во время фарма ASF может показывать статус "В сторонней игре: `CustomGamePlayedWhileFarming`" вместо названия текущей игры. Это может оказаться полезным если вы хотите дать знать своим друзьям что вы фармите, но не хотите использовать функцию `FarmOffline`. Обратите внимание, ASF не может гарантировать порядок отображения статусов в Steam, поэтому этот статус может как работать так и не работать правильно. Значение по-умолчанию `null` выключает эту функцию.

* * *

`CustomGamePlayedWhileIdle` - параметр типа `string` со значением по-умолчанию `null`. Аналогично `CustomGamePlayedWhileFarming`, но для ситуации когда ASF нечего делать (все карточки на аккаунте уже выбиты). Значение по-умолчанию `null` выключает эту функцию.

* * *

`DismissInventoryNotifications` - параметр типа `bool` со значением по-умолчанию `false`. Каждое выпадение карточки вызывает уведомление о новом предмете в инвентаре - Steam сообщает вам, что вы получили новые предметы. Это может быстро надоесть, и не несёт особого смысла, поэтому ASF может автоматически отмечать эти уведомления как просмотренные. Если вы включите этот параметр, ASF будет автоматически ставить отметку о прочтении на всех уведомлениях о получении новых предметов - это также включает в себя предметы, полученные с помощью обмена или иным способом. Конечно, этот параметр влияет только на уведомления о новых предметах, поэтому все другие виды уведомлений, например уведомления о комментариях в профиле, останутся нетронутыми.

* * *

`Enabled` - параметр типа `bool` со значением по-умолчанию `false`. Этот параметр определяет, что бот включен. Включенный бот (`true`) будет автоматически запускаться при запуске ASF, а выключенный бот (`false`) необходимо запускать вручную. По умолчанию каждый бот выключен, поэтому вы вероятно захотите переключить этот параметр в `true` на всех ботах, которые должны запускаться автоматически.

* * *

`FarmingOrder` - параметр типа `byte` со значением по-умолчанию ``. Этот параметр задаёт **предпочитаемый** порядок фарма в ASF. На данный момент вам доступны следующие варианты порядка фарма:

| Значение | Имя                       | Описание                                                                                |
| -------- | ------------------------- | --------------------------------------------------------------------------------------- |
|          | Unordered                 | Без сортировки, незначительно улучшает производительность ЦПУ                           |
| 1        | AppIDsAscending           | Пытаться сначала фармить игры с самым маленьким `appID`                                 |
| 2        | AppIDsDescending          | Пытаться сначала фармить игры с самым большим `appID`                                   |
| 3        | CardDropsAscending        | Пытаться сначала фармить игры с наименьшим количеством доступных для выпадения карточек |
| 4        | CardDropsDescending       | Пытаться сначала фармить игры с наибольшим количеством доступных для выпадения карточек |
| 5        | HoursAscending            | Пытаться сначала фармить игры с наименьшим количеством наигранных часов                 |
| 6        | HoursDescending           | Пытаться сначала фармить игры с наибольшим количеством наигранных часов                 |
| 7        | NamesAscending            | Пытаться фармить игры в алфавитном порядке, начиная с A                                 |
| 8        | NamesDescending           | Пытаться фармить игры в обратном алфавитном порядке, начиная с Z                        |
| 9        | Random                    | Пытаться фармить игры в случайном порядке                                               |
| 10       | BadgeLevelsAscending      | Пытаться сначала фармить игры с самым маленьким уровнем значка                          |
| 11       | BadgeLevelsDescending     | Пытаться сначала фармить игры с самым большим уровнем значка                            |
| 12       | RedeemDateTimesAscending  | Пытаться сначала фармить игры, которые добавлены на аккаунт раньше других               |
| 13       | RedeemDateTimesDescending | Пытаться сначала фармить игры, которые добавлены на аккаунт позже других                |

Обратите внимание на слово "пытаться" в описаниях выше - реальный порядок сильно зависит от выбранного **[алгоритма фарма карточек](https://github.com/JustArchi/ArchiSteamFarm/wiki/Performance-ru-RU)** и сортировка будет влиять только на результаты, которые ASF посчитает эффективными с точки зрения производительности. Например, при выбранном алгоритме `Simple`, выбранный `FarmingOrder` будет полностью соблюдаться в текущей сессии фарма (поскольку все игры в данном случае обрабатываются одинаково), а при алгоритме `Complex` реальный порядок зависит от наигранных часов и только потом сортируется согласно выбранному `FarmingOrder`. Это приведёт к разным результатам, поскольку игры в которых наиграно более `HoursUntilCardDrops` часов будут иметь приоритет больше, чем игры, в которых наиграно меньше `HoursUntilCardDrops` часов. Это означает, что ASF будет фармить игры игры, в которых наиграно более `HoursUntilCardDrops` в порядке установленном `FarmingOrder`, а затем адаптировать `FarmingOrder` к следующей пачке игр. Следовательно, этот параметр - это только **пожелание**, которое ASF будет учитывать пока оно не влияет негативно на производительность (в противном случае соображения производительности будут иметь приоритет перед `FarmingOrder`).

Кроме того, имеется очередь фарма, которой можно управлять с помощью **[команды](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands-ru-RU)** `iq`. Если она используется, порядок фарма формируется сначала из соображений производительности, затем с учётом очереди фарма, и наконец согласно `FarmingOrder`.

* * *

`FarmOffline` - параметр типа `bool` со значением по-умолчанию `false`. Фарм оффлайн чрезвычайно полезен для основных аккаунтов. Как вы уже должны знать, фарм игры отображает ваш статус в Steam как "В игре: XXX", что может ввести в заблуждение ваших друзей, которые подумают что вы играете в игру, которую вы просто фармите. Фарм оффлайн решает этот проблему - ваш аккаунт никогда не будет отображаться как "в игре", когда вы фармите карточки в ASF. Это возможно благодаря тому, что ASF может не входить в сообщество Steam но при этом продолжать работу, поэтому он запускает игры, но в режиме "наполовину оффлайн". Помните, что игры запущенные в режиме фарма оффлайн всё равно учитываются в наигранное время, и отображаются в разделе "Недавняя активность" на странице вашего профиля. В добавок к этому, эта функция также полезна если вы хотите получать уведомления и непрочитанные сообщения когда у вас запущен ASF и в то же время не запущен клиент Steam. Поскольку ASF работает как клиент Steam, вы не будете получать уведомления о пропущенных сообщениях из-за того что ваш аккаунт считается онлайн и все сообщения получает ASF. Фарм оффлайн очень полезен в этой ситуации, поскольку ваш аккаунт считается оффлайн даже при запущенном ASF (в режиме фарма оффлайн), и вы получите уведомления о пропущенных сообщениях когда вернётесь. Кроме того, боты с включенным `FarmOffline` не могут (напрямую) реагировать на команды, что важно если вы решите использовать эту функцию для дополнительных аккаунтов (см. `HandleOfflineMessages`). Если вы не уверены, нужна ли вам эта функция, рекомендуется использовать значение `true` для основных аккаунтов и `false` для остальных.

* * *

`GamesPlayedWhileIdle` - параметр типа `HashSet<uint>` с пустым значением по-умолчанию. If ASF has nothing to farm it can play your specified steam games (`appID`s) instead. Playing games in such manner increases your "hours played" of those games, but nothing else apart of it. This feature can be enabled at the same time with `CustomGamePlayedWhileIdle` in order to play your selected games while showing custom status in Steam network, but in this case, like in `CustomGamePlayedWhileFarming` case, the actual display order is not guaranteed. Please note that Steam allows ASF to play only up to `32` `appID`s, therefore if you put more games than that, only first `32` will be respected (and extra ones being ignored).

* * *

`HandleOfflineMessages` - параметр типа `bool` со значением по-умолчанию `false`. When `FarmOffline` feature is enabled, bot is not able to receive commands in usual way, as it's not logged into Steam Community. To overcome this problem, ASF has also support for Steam offline messages that can be activated here. If you use `FarmOffline` on your alt accounts, you can consider switching this property to `true` in order to still be able to send commands to your offline bots, and receive responses. Keep in mind that this feature is based on offline steam messages, and receiving them automatically marks them as read, therefore this option is NOT recommended for primary accounts, as ASF will be forced to read and mark all offline messages as received in order to listen for offline commands - this affects also offline messages from your friends that are not ASF commands.

It's also worth mentioning that this option is basically a hack that might, or might not work correctly, based on whether Steam network actually will save those unread messages as offline messages in the first place. We've already seen many situations when it did not, so it's entirely possible that your bot won't receive your commands regardless, unless you disable `FarmOffline` altogether. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`HoursUntilCardDrops` - параметр типа `byte` со значением по-умолчанию `3`. This property defines if account has card drops restricted, and if yes, for how many initial hours. Restricted card drops means that account is not receiving any card drops from given game until the game is played for at least `HoursUntilCardDrops` hours. Unfortunately there is no magical way to detect that, so ASF relies on you. This property affects **[cards farming algorithm](https://github.com/JustArchi/ArchiSteamFarm/wiki/Performance)** that will be used. Setting this property properly will maximize profits and minimize time required for cards to be farmed. Remember that there is no obvious answer whether you should use one or another value, since it fully depends on your account. It seems that older accounts which never asked for refund have unrestricted card drops, so they should use a value of ``, while new accounts and those who did ask for refund have restricted card drops with a value of `3`. This is however only theory, and should not be taken as a rule. The default value for this property was set based on "lesser evil" and majority of use cases.

* * *

`IdlePriorityQueueOnly` - параметр типа `bool` со значением по-умолчанию `false`. This property defines if ASF should consider for automatic idling only apps that you added yourself to priority idling queue available with `iq` **[commands](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands)**. When this option is enabled, ASF will skip all `appIDs` that are missing on the list, effectively allowing you to cherry-pick games for automatic ASF idling. Keep in mind that if you didn't add any games to the queue then ASF will act as if there is nothing to idle on your account. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`IdleRefundableGames` - параметр типа `bool` со значением по-умолчанию `true`. This property defines if ASF is permitted to idle games that are still refundable. A refundable game is a game that we bought in last 2 weeks through Steam Store and we didn't play it for longer than 2 hours yet, as stated **[here](https://store.steampowered.com/steam_refunds)**. By default when this option is set to `true`, ASF ignores Steam refunds entirely and idles everything, as most people expect. However, you can change this option to `false` if you want to ensure that ASF won't idle any of your refundable games too soon, allowing you to evaluate those games yourself and refund if needed without worrying about ASF affecting playtime negatively. Please note that if you disable this option then games you purchased from Steam Store won't be idled by ASF for up to 14 days since redeem date. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `true`.

* * *

`LootableTypes` - параметр типа `HashSet<byte>` со значением по-умолчанию `1, 3, 5`. This property defines ASF behaviour when looting - both manual and automatic. ASF will ensure that only items from `LootableTypes` will be included in a trade offer, therefore this property allows you to choose what you want to receive in a trade offer that is being sent to you.

| Значение | Имя               | Описание                                                                  |
| -------- | ----------------- | ------------------------------------------------------------------------- |
|          | Unknown           | Every type that doesn't fit in any of the below                           |
| 1        | BoosterPack       | Unpacked booster pack                                                     |
| 2        | Emoticon          | Смайлики, используемые в чате Steam                                       |
| 3        | FoilTradingCard   | Foil variant of `TradingCard`                                             |
| 4        | ProfileBackground | Фоны, используемые в вашем профиле Steam                                  |
| 5        | TradingCard       | Коллекционные карточки Steam, используемые для создания значков (обычных) |
| 6        | SteamGems         | Самоцветы и мешки самоцветов, используемые для создания наборов карточек  |

Please note that regardless of the settings above, ASF will only ask for Steam (`appID` of 753) community (`contextID` of 6) items, so all game items, gifts and likewise, are excluded from the trade offer by definition.

Default ASF setting is based on most common usage of the bot, with looting only booster packs, and trading cards (including foils). The property defined here allows you to alter that behaviour in whatever way that satisfies you. Please keep in mind that all types not defined above will show as `Unknown` type, which is especially important when Valve releases some new Steam item, that will be marked as `Unknown` by ASF as well, until it's added here (in the future release). That's why in general it's not recommended to include `Unknown` type in your `LootableTypes`, unless you know what you're doing, and you also understand that ASF will send your entire inventory in a trade offer if Steam Network gets broken again and reports all your items as `Unknown`. My strong suggestion is to not include `Unknown` type in the `LootableTypes`, even if you expect to loot everything.

* * *

`MatchableTypes` - параметр типа `HashSet<byte>` со значением по-умолчанию `5`. This property defines which Steam item types are permitted to be matched when `SteamTradeMatcher` option in `TradingPreferences` is enabled. Types are defined as below:

| Значение | Имя               | Описание                                                                  |
| -------- | ----------------- | ------------------------------------------------------------------------- |
|          | Unknown           | Every type that doesn't fit in any of the below                           |
| 1        | BoosterPack       | Unpacked booster pack                                                     |
| 2        | Emoticon          | Смайлики, используемые в чате Steam                                       |
| 3        | FoilTradingCard   | Foil variant of `TradingCard`                                             |
| 4        | ProfileBackground | Фоны, используемые в вашем профиле Steam                                  |
| 5        | TradingCard       | Коллекционные карточки Steam, используемые для создания значков (обычных) |
| 6        | SteamGems         | Самоцветы и мешки самоцветов, используемые для создания наборов карточек  |

Of course, types that you should use for this property typically include only `2`, `3`, `4` and `5`, as only those types are supported by STM. Please note that **ASF is not a trading bot** and **will NOT care about price or rarity**, which means that if you use it e.g. with `Emoticon` type, then ASF will be happy to trade your 2x rare emoticon for 1x rare 1x common, as that makes progress towards badge (in this case emoticons) completion. Please evaluate twice if you're fine with that. Unless you know what you're doing, you should keep it with default value of `5`.

* * *

`PasswordFormat` - параметр типа `byte` со значением по-умолчанию ``. This property defines the format of `SteamPassword` property, and currently supports - `` for `PlainText`, `1` for `AES` and `2` for `ProtectedDataForCurrentUser`. Please refer to **[Security](https://github.com/JustArchi/ArchiSteamFarm/wiki/Security)** section if you want to learn more, as you'll need to ensure that `SteamPassword` property indeed includes password in matching `PasswordFormat`. Unless you know what you're doing, you should keep it with default value of ``.

* * *

`Paused` - параметр типа `bool` со значением по-умолчанию `false`. This property defines initial state of `CardsFarmer` module. With default value of `false`, bot will automatically start farming when it's started, either because of `Enabled` or `start` command. Switching this property to `true` should be done only if you want to manually `resume` automatic farming process, for example because you want to use `play` all the time and never use automatic `CardsFarmer` module - this works exactly the same as `pause` **[command](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands)**. Если вы не уверены, нужна ли вам эта возможность, оставьте её равной значению по-умолчанию `false`.

* * *

`RedeemingPreferences` - параметр типа `byte flags` со значением по-умолчаниюtype ``. This property defines ASF behaviour when redeeming cd-keys, and is defined as below:

| Значение | Имя              | Описание                                                                       |
| -------- | ---------------- | ------------------------------------------------------------------------------ |
|          | None             | No redeeming preferences, typical                                              |
| 1        | Forwarding       | Forward keys unavailable to redeem to other bots                               |
| 2        | Distributing     | Distribute all keys among itself and other bots                                |
| 4        | KeepMissingGames | Keep keys for (potentially) missing games when forwarding, leaving them unused |

Обратите внимание что это параметр типа `flags`, и следовательно ему может быть присвоена любая комбинация приведенных выше значений. Ознакомьтесь с **[типами параметров в JSON](#Типы-параметров-в-json)** если хотите узнать больше. Если вы не включите никаких флагов, будет использоваться вариант `None`.

`Forwarding` will cause bot to forward a key that is not possible to redeem, to another connected and logged on bot that is missing that particular game (if possible to check). The most common situation is forwarding `AlreadyPurchased` game to another bot that is missing that particular game, but this option also covers other scenarios, such as `DoesNotOwnRequiredApp`, `RateLimited` or `RestrictedCountry`.

`Distributing` will cause bot to distribute all received keys among itself and other bots. This means that every bot will get a single key from the batch. Typically this is used only when you're redeeming many keys for the same game, and you want to evenly distribute them among your bots, as opposed to redeeming keys for various different games. This feature makes no sense if you're redeeming only one key in a single `redeem` action (as there are no extra keys to be distributed).

`KeepMissingGames` will cause bot to skip `Forwarding` when we can't be sure if key being redeemed is in fact owned by our bot, or not. This basically means that `Forwarding` will apply **only** to `AlreadyPurchased` keys, instead of covering also other cases such as `DoesNotOwnRequiredApp`, `RateLimited` or `RestrictedCountry`. Typically you might want to use this option on primary account, to ensure that keys being redeemed on it won't be forwarded further if your bot for example becomes temporarily `RateLimited`. As you can guess from the description, this field has absolutely no effect if `Forwarding` is not enabled.

Enabling both `Forwarding` and `Distributing` will add distributing feature on top of forwarding one, which makes ASF trying to redeem one key on all bots firstly (forwarding) before moving to the next one (distributing). Typically you want to use this option only when you want `Forwarding`, but with altered behaviour of switching the bot on key being used, instead of always going in-order with every key (which would be `Forwarding` alone). This behaviour can be beneficial if you know that majority or even all of your keys are tied to the same game, because in this situation `Forwarding` alone would try to redeem everything on one bot firstly (which makes sense if your keys are for unique games), and `Forwarding` + `Distributing` will switch the bot on the next key, "distributing" the task of redeeming new key onto another bot than the initial one (which makes sense if keys are for the same game, skipping one pointless attempt per key).

The actual bots order for all of the redeeming scenarios is alphabetical, excluding bots that are unavailable (not connected, stopped or likewise). Please keep in mind that there is per-IP and per-account hourly limit of redeeming tries, and every redeem try that didn't end with `OK` contributes to failed tries. ASF will do its best to minimize number of `AlreadyPurchased` failures, e.g. by trying to avoid forwarding a key to another bot that already owns that particular game, but it's not always guaranteed to work due to how Steam is handling licenses. Using redeeming flags such as `Forwarding` or `Distributing` will always increase your likehood to hit `RateLimited`.

Also keep in mind that you can't forward or distribute keys to bots that you do not have access to. This should be obvious, but ensure that you're at least `Operator` of all the bots you want to include in your redeeming process, for example with `status ASF` **[command](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands)**.

* * *

`SendOnFarmingFinished` - параметр типа `bool` со значением по-умолчанию `false`. When ASF is done with farming given account, it can automatically send steam trade containing everything farmed up to this point to user with `Master` permission, which is very convenient if you don't want to bother with trades yourself. This option works the same as `loot` command, therefore keep in mind that it requires user with `Master` permission set, you might also require valid `SteamTradeToken`, including using an account that is actually eligible for trading. In addition to initiating `loot` after finishing farming, ASF will also initiate `loot` on each new items notification (when not farming), and after completing each trade that results in new items (always) when this option is active. This is especially useful for "forwarding" items received from other people to our account. It's strongly recommended to use this feature together with **[ASF 2FA](https://github.com/JustArchi/ArchiSteamFarm/wiki/Escrow)** being set, as there is no point in sending automatic trades if you need to manually confirm them. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `false`.

* * *

`SendTradePeriod` - параметр типа `byte` со значением по-умолчанию ``. This property works very similar to `SendOnFarmingFinished` property, with one difference - instead of sending trade when farming is done, we can also send it every `SendTradePeriod` hours, regardless of how much we have to farm left. This is useful if you want to `loot` your alt accounts on usual basis instead of waiting for it to finish farming. Default value of `` disables this feature, if you want your bot to send you trade e.g. every day, you should put `24` here. It's strongly recommended to use this feature together with **[ASF 2FA](https://github.com/JustArchi/ArchiSteamFarm/wiki/Escrow)** being set, as there is no point in sending automatic trades if you need to manually confirm them. If you're not sure how to set this property, leave it with default value of ``.

* * *

`ShutdownOnFarmingFinished` - параметр типа `bool` со значением по-умолчанию `false`. ASF is "occupying" an account for the whole time of process being active. When given account is done with farming, ASF periodically checks it (every `IdleFarmingPeriod` hours), if perhaps some new games with steam cards were added in the meantime, so it can resume farming of that account without a need to restart the process. This is useful for majority of people, as ASF can automatically resume farming when needed. However, you may actually want to stop the process when given account is fully farmed, you can achieve that by setting this property to `true`. When enabled, ASF will proceed with logging off when account is fully farmed, which means that it won't be periodically checked or occupied anymore. You should decide yourself if you prefer ASF to work on given bot instance for the whole time, or if perhaps ASF should stop it when farming process is done. When all accounts are stopped and process is not running in `--process-required` **[mode](https://github.com/JustArchi/ArchiSteamFarm/wiki/Command-Line-Arguments)**, ASF will shutdown as well. Если вы не уверены как настроить этот параметр - оставьте ему значение по-умолчанию `false`.

* * *

`SteamLogin` - параметр типа `string` со значением по-умолчанию `null`. This property defines your steam login - the one you use for logging in to steam. In addition to defining steam login here, you may also keep default value of `null` if you want to enter your steam login on each ASF startup instead of putting it in the config. This may be useful for you if you don't want to save sensitive data in config file.

* * *

`SteamMasterClanID` - параметр типа `ulong` со значением по-умолчанию ``. This property defines the steamID of the steam group that bot should automatically join, including group chat. You can check steamID of your group by navigating to its **[page](https://steamcommunity.com/groups/ascfarm)**, then adding `/memberslistxml/?xml=1` to the end of the link, so the link will look like **[this](https://steamcommunity.com/groups/ascfarm/memberslistxml/?xml=1)**. Then you can get steamID of your group from the result, it's in `<groupID64>` tag. In above example it would be `103582791440160998`. If you don't have any "farm group" for your bots, you should keep it at default.

* * *

`SteamParentalPIN` - параметр типа `string` со значением по-умолчанию ``. This property defines your steam parental PIN. ASF requires an access to resources protected by steam parental, therefore if you use that feature, you need to provide ASF with parental unlock PIN, so it can operate normally. Default value of `` means that there is no steam parental PIN required to unlock this account, and this is probably what you want if you don't use steam parental functionality. In addition to defining steam parental PIN here, you may also use value of `null` if you want to enter your steam parental PIN on each ASF startup instead of putting it in the config. This may be useful for you if you don't want to save sensitive data in config file.

* * *

`SteamPassword` - параметр типа `string` со значением по-умолчанию `null`. This property defines your steam password - the one you use for logging in to steam. In addition to defining steam password here, you may also keep default value of `null` if you want to enter your steam password on each ASF startup instead of putting it in the config. This may be useful for you if you don't want to save sensitive data in config file.

* * *

`SteamTradeToken` - параметр типа `string` со значением по-умолчанию `null`. When you have your bot on your friend list, then bot can send a trade to you right away without worrying about trade token, therefore you can leave this property at default value of `null`. If you however decide to NOT have your bot on your friend list, then you will need to generate and fill a trade token as the user that this bot is expecting to send trades to. In other words, this property should be filled with trade token of the account that is defined with `Master` permission in `SteamUserPermissions` of **this** bot instance.

In order to find your token, as logged in user with `Master` permission, navigate **[here](https://steamcommunity.com/my/tradeoffers/privacy)** and take a look at your trade URL. The token we're looking for is made out of 8 characters after `&token=` part in your trade URL. You should copy and put those 8 characters here, as `SteamTradeToken`. Do not include whole trading URL, neither `&token=` part, only token itself.

* * *

`SteamUserPermissions` - параметр типа `Dictionary<ulong, byte>` с пустым значением по-умолчанию. This property is a dictionary property which maps given Steam user identified by his 64-bit steam ID, to `byte` number that specifies his permission in ASF instance. Currently available bot permissions in ASF are defined as:

| Значение | Имя           | Описание                                                                                                                                                                                           |
| -------- | ------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|          | None          | No permission, this is mainly a reference value that is assigned to steam IDs missing in this dictionary - there is no need to define anybody with this permission                                 |
| 1        | FamilySharing | Provides minimum access for family sharing users. Once again, this is mainly a reference value since ASF is capable of automatically discovering steam IDs that we permitted for using our library |
| 2        | Operator      | Provides basic access to given bot instances, mainly adding licenses and redeeming keys                                                                                                            |
| 3        | Master        | Provides full access to given bot instance                                                                                                                                                         |

In short, this property allows you to handle permissions for given users. Permissions are important mainly for access to ASF **[commands](https://github.com/JustArchi/ArchiSteamFarm/wiki/Commands)**, but also for enabling many ASF features, such as accepting trades. For example you might want to set your own account as `Master`, and give `Operator` access to 2-3 of your friends so they can easily redeem keys for your bot with ASF, while **not** being eligible e.g. for stopping it. Thanks to that you can easily assign permissions to given users and let them use your bot to some specified by you degree.

We recommend to set exactly one user as `Master`, and any amount you wish as `Operator`s and below. While it's technically possible to set multiple `Master`s and ASF will work correctly with them, for example by accepting all of their trades sent to the bot, ASF will use only one of them (with lowest steam ID) for every action that requires a single target, for example a `loot` request, so also properties like `SendOnFarmingFinished` or `SendTradePeriod`. If you perfectly understand those limitations, especially the fact that `loot` request will always send items to the `Master` with lowest steam ID, regardless of the `Master` that actually executed the command, then you can define multiple users with `Master` permission here, but we still recommend a single master scheme - multiple masters scheme is discouraged setup that is not supported.

It's nice to note that there is one more extra `Owner` permission, which is declared as `SteamOwnerID` global config property. You can't assign `Owner` permission to anybody here, as `SteamUserPermissions` property defines only permissions that are related to the bot instance, and not ASF as a process.

* * *

`TradingPreferences` - параметр типа `byte flags` со значением по-умолчанию ``. This property defines ASF behaviour when in trading, and is defined as below:

| Значение | Имя                 | Описание                                                                                                                                                                     |
| -------- | ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
|          | None                | No trading preferences - accepts only `Master` trades                                                                                                                        |
| 1        | AcceptDonations     | Accepts trades in which we're not losing anything                                                                                                                            |
| 2        | SteamTradeMatcher   | Accepts dupes-matching **[STM](https://www.steamtradematcher.com)**-like trades. Visit **[trading](https://github.com/JustArchi/ArchiSteamFarm/wiki/Trading)** for more info |
| 4        | MatchEverything     | Requires `SteamTradeMatcher` to be set, and in combination with it - also accepts bad trades in addition to good and neutral ones                                            |
| 8        | DontAcceptBotTrades | Doesn't automatically accept `loot` trades from other bot instances                                                                                                          |

Обратите внимание что это параметр типа `flags`, и следовательно ему может быть присвоена любая комбинация приведенных выше значений. Ознакомьтесь с **[типами параметров в JSON](#Типы-параметров-в-json)** если хотите узнать больше. Если вы не включите никаких флагов, будет использоваться вариант `None`.

For further explanation of ASF trading logic, and description of every available flag, please visit **[Trading](https://github.com/JustArchi/ArchiSteamFarm/wiki/Trading)** section.

* * *

`UseLoginKeys` - параметр типа `bool` со значением по-умолчанию `true`. This property defines if ASF should use login keys mechanism for this Steam account. Login keys mechanism works very similar to official Steam client's "remember me" option, which makes it possible for ASF to store and use temporary one-time use login key for next logon attempt, effectively skipping a need of providing password, Steam Guard or 2FA code as long as our login key is valid. Login key is stored in `BotName.db` file and updated automatically. This is why you don't need to provide password/SteamGuard/2FA code after logging in successfully with ASF just once.

Login keys are used by default for your convenience, so you don't need to input `SteamPassword`, SteamGuard or 2FA code (when not using **[ASF 2FA](https://github.com/JustArchi/ArchiSteamFarm/wiki/Escrow)**) on each login. It's also superior alternative since login key can be used only for a single time and does not reveal your original password in any way. Exactly the same method is being used by your original Steam client, which saves your account name and login key for your next logon attempt, effectively being the same as using `SteamLogin` with `UseLoginKeys` and empty `SteamPassword` in ASF.

However, some people might be concerned even about this little detail, therefore this option is available here for you if you'd like to ensure that ASF won't store any kind of token that would allow resuming previous session after being closed, which will result in full authentication being mandatory on each login attempt. Disabling this option will work exactly the same as not checking "remember me" in official Steam client. Unless you know what you're doing, you should keep it with default value of `true`.

**[Вернуться к началу](#Конфигурация)**

* * *

## Файловая структура

ASF is using quite simple file structure.

    ├── config
    │     ├── ASF.json
    │     ├── ASF.db
    │     ├── Bot1.json
    │     ├── Bot1.db
    │     ├── Bot1.bin
    │     ├── Bot2.json
    │     ├── Bot2.db
    │     ├── Bot2.bin
    │     └── ...
    ├── ArchiSteamFarm.dll
    ├── log.txt
    └── ...
    

In order to move ASF to new location, for example another PC, it's enough to move/copy `config` directory alone, and that's the recommended way of doing any form of "ASF backups".

`log.txt` file holds the log generated by your last ASF run. This file doesn't contain any sensitive information, and is extremely useful when it comes to issues, crashes or simply as an information to you what happened in last ASF run. We will very often ask about for file if you run into issues or bugs. ASF automatically manages this file for you, but you can further tweak ASF **[logging](https://github.com/JustArchi/ArchiSteamFarm/wiki/Logging)** module if you're advanced user.

`config` directory is the place that holds configuration for ASF, including all of its bots.

`ASF.json` is a global ASF configuration file. This config is used for specifying how ASF behaves as a process, which affects all of the bots and program itself. You can find global properties there, such as ASF process owner, auto-updates or debugging.

`BotName.json` is a config of given bot instance. This config is used for specifying how given bot instance behaves, therefore those settings are specific to that bot only and not shared across other ones. This allows you to configure bots with various different settings and not necessarily all of them working in exactly the same way.

Apart from config files, ASF also uses `config` directory for storing databases.

`ASF.db` is a global ASF database file. It acts as a global persistent storage and is used for saving various information related to ASF process, such as IPs of local Steam servers. **You should not edit this file**.

`BotName.db` is a database of given bot instance. This file is used for storing crucial data about given bot instance in persistent storage, such as login keys or ASF 2FA. **You should not edit this file**.

`BotName.bin` is a special file of given bot instance, which holds information about Steam sentry hash. Sentry hash is used for authenticating using `SteamGuard` mechanism, very similar to Steam `ssfn` file. **You should not edit this file**.

`BotName.keys` is a special file that can be used for importing keys into **[background games redeemer](https://github.com/JustArchi/ArchiSteamFarm/wiki/Background-games-redeemer)**. It's not mandatory and not generated, but recognized by ASF. This file is automatically deleted after keys are successfully imported.

`BotName.maFile` is a special file that can be used for importing **[ASF 2FA](https://github.com/JustArchi/ArchiSteamFarm/wiki/Escrow)**. It's not mandatory and not generated, but recognized by ASF if your `BotName` does not use ASF 2FA yet. This file is automatically deleted after ASF 2FA is successfully imported.

**[Вернуться к началу](#Конфигурация)**

* * *

## Типы параметров в JSON

Every configuration property has its type. Type of the property defines values that are valid for it. You can only use values that are valid for given type - if you use invalid value, then ASF won't be able to parse your config.

**We strongly recommend to use ConfigGenerator for generating configs** - it handles most of the low-level stuff (such as types validation) for you, so you only need to input proper values, and you also don't need to understand variable types specified below. This section is mainly for people generating/editing configs manually, so they know what values they can use.

Types used by ASF are native C# types, which are specified below:

* * *

`bool` - Boolean type accepting only `true` and `false` values.

Example: `"Enabled": true`.

* * *

`byte` - Unsigned byte type, accepting only integers from `` to `255` (inclusive).

Example: `"FarmingOrder": 1`.

* * *

`uint` - Unsigned integer type, accepting only integers from `` to `4294967295` (inclusive).

* * *

`ulong` - Unsigned long integer type, accepting only integers from `` to `18446744073709551615` (inclusive).

Example: `"SteamMasterClanID": 103582791440160998`

* * *

`string` - String type, accepting any sequence of characters, including empty sequence `""` and `null`. Both empty sequence as well as `null` value is treated the same by ASF, so it's up to your preference which one you want to use.

Examples: `"SteamLogin": null`, `"SteamLogin": ""`, `"SteamLogin": "MyAccountName"`

* * *

`HashSet<valueType>` - Collection (set) of unique values in given `valueType`. In JSON, it's defined as array of elements in given `valueType`.

Example for `HashSet<uint>`: `"Blacklist": [267420, 303700, 335590]`

* * *

`Dictionary<keyType, valueType>` - A map that maps a key specified in its `keyType`, to value specified in its `valueType`. In JSON, it's defined as an object with key-value pairs. Keep in mind that `keyType` is always quoted in this case, even if it's value type such as `ulong`.

Example for `Dictionary<ulong, byte>`: `"SteamUserPermissions": { "76561198174813138": 3, "76561198174813137": 1 }`

* * *

`flags` - Flags attribute combines several different properties into one final value by applying bitwise operations. This allows you to choose any possible combination of various different allowed values at the same time. The final value is constructed as a sum of values of all enabled options.

For example, given following values:

| Значение | Имя  |
| -------- | ---- |
|          | None |
| 1        | A    |
| 2        | B    |
| 4        | C    |

Using `B + C` would result in value of `6`, using `A + C` would result in value of `5`, using `C` would result in value of `4` and so on. This allows you to create any possible combination of enabled values - if you decided to enable all of them, making `None + A + B + C`, you'd get value of `7`. Also notice that flag with value of `` is enabled by definition in all other available combinations, therefore very often it's a flag that doesn't enable anything specifically (such as `None`).

So as you can see, in above example we have 3 available flags to switch on/off (`A`, `B`, `C`), and 8 possible values overall (`None -> 0`, `A -> 1`, `B -> 2`, `A+B -> 3`, `C -> 4`, `A+C -> 5`, `B+C -> 6`, `A+B+C -> 7`).

**[Вернуться к началу](#Конфигурация)**

* * *

## Совместимость типов

Due to JavaScript limitations of being unable to properly serialize simple `ulong` fields in JSON when using web-based ConfigGenerator, `ulong` fields will be rendered as strings with `s_` prefix in the resulting config. This includes for example `"SteamOwnerID": 76561198006963719` that will be written by our ConfigGenerator as `"s_SteamOwnerID": "76561198006963719"`. ASF includes proper logic for handling this string mapping automatically, so `s_` entries in your configs are actually valid and correctly generated. If you're generating configs yourself, we recommend to stick with original `ulong` fields if possible, but if you're unable to do so, you can also follow this scheme and encode them as strings with `s_` prefix added to their names. We hope to resolve this JavaScript limitation eventually.

**[Вернуться к началу](#Конфигурация)**

* * *

## Совместимость конфигураций

It's top priority for ASF to remain compatible with older configs. As you should already know, missing config properties are treated the same as they would be defined with their **default values**. Therefore, if new config property gets introduced in new version of ASF, all your configs will remain **compatible** with new version, and ASF will treat that new config property as it'd be defined with its **default value**. You can always add, remove or edit config properties according to your needs. We recommend to limit defined config properties only to those that you want to change, since this way you automatically inherit default values for all other ones, not only keeping your config clean but also increasing compatibility in case we decide to change a default value for property that you don't want to explicitly set yourself. Feel free to check `minimal.json` example configuration file that follows this concept.

**[Вернуться к началу](#Конфигурация)**

* * *

## Автоматическая перезагрузка

Starting with ASF V2.1.6.2+, the program is now aware of configs being modified "on-the-fly" - thanks to that, ASF will automatically:

- Create (and start, if needed) new bot instance, when you create its config
- Stop (if needed) and remove old bot instance, when you delete its config
- Stop (and start, if needed) any bot instance, when you edit its config
- Restart (if needed) the bot under new name, when you rename its config

All of the above is transparent and will be done automatically without a need of restarting the program, or killing other (unaffected) bot instances.

In addition to that, ASF will also restart itself (if `AutoRestart` permits) if you modify core ASF `ASF.json` config. Likewise, program will quit if you delete or rename it.

**[Вернуться к началу](#Конфигурация)**